/* 
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD 
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => FlatTagPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// flatTagView.ts
var import_obsidian = require("obsidian");

// constants.ts
var VIEW_TYPE = "flat-tag-view";

// flatTagView.ts
var FlatTagView = class extends import_obsidian.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.selectedTags = /* @__PURE__ */ new Set();
    this.excludedTags = /* @__PURE__ */ new Set();
    this.allTags = /* @__PURE__ */ new Map();
    this.currentSort = "az";
    this.tagsByFile = /* @__PURE__ */ new Map();
    this.tagSearchText = "";
    this.searchMode = "note";
    this.touchTimer = null;
    this.plugin = plugin;
    this.containerEl.addClass("flat-tag-view");
  }
  getViewType() {
    return VIEW_TYPE;
  }
  getDisplayText() {
    return "Flat Tags";
  }
  getIcon() {
    return "tag";
  }
  async onOpen() {
    this.container = this.contentEl.createDiv({ cls: "flat-tag-container" });
    this.sortContainer = this.container.createDiv({ cls: "flat-tag-sort-container" });
    const buttonSection = this.sortContainer.createDiv({ cls: "flat-tag-buttons-section" });
    const sortByAZ = buttonSection.createDiv({ cls: "flat-tag-sort-button", title: "Sort A-Z" });
    (0, import_obsidian.setIcon)(sortByAZ, "lucide-sort-asc");
    const sortByCount = buttonSection.createDiv({ cls: "flat-tag-sort-button", title: "Sort by usage" });
    (0, import_obsidian.setIcon)(sortByCount, "lucide-bar-chart-2");
    const clearButton = buttonSection.createDiv({ cls: "flat-tag-clear-button", title: "Clear tag selections" });
    (0, import_obsidian.setIcon)(clearButton, "x");
    clearButton.addEventListener("click", () => {
      this.clearTagSelections();
    });
    const scopeBtn = buttonSection.createDiv({
      cls: "flat-tag-mode-button",
      text: "NOTE",
      title: "Click to cycle: Note -> Line"
    });
    const taskBtn = buttonSection.createDiv({
      cls: "flat-tag-mode-button",
      text: "TASK-ALL",
      title: "Click to cycle: All -> Todo -> Done"
    });
    const updateModeUI = () => {
      sortByAZ.removeClass("is-active");
      sortByCount.removeClass("is-active");
      if (this.currentSort === "az")
        sortByAZ.addClass("is-active");
      if (this.currentSort === "count")
        sortByCount.addClass("is-active");
      scopeBtn.removeClass("is-active");
      taskBtn.removeClass("is-active");
      if (this.searchMode === "note") {
        scopeBtn.setText("NOTE");
        scopeBtn.addClass("is-active");
      } else if (this.searchMode === "line") {
        scopeBtn.setText("LINE");
        scopeBtn.addClass("is-active");
      } else if (this.searchMode === "task") {
        taskBtn.setText("TASK-ALL");
        taskBtn.addClass("is-active");
      } else if (this.searchMode === "task-todo") {
        taskBtn.setText("TASK-TODO");
        taskBtn.addClass("is-active");
      } else if (this.searchMode === "task-done") {
        taskBtn.setText("TASK-DONE");
        taskBtn.addClass("is-active");
      }
      if (["note", "line"].includes(this.searchMode)) {
        if (!["TASK-ALL", "TASK-TODO", "TASK-DONE"].includes(taskBtn.innerText)) {
          taskBtn.setText("TASK-ALL");
        }
      } else {
        if (!["NOTE", "LINE"].includes(scopeBtn.innerText)) {
          scopeBtn.setText("NOTE");
        }
      }
      this.updateSearch();
      if (this.tagContainer) {
        this.renderTags();
      }
    };
    sortByAZ.addEventListener("click", () => {
      this.currentSort = "az";
      updateModeUI();
    });
    sortByCount.addEventListener("click", () => {
      this.currentSort = "count";
      updateModeUI();
    });
    scopeBtn.addEventListener("click", () => {
      if (["note", "line"].includes(this.searchMode)) {
        this.searchMode = this.searchMode === "note" ? "line" : "note";
      } else {
        this.searchMode = scopeBtn.innerText === "LINE" ? "line" : "note";
      }
      updateModeUI();
    });
    taskBtn.addEventListener("click", () => {
      if (["task", "task-todo", "task-done"].includes(this.searchMode)) {
        if (this.searchMode === "task")
          this.searchMode = "task-todo";
        else if (this.searchMode === "task-todo")
          this.searchMode = "task-done";
        else
          this.searchMode = "task";
      } else {
        if (taskBtn.innerText === "TASK-TODO")
          this.searchMode = "task-todo";
        else if (taskBtn.innerText === "TASK-DONE")
          this.searchMode = "task-done";
        else
          this.searchMode = "task";
      }
      updateModeUI();
    });
    updateModeUI();
    const searchSection = this.sortContainer.createDiv({ cls: "flat-tag-search-section" });
    const searchBox = searchSection.createEl("input", {
      cls: "flat-tag-search-input",
      attr: {
        type: "text",
        placeholder: "Search tags..."
      }
    });
    const clearSearchButton = searchSection.createDiv({
      cls: "flat-tag-search-clear-button",
      title: "Clear search"
    });
    (0, import_obsidian.setIcon)(clearSearchButton, "square-x");
    clearSearchButton.addEventListener("click", () => {
      this.clearSearchBox();
    });
    searchBox.addEventListener("input", (e) => {
      const target = e.target;
      this.tagSearchText = target.value;
      this.renderTags();
    });
    this.tagContainer = this.container.createDiv({ cls: "flat-tag-list" });
    await this.loadTags();
    this.registerEvent(
      this.app.metadataCache.on("changed", (file) => {
        this.updateFileTags(file);
      })
    );
    this.registerEvent(
      this.app.vault.on("delete", (file) => {
        if (file instanceof import_obsidian.TFile && file.extension === "md") {
          this.removeFileTags(file.path);
          this.renderTags();
        }
      })
    );
    this.registerEvent(
      this.app.vault.on("rename", (file, oldPath) => {
        if (file instanceof import_obsidian.TFile && file.extension === "md") {
          const tags = this.tagsByFile.get(oldPath);
          if (tags) {
            this.tagsByFile.set(file.path, tags);
            this.tagsByFile.delete(oldPath);
          }
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("flat-tag-view:settings-updated", () => {
        this.renderTags();
      })
    );
  }
  async loadTags() {
    this.allTags.clear();
    this.tagsByFile.clear();
    const files = this.app.vault.getMarkdownFiles();
    for (const file of files) {
      const fileTags = this.getFileTags(file);
      this.tagsByFile.set(file.path, new Set(fileTags));
      fileTags.forEach((tag) => {
        this.allTags.set(tag, (this.allTags.get(tag) || 0) + 1);
      });
    }
    this.renderTags();
  }
  updateFileTags(file) {
    const oldTags = this.tagsByFile.get(file.path) || /* @__PURE__ */ new Set();
    const newTagsArr = this.getFileTags(file);
    const newTags = new Set(newTagsArr);
    let hasChanges = false;
    oldTags.forEach((tag) => {
      if (!newTags.has(tag)) {
        hasChanges = true;
        const count = (this.allTags.get(tag) || 0) - 1;
        if (count <= 0)
          this.allTags.delete(tag);
        else
          this.allTags.set(tag, count);
      }
    });
    newTags.forEach((tag) => {
      if (!oldTags.has(tag)) {
        hasChanges = true;
        this.allTags.set(tag, (this.allTags.get(tag) || 0) + 1);
      }
    });
    if (hasChanges) {
      this.tagsByFile.set(file.path, newTags);
      this.renderTags();
    }
  }
  removeFileTags(filePath) {
    const oldTags = this.tagsByFile.get(filePath);
    if (!oldTags)
      return;
    oldTags.forEach((tag) => {
      const count = (this.allTags.get(tag) || 0) - 1;
      if (count <= 0)
        this.allTags.delete(tag);
      else
        this.allTags.set(tag, count);
    });
    this.tagsByFile.delete(filePath);
  }
  async renderTags() {
    var _a;
    this.tagContainer.empty();
    if (this.sortContainer) {
      const sortAzBtn = this.sortContainer.querySelector('.flat-tag-sort-button[title="Sort A-Z"]');
      const sortCountBtn = this.sortContainer.querySelector('.flat-tag-sort-button[title="Sort by usage"]');
      if (sortAzBtn && sortCountBtn) {
        sortAzBtn.removeClass("is-active");
        sortCountBtn.removeClass("is-active");
        if (this.currentSort === "az")
          sortAzBtn.addClass("is-active");
        else
          sortCountBtn.addClass("is-active");
      }
    }
    const filteredTags = await this.getFilteredTagsAsync();
    const pinnedTags = /* @__PURE__ */ new Map();
    const normalTags = /* @__PURE__ */ new Map();
    const safePinnedList = ((_a = this.plugin.settings) == null ? void 0 : _a.pinnedTags) || [];
    const pinnedSet = new Set(safePinnedList);
    filteredTags.forEach((count, tag) => {
      if (pinnedSet.has(tag)) {
        pinnedTags.set(tag, count);
      } else {
        normalTags.set(tag, count);
      }
    });
    if (pinnedTags.size > 0) {
      const pinContainer = this.tagContainer.createDiv({ cls: "flat-tag-pinned-section" });
      const pinnedIcon = pinContainer.createSpan({ cls: "flat-tag-letter" });
      (0, import_obsidian.setIcon)(pinnedIcon, "pin");
      const pinnedSorted = Array.from(pinnedTags.entries()).sort((a, b) => a[0].localeCompare(b[0], "pl"));
      pinnedSorted.forEach(([tag, count]) => {
        this.createTagElement(tag, count, pinContainer);
      });
      this.tagContainer.createDiv({ cls: "flat-tag-separator" });
    }
    let sortedTags;
    if (this.currentSort === "az") {
      sortedTags = Array.from(normalTags.entries()).sort((a, b) => a[0].localeCompare(b[0], "pl"));
    } else {
      sortedTags = Array.from(normalTags.entries()).sort((a, b) => b[1] - a[1]);
    }
    if (this.currentSort === "az") {
      const tagsByLetter = /* @__PURE__ */ new Map();
      tagsByLetter.set("other", []);
      for (let charCode = 65; charCode <= 90; charCode++) {
        tagsByLetter.set(String.fromCharCode(charCode), []);
      }
      const polishDiacritics = ["\u0104", "\u0106", "\u0118", "\u0141", "\u0143", "\xD3", "\u015A", "\u0179", "\u017B"];
      polishDiacritics.forEach((letter) => tagsByLetter.set(letter, []));
      sortedTags.forEach((tagItem) => {
        var _a2, _b, _c;
        const [tag] = tagItem;
        const firstChar = tag.charAt(0).toUpperCase();
        if (firstChar.match(/[A-Z]/)) {
          (_a2 = tagsByLetter.get(firstChar)) == null ? void 0 : _a2.push(tagItem);
        } else if (polishDiacritics.includes(firstChar)) {
          (_b = tagsByLetter.get(firstChar)) == null ? void 0 : _b.push(tagItem);
        } else {
          (_c = tagsByLetter.get("other")) == null ? void 0 : _c.push(tagItem);
        }
      });
      tagsByLetter.forEach((letterTags, letter) => {
        if (letterTags.length > 0) {
          if (letter !== "other") {
            const letterEl = this.tagContainer.createSpan({ cls: "flat-tag-letter" });
            letterEl.setText(letter);
          }
          letterTags.forEach(([tag, count]) => {
            this.createTagElement(tag, count, this.tagContainer);
          });
        }
      });
    } else {
      sortedTags.forEach(([tag, count]) => {
        this.createTagElement(tag, count, this.tagContainer);
      });
    }
  }
  createTagElement(tag, count, parentEl) {
    var _a;
    const tagEl = parentEl.createSpan({ cls: "flat-tag" });
    if (this.selectedTags.has(tag))
      tagEl.addClass("flat-tag-selected");
    else if (this.excludedTags.has(tag))
      tagEl.addClass("flat-tag-excluded");
    const safePinned = ((_a = this.plugin.settings) == null ? void 0 : _a.pinnedTags) || [];
    if (safePinned.includes(tag))
      tagEl.addClass("flat-tag-pinned");
    tagEl.setText(`#${tag} (${count})`);
    const handleTagInteraction = async (isMultiSelect, isExclude, isPin) => {
      if (isPin) {
        if (!this.plugin.settings)
          return;
        if (!this.plugin.settings.pinnedTags)
          this.plugin.settings.pinnedTags = [];
        if (this.plugin.settings.pinnedTags.includes(tag)) {
          this.plugin.settings.pinnedTags = this.plugin.settings.pinnedTags.filter((t) => t !== tag);
        } else {
          this.plugin.settings.pinnedTags.push(tag);
        }
        await this.plugin.saveSettings();
        return;
      }
      if (isExclude) {
        if (this.excludedTags.has(tag)) {
          this.excludedTags.delete(tag);
        } else {
          this.excludedTags.add(tag);
          this.selectedTags.delete(tag);
        }
      } else if (isMultiSelect) {
        if (this.selectedTags.has(tag)) {
          this.selectedTags.delete(tag);
        } else {
          this.selectedTags.add(tag);
          this.excludedTags.delete(tag);
        }
      } else {
        if (this.selectedTags.size === 1 && this.selectedTags.has(tag)) {
          this.selectedTags.clear();
        } else {
          this.selectedTags.clear();
          this.excludedTags.clear();
          this.selectedTags.add(tag);
        }
      }
      this.renderTags();
      this.updateSearch();
    };
    tagEl.addEventListener("click", (e) => {
      e.preventDefault();
      handleTagInteraction(e.ctrlKey || e.metaKey, e.shiftKey, e.altKey);
    });
    tagEl.addEventListener("touchstart", (e) => {
      this.touchTimer = window.setTimeout(() => {
        this.touchTimer = null;
        const isCurrentlySelected = this.selectedTags.has(tag);
        handleTagInteraction(!isCurrentlySelected, isCurrentlySelected, false);
      }, 500);
    }, { passive: true });
    tagEl.addEventListener("touchend", (e) => {
      if (this.touchTimer) {
        window.clearTimeout(this.touchTimer);
        this.touchTimer = null;
        handleTagInteraction(false, false, false);
      } else {
        e.preventDefault();
      }
    });
    tagEl.addEventListener("touchmove", () => {
      if (this.touchTimer) {
        window.clearTimeout(this.touchTimer);
        this.touchTimer = null;
      }
    }, { passive: true });
  }
  async getFilteredTagsAsync() {
    var _a, _b;
    let filteredTags = /* @__PURE__ */ new Map();
    if (this.selectedTags.size === 0) {
      filteredTags = new Map(this.allTags);
    } else {
      const selectedTagsArray = Array.from(this.selectedTags);
      const matchingFiles = [];
      this.tagsByFile.forEach((tags, filePath) => {
        if (selectedTagsArray.every((tag) => tags.has(tag))) {
          matchingFiles.push(filePath);
        }
      });
      if (this.searchMode === "note") {
        matchingFiles.forEach((filePath) => {
          const fileTags = this.tagsByFile.get(filePath);
          if (fileTags) {
            fileTags.forEach((tag) => {
              filteredTags.set(tag, (filteredTags.get(tag) || 0) + 1);
            });
          }
        });
      } else {
        for (const filePath of matchingFiles) {
          const file = this.app.vault.getAbstractFileByPath(filePath);
          if (file instanceof import_obsidian.TFile) {
            const content = await this.app.vault.cachedRead(file);
            const lines = content.split("\n");
            for (const line of lines) {
              const lowerLine = line.toLowerCase();
              if (this.searchMode === "task" && !lowerLine.includes("- ["))
                continue;
              if (this.searchMode === "task-todo" && !lowerLine.includes("- [ ]"))
                continue;
              if (this.searchMode === "task-done" && !lowerLine.includes("- [x]"))
                continue;
              const lineTags = /* @__PURE__ */ new Set();
              const tagRegex = /#([^\s#]+)/g;
              let match;
              while ((match = tagRegex.exec(line)) !== null) {
                lineTags.add(match[1]);
              }
              if (selectedTagsArray.every((selectedTag) => {
                return Array.from(lineTags).some((t) => t.toLowerCase() === selectedTag.toLowerCase());
              })) {
                lineTags.forEach((tag) => {
                  filteredTags.set(tag, (filteredTags.get(tag) || 0) + 1);
                });
              }
            }
          }
        }
      }
      selectedTagsArray.forEach((tag) => {
        if (!filteredTags.has(tag)) {
          filteredTags.set(tag, this.allTags.get(tag) || 0);
        }
      });
    }
    const cutoff = ((_a = this.plugin.settings) == null ? void 0 : _a.frequencyCutoff) || 0;
    const safePinned = ((_b = this.plugin.settings) == null ? void 0 : _b.pinnedTags) || [];
    if (cutoff > 0) {
      const result = /* @__PURE__ */ new Map();
      filteredTags.forEach((count, tag) => {
        if (count >= cutoff || this.selectedTags.has(tag) || safePinned.includes(tag)) {
          result.set(tag, count);
        }
      });
      filteredTags = result;
    }
    if (this.tagSearchText) {
      const searchText = this.tagSearchText.toLowerCase();
      const result = /* @__PURE__ */ new Map();
      filteredTags.forEach((count, tag) => {
        if (tag.toLowerCase().includes(searchText) || this.selectedTags.has(tag) || this.excludedTags.has(tag)) {
          result.set(tag, count);
        }
      });
      return result;
    }
    return filteredTags;
  }
  updateSearch() {
    let searchLeaf = this.app.workspace.getLeavesOfType("search")[0];
    if (!searchLeaf) {
      const rightLeaf = this.app.workspace.getRightLeaf(false);
      if (rightLeaf) {
        searchLeaf = rightLeaf;
        searchLeaf.setViewState({ type: "search" });
      }
    }
    if (this.selectedTags.size === 0 && this.excludedTags.size === 0) {
      if (searchLeaf) {
        const searchView = searchLeaf.view;
        if (searchView && typeof searchView.setQuery === "function") {
          searchView.setQuery("");
        }
      }
      return;
    }
    let tagQuery = "";
    const selected = Array.from(this.selectedTags);
    const excluded = Array.from(this.excludedTags);
    if (this.searchMode === "note") {
      tagQuery = [
        ...selected.map((tag) => `tag:#${tag}`),
        ...excluded.map((tag) => `-tag:#${tag}`)
      ].join(" ");
    } else {
      let prefix = "line:(";
      if (this.searchMode === "task")
        prefix = "task:(";
      else if (this.searchMode === "task-todo")
        prefix = "task-todo:(";
      else if (this.searchMode === "task-done")
        prefix = "task-done:(";
      const blockContents = [
        ...selected.map((tag) => `#${tag}`),
        ...excluded.map((tag) => `-#${tag}`)
      ].join(" ");
      tagQuery = `${prefix} ${blockContents} )`;
    }
    if (searchLeaf) {
      const searchView = searchLeaf.view;
      if (searchView && typeof searchView.setQuery === "function") {
        searchView.setQuery(tagQuery);
      }
      this.app.workspace.revealLeaf(searchLeaf);
    }
  }
  getFileTags(file) {
    const cache = this.app.metadataCache.getFileCache(file);
    if (!cache)
      return [];
    const tags = /* @__PURE__ */ new Set();
    if (cache.tags) {
      cache.tags.forEach((tagObj) => {
        const tag = tagObj.tag.replace(/^#/, "");
        tags.add(tag);
      });
    }
    if (cache.frontmatter && cache.frontmatter.tags) {
      const fmTags = cache.frontmatter.tags;
      if (typeof fmTags === "string") {
        fmTags.split(/[\s,]+/).filter(Boolean).forEach((tag) => {
          tags.add(tag);
        });
      } else if (Array.isArray(fmTags)) {
        fmTags.forEach((tag) => {
          if (tag)
            tags.add(String(tag));
        });
      }
    }
    return Array.from(tags);
  }
  toggleSort() {
    this.currentSort = this.currentSort === "az" ? "count" : "az";
    this.renderTags();
  }
  clearTagSelections() {
    this.selectedTags.clear();
    this.excludedTags.clear();
    this.renderTags();
    this.updateSearch();
  }
  clearSearchBox() {
    const searchBox = this.contentEl.querySelector(".flat-tag-search-input");
    if (searchBox) {
      searchBox.value = "";
      this.tagSearchText = "";
      this.renderTags();
    }
  }
};

// styles.ts
var getStyles = () => {
  return `
    .workspace-split.mod-root .view-content.flat-tag-view {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: stretch;
      height: 100%;
      padding: 0;
      margin: 0;
    }

    .flat-tag-container {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: flex-start;
      width: 100%;
      height: 100%;
      box-sizing: border-box;
      padding: 0;
      margin: 0;
    }

    .flat-tag-sort-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-shrink: 0;
      padding: 8px;
      background-color: var(--background-primary);
      border-bottom: 1px solid var(--background-modifier-border);
      width: 100%;
      flex-wrap: wrap; /* Allows searching to wrap nicely on narrow panes */
      gap: 8px;
    }
    
    .flat-tag-buttons-section {
      display: flex;
      gap: 6px;
      align-items: center;
      flex-wrap: wrap;
    }
    
    /* Base styling for our Note/Line and Task toggle buttons */
    .flat-tag-mode-button {
      cursor: pointer;
      padding: 4px 10px;
      font-size: 0.8em;
      font-weight: 500;
      border-radius: var(--radius-s);
      color: var(--text-muted);
      background-color: var(--background-modifier-form-field);
      border: 1px solid var(--background-modifier-border);
      transition: all 0.15s ease-in-out;
      user-select: none;
      display: flex;
      align-items: center;
      justify-content: center;
      min-width: 65px;
    }

    /* Hover effect for inactive state */
    .flat-tag-mode-button:hover {
      color: var(--text-normal);
      background-color: var(--background-modifier-hover);
      border-color: var(--background-modifier-border-hover);
    }

    /* Highly visible active (pressed) state */
    .flat-tag-mode-button.is-active {
      background-color: var(--interactive-accent);
      color: var(--text-on-accent);
      border-color: var(--interactive-accent);
      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
    }

    /* Hover effect when active */
    .flat-tag-mode-button.is-active:hover {
      background-color: var(--interactive-accent-hover);
      border-color: var(--interactive-accent-hover);
    }
    
    .flat-tag-search-section {
      display: flex;
      align-items: center;
      gap: 4px;
      margin-left: auto;
      background-color: var(--background-secondary);
      border-radius: 4px;
      padding: 2px 8px;
      flex-grow: 1;
      max-width: 200px;
    }
    
    .flat-tag-search-input {
      background: transparent;
      border: none;
      color: var(--text-normal);
      width: 100%;
      height: 24px;
      font-size: 0.9em;
    }
    
    .flat-tag-search-input:focus {
      outline: none;
      box-shadow: none;
    }
    
    .flat-tag-search-icon {
      color: var(--text-muted);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .flat-tag-search-clear-button {
      cursor: pointer;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8em;
    }

    .flat-tag-search-clear-button:hover {
      color: var(--text-normal);
    }

    .flat-tag-sort-button, .flat-tag-clear-button {
      cursor: pointer;
      padding: 4px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .flat-tag-sort-button:hover, .flat-tag-clear-button:hover {
      background-color: var(--interactive-hover);
    }

    .flat-tag-sort-button.is-active {
      background-color: var(--interactive-accent);
      color: var(--text-on-accent);
      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
    }

    .flat-tag-sort-button.is-active:hover {
      background-color: var(--interactive-accent-hover);
    }

    .flat-tag-list {
      display: flex;
      flex-wrap: wrap;
      align-content: flex-start;
      overflow-y: auto;
      flex: 1;
      line-height: 1.5em;
      padding: 8px;
      width: 100%;
    }

    .flat-tag {
      display: inline-block;
      padding: 2px 6px;
      margin: 2px;
      border-radius: 4px;
      cursor: pointer;
      background-color: var(--tag-background);
      color: var(--tag-color);
      transition: background-color 0.1s;
    }

    .flat-tag:hover {
      background-color: var(--tag-background-hover);
    }

    .flat-tag-selected {
      font-weight: bold;
      background-color: var(--interactive-accent);
      color: var(--text-on-accent);
    }

    .flat-tag-excluded {
      font-weight: bold;
      background-color: var(--color-red);
      color: var(--text-on-accent);
    }
    
    .flat-tag-letter {
      display: inline-flex;
      font-weight: bold;
      font-size: 1.2em;
      margin: 2px;
      padding: 2px 6px;
      border-radius: 4px;
      background-color: var(--background-secondary);
      color: var(--text-normal);
      align-items: center;
      justify-content: center;
      min-width: 24px;
    }
        .flat-tag-pinned-section {
      width: 100%;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      background-color: var(--background-secondary-alt);
      padding: 4px;
      border-radius: var(--radius-s);
      margin-bottom: 4px;
    }

    .flat-tag-separator {
      width: 100%;
      height: 1px;
      background-color: var(--background-modifier-border);
      margin: 4px 0 8px 0;
    }
    
    .flat-tag-pinned {
      border: 1px solid var(--interactive-accent);
    }

  `;
};

// settings.ts
var import_obsidian2 = require("obsidian");
var DEFAULT_SETTINGS = {
  pinnedTags: [],
  frequencyCutoff: 0
  // 0 means show all tags
};
var FlatTagSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian2.Setting(containerEl).setName("Frequency Cutoff").setDesc("Hide tags that appear fewer times than this number in the vault. 0 means show all tags.").addText(
      (text) => text.setPlaceholder("0").setValue(this.plugin.settings.frequencyCutoff.toString()).onChange(async (value) => {
        const parsed = parseInt(value, 10);
        if (!isNaN(parsed) && parsed >= 0) {
          this.plugin.settings.frequencyCutoff = parsed;
          await this.plugin.saveSettings();
        }
      })
    );
    new import_obsidian2.Setting(containerEl).setName("Clear Pinned Tags").setDesc("Removes all pinned tags from the top of the flat tag list.").addButton(
      (btn) => btn.setButtonText("Clear Pinned").onClick(async () => {
        this.plugin.settings.pinnedTags = [];
        await this.plugin.saveSettings();
      })
    );
  }
};

// main.ts
var FlatTagPlugin = class extends import_obsidian3.Plugin {
  async onload() {
    await this.loadSettings();
    this.registerView(
      VIEW_TYPE,
      // Pass 'this' so the view can access settings and save data
      (leaf) => new FlatTagView(leaf, this)
    );
    this.addRibbonIcon("tag", "Open Flat Tags", () => {
      this.activateView();
    });
    this.addSettingTab(new FlatTagSettingTab(this.app, this));
    this.addCommand({
      id: "open-flat-tags",
      name: "Open Flat Tags",
      callback: () => {
        this.activateView();
      }
    });
    this.addCommand({
      id: "toggle-flat-tag-sort",
      name: "Toggle Flat Tag Sort (A-Z/Usage)",
      callback: () => {
        var _a;
        const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0]) == null ? void 0 : _a.view;
        if (view)
          view.toggleSort();
      }
    });
    this.addCommand({
      id: "clear-flat-tag-selections",
      name: "Clear Flat Tag Selections",
      callback: () => {
        var _a;
        const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0]) == null ? void 0 : _a.view;
        if (view)
          view.clearTagSelections();
      }
    });
    this.addCommand({
      id: "toggle-flat-tag-single-use",
      name: "Toggle Flat Tag Single Use",
      callback: () => {
        var _a;
        const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0]) == null ? void 0 : _a.view;
        if (view)
          view.toggleSingleUseTags();
      }
    });
    this.addCommand({
      id: "toggle-flat-tag-alphabet",
      name: "Toggle Flat Tag Alphabet Letters",
      callback: () => {
        var _a;
        const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0]) == null ? void 0 : _a.view;
        if (view)
          view.toggleAlphabetLetters();
      }
    });
    this.addCommand({
      id: "clear-flat-tag-search",
      name: "Clear Flat Tag Search Box",
      callback: () => {
        var _a;
        const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0]) == null ? void 0 : _a.view;
        if (view)
          view.clearSearchBox();
      }
    });
    this.addStyle();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.app.workspace.trigger("flat-tag-view:settings-updated");
  }
  async onunload() {
    this.app.workspace.detachLeavesOfType(VIEW_TYPE);
  }
  async activateView() {
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType(VIEW_TYPE)[0];
    if (!leaf) {
      const rightLeaf = workspace.getRightLeaf(false);
      if (rightLeaf) {
        leaf = rightLeaf;
        await leaf.setViewState({ type: VIEW_TYPE });
      }
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  addStyle() {
    const styleEl = document.createElement("style");
    styleEl.innerHTML = getStyles();
    document.head.appendChild(styleEl);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJmbGF0VGFnVmlldy50cyIsICJjb25zdGFudHMudHMiLCAic3R5bGVzLnRzIiwgInNldHRpbmdzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4sIFdvcmtzcGFjZUxlYWYgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEZsYXRUYWdWaWV3IH0gZnJvbSBcIi4vZmxhdFRhZ1ZpZXdcIjtcbmltcG9ydCB7IFZJRVdfVFlQRSB9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZ2V0U3R5bGVzIH0gZnJvbSBcIi4vc3R5bGVzXCI7XG5pbXBvcnQgeyBGbGF0VGFnUGx1Z2luU2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MsIEZsYXRUYWdTZXR0aW5nVGFiIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmxhdFRhZ1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHNldHRpbmdzOiBGbGF0VGFnUGx1Z2luU2V0dGluZ3M7XG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFZJRVdfVFlQRSxcbiAgICAgIC8vIFBhc3MgJ3RoaXMnIHNvIHRoZSB2aWV3IGNhbiBhY2Nlc3Mgc2V0dGluZ3MgYW5kIHNhdmUgZGF0YVxuICAgICAgKGxlYWY6IFdvcmtzcGFjZUxlYWYpID0+IG5ldyBGbGF0VGFnVmlldyhsZWFmLCB0aGlzKVxuICAgICk7XG5cbiAgICB0aGlzLmFkZFJpYmJvbkljb24oXCJ0YWdcIiwgXCJPcGVuIEZsYXQgVGFnc1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmFjdGl2YXRlVmlldygpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBGbGF0VGFnU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiBcIm9wZW4tZmxhdC10YWdzXCIsXG4gICAgICBuYW1lOiBcIk9wZW4gRmxhdCBUYWdzXCIsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICB0aGlzLmFjdGl2YXRlVmlldygpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIEFkZCBjb21tYW5kcyBmb3IgaG90a2V5c1xuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogXCJ0b2dnbGUtZmxhdC10YWctc29ydFwiLFxuICAgICAgbmFtZTogXCJUb2dnbGUgRmxhdCBUYWcgU29ydCAoQS1aL1VzYWdlKVwiLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgY29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFKVswXT8udmlldyBhcyBGbGF0VGFnVmlldztcbiAgICAgICAgaWYgKHZpZXcpIHZpZXcudG9nZ2xlU29ydCgpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogXCJjbGVhci1mbGF0LXRhZy1zZWxlY3Rpb25zXCIsXG4gICAgICBuYW1lOiBcIkNsZWFyIEZsYXQgVGFnIFNlbGVjdGlvbnNcIixcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRSlbMF0/LnZpZXcgYXMgRmxhdFRhZ1ZpZXc7XG4gICAgICAgIGlmICh2aWV3KSB2aWV3LmNsZWFyVGFnU2VsZWN0aW9ucygpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogXCJ0b2dnbGUtZmxhdC10YWctc2luZ2xlLXVzZVwiLFxuICAgICAgbmFtZTogXCJUb2dnbGUgRmxhdCBUYWcgU2luZ2xlIFVzZVwiLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgY29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFKVswXT8udmlldyBhcyBGbGF0VGFnVmlldztcbiAgICAgICAgaWYgKHZpZXcpIHZpZXcudG9nZ2xlU2luZ2xlVXNlVGFncygpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogXCJ0b2dnbGUtZmxhdC10YWctYWxwaGFiZXRcIixcbiAgICAgIG5hbWU6IFwiVG9nZ2xlIEZsYXQgVGFnIEFscGhhYmV0IExldHRlcnNcIixcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRSlbMF0/LnZpZXcgYXMgRmxhdFRhZ1ZpZXc7XG4gICAgICAgIGlmICh2aWV3KSB2aWV3LnRvZ2dsZUFscGhhYmV0TGV0dGVycygpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogXCJjbGVhci1mbGF0LXRhZy1zZWFyY2hcIixcbiAgICAgIG5hbWU6IFwiQ2xlYXIgRmxhdCBUYWcgU2VhcmNoIEJveFwiLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgY29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFKVswXT8udmlldyBhcyBGbGF0VGFnVmlldztcbiAgICAgICAgaWYgKHZpZXcpIHZpZXcuY2xlYXJTZWFyY2hCb3goKTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZFN0eWxlKCk7XG4gIH1cblxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gIH1cblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgICAvLyBOb3RpZnkgdGhlIHZpZXcgdGhhdCBzZXR0aW5ncyBoYXZlIGNoYW5nZWQgc28gaXQgY2FuIHJlLXJlbmRlclxuICAgIHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKFwiZmxhdC10YWctdmlldzpzZXR0aW5ncy11cGRhdGVkXCIpO1xuICB9XG5cbiAgYXN5bmMgb251bmxvYWQoKSB7XG4gICAgdGhpcy5hcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShWSUVXX1RZUEUpO1xuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVWaWV3KCkge1xuICAgIGNvbnN0IHsgd29ya3NwYWNlIH0gPSB0aGlzLmFwcDtcbiAgICBcbiAgICBsZXQgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFKVswXTtcbiAgICBcbiAgICBpZiAoIWxlYWYpIHtcbiAgICAgIGNvbnN0IHJpZ2h0TGVhZiA9IHdvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xuICAgICAgaWYgKHJpZ2h0TGVhZikge1xuICAgICAgICBsZWFmID0gcmlnaHRMZWFmO1xuICAgICAgICBhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7IHR5cGU6IFZJRVdfVFlQRSB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKGxlYWYpIHtcbiAgICAgIHdvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuICAgIH1cbiAgfVxuXG4gIGFkZFN0eWxlKCkge1xuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgc3R5bGVFbC5pbm5lckhUTUwgPSBnZXRTdHlsZXMoKTtcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGaWxlLCBzZXRJY29uIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBWSUVXX1RZUEUgfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcbmltcG9ydCBGbGF0VGFnUGx1Z2luIGZyb20gXCIuL21haW5cIjtcblxuZXhwb3J0IGNsYXNzIEZsYXRUYWdWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwdWJsaWMgcGx1Z2luOiBGbGF0VGFnUGx1Z2luO1xuICBwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgdGFnQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBzb3J0Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgXG4gIHByaXZhdGUgc2VsZWN0ZWRUYWdzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcbiAgcHJpdmF0ZSBleGNsdWRlZFRhZ3M6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIGFsbFRhZ3M6IE1hcDxzdHJpbmcsIG51bWJlcj4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgY3VycmVudFNvcnQ6IFwiYXpcIiB8IFwiY291bnRcIiA9IFwiYXpcIjtcbiAgcHJpdmF0ZSB0YWdzQnlGaWxlOiBNYXA8c3RyaW5nLCBTZXQ8c3RyaW5nPj4gPSBuZXcgTWFwKCk7XG4gIFxuICBwcml2YXRlIHRhZ1NlYXJjaFRleHQ6IHN0cmluZyA9IFwiXCI7XG4gIHByaXZhdGUgc2VhcmNoTW9kZTogXCJub3RlXCIgfCBcImxpbmVcIiB8IFwidGFza1wiIHwgXCJ0YXNrLXRvZG9cIiB8IFwidGFzay1kb25lXCIgPSBcIm5vdGVcIjtcbiAgcHJpdmF0ZSB0b3VjaFRpbWVyOiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IEZsYXRUYWdQbHVnaW4pIHtcbiAgICBzdXBlcihsZWFmKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLmNvbnRhaW5lckVsLmFkZENsYXNzKFwiZmxhdC10YWctdmlld1wiKTtcbiAgfVxuXG4gIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFZJRVdfVFlQRTtcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiRmxhdCBUYWdzXCI7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwidGFnXCI7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgdGhpcy5jb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwiZmxhdC10YWctY29udGFpbmVyXCIgfSk7XG4gICAgdGhpcy5zb3J0Q29udGFpbmVyID0gdGhpcy5jb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcImZsYXQtdGFnLXNvcnQtY29udGFpbmVyXCIgfSk7XG4gIFxuICAgIGNvbnN0IGJ1dHRvblNlY3Rpb24gPSB0aGlzLnNvcnRDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcImZsYXQtdGFnLWJ1dHRvbnMtc2VjdGlvblwiIH0pO1xuICBcbiAgICBjb25zdCBzb3J0QnlBWiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiBcImZsYXQtdGFnLXNvcnQtYnV0dG9uXCIsIHRpdGxlOiBcIlNvcnQgQS1aXCIgfSk7XG4gICAgc2V0SWNvbihzb3J0QnlBWiwgXCJsdWNpZGUtc29ydC1hc2NcIik7XG4gICAgXG4gICAgY29uc3Qgc29ydEJ5Q291bnQgPSBidXR0b25TZWN0aW9uLmNyZWF0ZURpdih7IGNsczogXCJmbGF0LXRhZy1zb3J0LWJ1dHRvblwiLCB0aXRsZTogXCJTb3J0IGJ5IHVzYWdlXCIgfSk7XG4gICAgc2V0SWNvbihzb3J0QnlDb3VudCwgXCJsdWNpZGUtYmFyLWNoYXJ0LTJcIik7XG4gIFxuICAgIGNvbnN0IGNsZWFyQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6IFwiZmxhdC10YWctY2xlYXItYnV0dG9uXCIsIHRpdGxlOiBcIkNsZWFyIHRhZyBzZWxlY3Rpb25zXCIgfSk7XG4gICAgc2V0SWNvbihjbGVhckJ1dHRvbiwgXCJ4XCIpO1xuICAgIGNsZWFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsZWFyVGFnU2VsZWN0aW9ucygpO1xuICAgIH0pO1xuXG4gICAgLy8gQ3JlYXRlIFNjb3BlIEJ1dHRvbiAoTm90ZSAvIExpbmUpXG4gICAgY29uc3Qgc2NvcGVCdG4gPSBidXR0b25TZWN0aW9uLmNyZWF0ZURpdih7IFxuICAgICAgY2xzOiBcImZsYXQtdGFnLW1vZGUtYnV0dG9uXCIsIFxuICAgICAgdGV4dDogXCJOT1RFXCIsXG4gICAgICB0aXRsZTogXCJDbGljayB0byBjeWNsZTogTm90ZSAtPiBMaW5lXCIgXG4gICAgfSk7XG5cbiAgICAvLyBDcmVhdGUgVGFzayBCdXR0b24gKFRhc2sgLyBUb2RvIC8gRG9uZSlcbiAgICBjb25zdCB0YXNrQnRuID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVEaXYoeyBcbiAgICAgIGNsczogXCJmbGF0LXRhZy1tb2RlLWJ1dHRvblwiLCBcbiAgICAgIHRleHQ6IFwiVEFTSy1BTExcIixcbiAgICAgIHRpdGxlOiBcIkNsaWNrIHRvIGN5Y2xlOiBBbGwgLT4gVG9kbyAtPiBEb25lXCJcbiAgICB9KTtcblxuICAgIGNvbnN0IHVwZGF0ZU1vZGVVSSA9ICgpID0+IHtcbiAgICAgIC8vIFVwZGF0ZSBTb3J0IEJ1dHRvbnMgQWN0aXZlIFN0YXRlXG4gICAgICBzb3J0QnlBWi5yZW1vdmVDbGFzcyhcImlzLWFjdGl2ZVwiKTtcbiAgICAgIHNvcnRCeUNvdW50LnJlbW92ZUNsYXNzKFwiaXMtYWN0aXZlXCIpO1xuICAgICAgaWYgKHRoaXMuY3VycmVudFNvcnQgPT09IFwiYXpcIikgc29ydEJ5QVouYWRkQ2xhc3MoXCJpcy1hY3RpdmVcIik7XG4gICAgICBpZiAodGhpcy5jdXJyZW50U29ydCA9PT0gXCJjb3VudFwiKSBzb3J0QnlDb3VudC5hZGRDbGFzcyhcImlzLWFjdGl2ZVwiKTtcblxuICAgICAgLy8gVXBkYXRlIE1vZGUgQnV0dG9ucyBBY3RpdmUgU3RhdGVcbiAgICAgIHNjb3BlQnRuLnJlbW92ZUNsYXNzKFwiaXMtYWN0aXZlXCIpO1xuICAgICAgdGFza0J0bi5yZW1vdmVDbGFzcyhcImlzLWFjdGl2ZVwiKTtcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuc2VhcmNoTW9kZSA9PT0gXCJub3RlXCIpIHtcbiAgICAgICAgc2NvcGVCdG4uc2V0VGV4dChcIk5PVEVcIik7XG4gICAgICAgIHNjb3BlQnRuLmFkZENsYXNzKFwiaXMtYWN0aXZlXCIpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnNlYXJjaE1vZGUgPT09IFwibGluZVwiKSB7XG4gICAgICAgIHNjb3BlQnRuLnNldFRleHQoXCJMSU5FXCIpO1xuICAgICAgICBzY29wZUJ0bi5hZGRDbGFzcyhcImlzLWFjdGl2ZVwiKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWFyY2hNb2RlID09PSBcInRhc2tcIikge1xuICAgICAgICB0YXNrQnRuLnNldFRleHQoXCJUQVNLLUFMTFwiKTtcbiAgICAgICAgdGFza0J0bi5hZGRDbGFzcyhcImlzLWFjdGl2ZVwiKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWFyY2hNb2RlID09PSBcInRhc2stdG9kb1wiKSB7XG4gICAgICAgIHRhc2tCdG4uc2V0VGV4dChcIlRBU0stVE9ET1wiKTtcbiAgICAgICAgdGFza0J0bi5hZGRDbGFzcyhcImlzLWFjdGl2ZVwiKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWFyY2hNb2RlID09PSBcInRhc2stZG9uZVwiKSB7XG4gICAgICAgIHRhc2tCdG4uc2V0VGV4dChcIlRBU0stRE9ORVwiKTtcbiAgICAgICAgdGFza0J0bi5hZGRDbGFzcyhcImlzLWFjdGl2ZVwiKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKFtcIm5vdGVcIiwgXCJsaW5lXCJdLmluY2x1ZGVzKHRoaXMuc2VhcmNoTW9kZSkpIHtcbiAgICAgICAgaWYgKCFbXCJUQVNLLUFMTFwiLCBcIlRBU0stVE9ET1wiLCBcIlRBU0stRE9ORVwiXS5pbmNsdWRlcyh0YXNrQnRuLmlubmVyVGV4dCkpIHtcbiAgICAgICAgICB0YXNrQnRuLnNldFRleHQoXCJUQVNLLUFMTFwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFbXCJOT1RFXCIsIFwiTElORVwiXS5pbmNsdWRlcyhzY29wZUJ0bi5pbm5lclRleHQpKSB7XG4gICAgICAgICAgc2NvcGVCdG4uc2V0VGV4dChcIk5PVEVcIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy51cGRhdGVTZWFyY2goKTsgXG4gICAgICBpZiAodGhpcy50YWdDb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJUYWdzKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIEV2ZW50IExpc3RlbmVycyB0aGF0IGNhbGwgdXBkYXRlTW9kZVVJXG4gICAgc29ydEJ5QVouYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY3VycmVudFNvcnQgPSBcImF6XCI7XG4gICAgICB1cGRhdGVNb2RlVUkoKTtcbiAgICB9KTtcblxuICAgIHNvcnRCeUNvdW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmN1cnJlbnRTb3J0ID0gXCJjb3VudFwiO1xuICAgICAgdXBkYXRlTW9kZVVJKCk7XG4gICAgfSk7XG5cbiAgICBzY29wZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgaWYgKFtcIm5vdGVcIiwgXCJsaW5lXCJdLmluY2x1ZGVzKHRoaXMuc2VhcmNoTW9kZSkpIHtcbiAgICAgICAgdGhpcy5zZWFyY2hNb2RlID0gdGhpcy5zZWFyY2hNb2RlID09PSBcIm5vdGVcIiA/IFwibGluZVwiIDogXCJub3RlXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNlYXJjaE1vZGUgPSBzY29wZUJ0bi5pbm5lclRleHQgPT09IFwiTElORVwiID8gXCJsaW5lXCIgOiBcIm5vdGVcIjtcbiAgICAgIH1cbiAgICAgIHVwZGF0ZU1vZGVVSSgpO1xuICAgIH0pO1xuICAgIFxuICAgIHRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGlmIChbXCJ0YXNrXCIsIFwidGFzay10b2RvXCIsIFwidGFzay1kb25lXCJdLmluY2x1ZGVzKHRoaXMuc2VhcmNoTW9kZSkpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VhcmNoTW9kZSA9PT0gXCJ0YXNrXCIpIHRoaXMuc2VhcmNoTW9kZSA9IFwidGFzay10b2RvXCI7XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc2VhcmNoTW9kZSA9PT0gXCJ0YXNrLXRvZG9cIikgdGhpcy5zZWFyY2hNb2RlID0gXCJ0YXNrLWRvbmVcIjtcbiAgICAgICAgZWxzZSB0aGlzLnNlYXJjaE1vZGUgPSBcInRhc2tcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0YXNrQnRuLmlubmVyVGV4dCA9PT0gXCJUQVNLLVRPRE9cIikgdGhpcy5zZWFyY2hNb2RlID0gXCJ0YXNrLXRvZG9cIjtcbiAgICAgICAgZWxzZSBpZiAodGFza0J0bi5pbm5lclRleHQgPT09IFwiVEFTSy1ET05FXCIpIHRoaXMuc2VhcmNoTW9kZSA9IFwidGFzay1kb25lXCI7XG4gICAgICAgIGVsc2UgdGhpcy5zZWFyY2hNb2RlID0gXCJ0YXNrXCI7XG4gICAgICB9XG4gICAgICB1cGRhdGVNb2RlVUkoKTtcbiAgICB9KTtcblxuICAgIC8vIEluaXRpYWxpemUgVUkgc3RhdGVzXG4gICAgdXBkYXRlTW9kZVVJKCk7XG4gIFxuICAgIGNvbnN0IHNlYXJjaFNlY3Rpb24gPSB0aGlzLnNvcnRDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcImZsYXQtdGFnLXNlYXJjaC1zZWN0aW9uXCIgfSk7XG4gICAgXG4gICAgY29uc3Qgc2VhcmNoQm94ID0gc2VhcmNoU2VjdGlvbi5jcmVhdGVFbChcImlucHV0XCIsIHtcbiAgICAgIGNsczogXCJmbGF0LXRhZy1zZWFyY2gtaW5wdXRcIixcbiAgICAgIGF0dHI6IHsgXG4gICAgICAgIHR5cGU6IFwidGV4dFwiLCBcbiAgICAgICAgcGxhY2Vob2xkZXI6IFwiU2VhcmNoIHRhZ3MuLi5cIixcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBjbGVhclNlYXJjaEJ1dHRvbiA9IHNlYXJjaFNlY3Rpb24uY3JlYXRlRGl2KHsgXG4gICAgICBjbHM6IFwiZmxhdC10YWctc2VhcmNoLWNsZWFyLWJ1dHRvblwiLFxuICAgICAgdGl0bGU6IFwiQ2xlYXIgc2VhcmNoXCIgXG4gICAgfSk7XG4gICAgc2V0SWNvbihjbGVhclNlYXJjaEJ1dHRvbiwgXCJzcXVhcmUteFwiKTtcbiAgICBjbGVhclNlYXJjaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jbGVhclNlYXJjaEJveCgpO1xuICAgIH0pO1xuICAgIFxuICAgIHNlYXJjaEJveC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICB0aGlzLnRhZ1NlYXJjaFRleHQgPSB0YXJnZXQudmFsdWU7XG4gICAgICB0aGlzLnJlbmRlclRhZ3MoKTtcbiAgICB9KTtcbiAgICBcbiAgICB0aGlzLnRhZ0NvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJmbGF0LXRhZy1saXN0XCIgfSk7XG4gIFxuICAgIGF3YWl0IHRoaXMubG9hZFRhZ3MoKTtcbiAgXG4gICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5vbihcImNoYW5nZWRcIiwgKGZpbGU6IFRGaWxlKSA9PiB7XG4gICAgICAgIHRoaXMudXBkYXRlRmlsZVRhZ3MoZmlsZSk7XG4gICAgICB9KVxuICAgICk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICB0aGlzLmFwcC52YXVsdC5vbihcImRlbGV0ZVwiLCAoZmlsZSkgPT4ge1xuICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcbiAgICAgICAgICB0aGlzLnJlbW92ZUZpbGVUYWdzKGZpbGUucGF0aCk7XG4gICAgICAgICAgdGhpcy5yZW5kZXJUYWdzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgKTtcbiAgICBcbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICB0aGlzLmFwcC52YXVsdC5vbihcInJlbmFtZVwiLCAoZmlsZSwgb2xkUGF0aCkgPT4ge1xuICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcbiAgICAgICAgICBjb25zdCB0YWdzID0gdGhpcy50YWdzQnlGaWxlLmdldChvbGRQYXRoKTtcbiAgICAgICAgICBpZiAodGFncykge1xuICAgICAgICAgICAgdGhpcy50YWdzQnlGaWxlLnNldChmaWxlLnBhdGgsIHRhZ3MpO1xuICAgICAgICAgICAgdGhpcy50YWdzQnlGaWxlLmRlbGV0ZShvbGRQYXRoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgKTtcblxuICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImZsYXQtdGFnLXZpZXc6c2V0dGluZ3MtdXBkYXRlZFwiIGFzIGFueSwgKCkgPT4ge1xuICAgICAgICB0aGlzLnJlbmRlclRhZ3MoKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIGxvYWRUYWdzKCkge1xuICAgIHRoaXMuYWxsVGFncy5jbGVhcigpO1xuICAgIHRoaXMudGFnc0J5RmlsZS5jbGVhcigpO1xuICAgIFxuICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIFxuICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgY29uc3QgZmlsZVRhZ3MgPSB0aGlzLmdldEZpbGVUYWdzKGZpbGUpO1xuICAgICAgdGhpcy50YWdzQnlGaWxlLnNldChmaWxlLnBhdGgsIG5ldyBTZXQoZmlsZVRhZ3MpKTtcbiAgICAgIGZpbGVUYWdzLmZvckVhY2godGFnID0+IHtcbiAgICAgICAgdGhpcy5hbGxUYWdzLnNldCh0YWcsICh0aGlzLmFsbFRhZ3MuZ2V0KHRhZykgfHwgMCkgKyAxKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnJlbmRlclRhZ3MoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlRmlsZVRhZ3MoZmlsZTogVEZpbGUpIHtcbiAgICBjb25zdCBvbGRUYWdzID0gdGhpcy50YWdzQnlGaWxlLmdldChmaWxlLnBhdGgpIHx8IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGNvbnN0IG5ld1RhZ3NBcnIgPSB0aGlzLmdldEZpbGVUYWdzKGZpbGUpO1xuICAgIGNvbnN0IG5ld1RhZ3MgPSBuZXcgU2V0KG5ld1RhZ3NBcnIpO1xuICAgIFxuICAgIGxldCBoYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgXG4gICAgb2xkVGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICBpZiAoIW5ld1RhZ3MuaGFzKHRhZykpIHtcbiAgICAgICAgaGFzQ2hhbmdlcyA9IHRydWU7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gKHRoaXMuYWxsVGFncy5nZXQodGFnKSB8fCAwKSAtIDE7XG4gICAgICAgIGlmIChjb3VudCA8PSAwKSB0aGlzLmFsbFRhZ3MuZGVsZXRlKHRhZyk7XG4gICAgICAgIGVsc2UgdGhpcy5hbGxUYWdzLnNldCh0YWcsIGNvdW50KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBuZXdUYWdzLmZvckVhY2godGFnID0+IHtcbiAgICAgIGlmICghb2xkVGFncy5oYXModGFnKSkge1xuICAgICAgICBoYXNDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5hbGxUYWdzLnNldCh0YWcsICh0aGlzLmFsbFRhZ3MuZ2V0KHRhZykgfHwgMCkgKyAxKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBpZiAoaGFzQ2hhbmdlcykge1xuICAgICAgdGhpcy50YWdzQnlGaWxlLnNldChmaWxlLnBhdGgsIG5ld1RhZ3MpO1xuICAgICAgdGhpcy5yZW5kZXJUYWdzKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW1vdmVGaWxlVGFncyhmaWxlUGF0aDogc3RyaW5nKSB7XG4gICAgY29uc3Qgb2xkVGFncyA9IHRoaXMudGFnc0J5RmlsZS5nZXQoZmlsZVBhdGgpO1xuICAgIGlmICghb2xkVGFncykgcmV0dXJuO1xuICAgIFxuICAgIG9sZFRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgY29uc3QgY291bnQgPSAodGhpcy5hbGxUYWdzLmdldCh0YWcpIHx8IDApIC0gMTtcbiAgICAgIGlmIChjb3VudCA8PSAwKSB0aGlzLmFsbFRhZ3MuZGVsZXRlKHRhZyk7XG4gICAgICBlbHNlIHRoaXMuYWxsVGFncy5zZXQodGFnLCBjb3VudCk7XG4gICAgfSk7XG4gICAgXG4gICAgdGhpcy50YWdzQnlGaWxlLmRlbGV0ZShmaWxlUGF0aCk7XG4gIH1cblxuICBhc3luYyByZW5kZXJUYWdzKCkge1xuICAgIHRoaXMudGFnQ29udGFpbmVyLmVtcHR5KCk7XG4gICAgXG4gICAgLy8gVmlzdWFsbHkgdXBkYXRlIHNvcnQgYnV0dG9ucyBpZiB0b2dnbGVTb3J0KCkgd2FzIGNhbGxlZCBieSBob3RrZXlcbiAgICBpZiAodGhpcy5zb3J0Q29udGFpbmVyKSB7XG4gICAgICBjb25zdCBzb3J0QXpCdG4gPSB0aGlzLnNvcnRDb250YWluZXIucXVlcnlTZWxlY3RvcignLmZsYXQtdGFnLXNvcnQtYnV0dG9uW3RpdGxlPVwiU29ydCBBLVpcIl0nKTtcbiAgICAgIGNvbnN0IHNvcnRDb3VudEJ0biA9IHRoaXMuc29ydENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmxhdC10YWctc29ydC1idXR0b25bdGl0bGU9XCJTb3J0IGJ5IHVzYWdlXCJdJyk7XG4gICAgICBpZiAoc29ydEF6QnRuICYmIHNvcnRDb3VudEJ0bikge1xuICAgICAgICBzb3J0QXpCdG4ucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgICBzb3J0Q291bnRCdG4ucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50U29ydCA9PT0gJ2F6Jykgc29ydEF6QnRuLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgZWxzZSBzb3J0Q291bnRCdG4uYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBjb25zdCBmaWx0ZXJlZFRhZ3MgPSBhd2FpdCB0aGlzLmdldEZpbHRlcmVkVGFnc0FzeW5jKCk7XG4gICAgXG4gICAgY29uc3QgcGlubmVkVGFncyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gICAgY29uc3Qgbm9ybWFsVGFncyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gICAgY29uc3Qgc2FmZVBpbm5lZExpc3QgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncz8ucGlubmVkVGFncyB8fCBbXTtcbiAgICBjb25zdCBwaW5uZWRTZXQgPSBuZXcgU2V0KHNhZmVQaW5uZWRMaXN0KTtcbiAgICBcbiAgICBmaWx0ZXJlZFRhZ3MuZm9yRWFjaCgoY291bnQsIHRhZykgPT4ge1xuICAgICAgaWYgKHBpbm5lZFNldC5oYXModGFnKSkge1xuICAgICAgICBwaW5uZWRUYWdzLnNldCh0YWcsIGNvdW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vcm1hbFRhZ3Muc2V0KHRhZywgY291bnQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHBpbm5lZFRhZ3Muc2l6ZSA+IDApIHtcbiAgICAgIGNvbnN0IHBpbkNvbnRhaW5lciA9IHRoaXMudGFnQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJmbGF0LXRhZy1waW5uZWQtc2VjdGlvblwiIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBwaW5uZWRJY29uID0gcGluQ29udGFpbmVyLmNyZWF0ZVNwYW4oeyBjbHM6IFwiZmxhdC10YWctbGV0dGVyXCIgfSk7XG4gICAgICBzZXRJY29uKHBpbm5lZEljb24sIFwicGluXCIpO1xuICAgICAgXG4gICAgICBjb25zdCBwaW5uZWRTb3J0ZWQgPSBBcnJheS5mcm9tKHBpbm5lZFRhZ3MuZW50cmllcygpKS5zb3J0KChhLCBiKSA9PiBhWzBdLmxvY2FsZUNvbXBhcmUoYlswXSwgJ3BsJykpO1xuICAgICAgcGlubmVkU29ydGVkLmZvckVhY2goKFt0YWcsIGNvdW50XSkgPT4ge1xuICAgICAgICB0aGlzLmNyZWF0ZVRhZ0VsZW1lbnQodGFnLCBjb3VudCwgcGluQ29udGFpbmVyKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICB0aGlzLnRhZ0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwiZmxhdC10YWctc2VwYXJhdG9yXCIgfSk7XG4gICAgfVxuXG4gICAgbGV0IHNvcnRlZFRhZ3M6IFtzdHJpbmcsIG51bWJlcl1bXTtcbiAgICBcbiAgICBpZiAodGhpcy5jdXJyZW50U29ydCA9PT0gXCJhelwiKSB7XG4gICAgICBzb3J0ZWRUYWdzID0gQXJyYXkuZnJvbShub3JtYWxUYWdzLmVudHJpZXMoKSkuc29ydCgoYSwgYikgPT4gYVswXS5sb2NhbGVDb21wYXJlKGJbMF0sICdwbCcpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc29ydGVkVGFncyA9IEFycmF5LmZyb20obm9ybWFsVGFncy5lbnRyaWVzKCkpLnNvcnQoKGEsIGIpID0+IGJbMV0gLSBhWzFdKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuY3VycmVudFNvcnQgPT09IFwiYXpcIikge1xuICAgICAgY29uc3QgdGFnc0J5TGV0dGVyID0gbmV3IE1hcDxzdHJpbmcsIEFycmF5PFtzdHJpbmcsIG51bWJlcl0+PigpO1xuICAgICAgdGFnc0J5TGV0dGVyLnNldChcIm90aGVyXCIsIFtdKTtcbiAgICAgIFxuICAgICAgZm9yIChsZXQgY2hhckNvZGUgPSA2NTsgY2hhckNvZGUgPD0gOTA7IGNoYXJDb2RlKyspIHtcbiAgICAgICAgdGFnc0J5TGV0dGVyLnNldChTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXJDb2RlKSwgW10pO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBwb2xpc2hEaWFjcml0aWNzID0gWydcdTAxMDQnLCAnXHUwMTA2JywgJ1x1MDExOCcsICdcdTAxNDEnLCAnXHUwMTQzJywgJ1x1MDBEMycsICdcdTAxNUEnLCAnXHUwMTc5JywgJ1x1MDE3QiddO1xuICAgICAgcG9saXNoRGlhY3JpdGljcy5mb3JFYWNoKGxldHRlciA9PiB0YWdzQnlMZXR0ZXIuc2V0KGxldHRlciwgW10pKTtcbiAgICAgIFxuICAgICAgc29ydGVkVGFncy5mb3JFYWNoKHRhZ0l0ZW0gPT4ge1xuICAgICAgICBjb25zdCBbdGFnXSA9IHRhZ0l0ZW07XG4gICAgICAgIGNvbnN0IGZpcnN0Q2hhciA9IHRhZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChmaXJzdENoYXIubWF0Y2goL1tBLVpdLykpIHtcbiAgICAgICAgICB0YWdzQnlMZXR0ZXIuZ2V0KGZpcnN0Q2hhcik/LnB1c2godGFnSXRlbSk7XG4gICAgICAgIH0gZWxzZSBpZiAocG9saXNoRGlhY3JpdGljcy5pbmNsdWRlcyhmaXJzdENoYXIpKSB7XG4gICAgICAgICAgdGFnc0J5TGV0dGVyLmdldChmaXJzdENoYXIpPy5wdXNoKHRhZ0l0ZW0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRhZ3NCeUxldHRlci5nZXQoXCJvdGhlclwiKT8ucHVzaCh0YWdJdGVtKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHRhZ3NCeUxldHRlci5mb3JFYWNoKChsZXR0ZXJUYWdzLCBsZXR0ZXIpID0+IHtcbiAgICAgICAgaWYgKGxldHRlclRhZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGlmIChsZXR0ZXIgIT09IFwib3RoZXJcIikge1xuICAgICAgICAgICAgY29uc3QgbGV0dGVyRWwgPSB0aGlzLnRhZ0NvbnRhaW5lci5jcmVhdGVTcGFuKHsgY2xzOiBcImZsYXQtdGFnLWxldHRlclwiIH0pO1xuICAgICAgICAgICAgbGV0dGVyRWwuc2V0VGV4dChsZXR0ZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBsZXR0ZXJUYWdzLmZvckVhY2goKFt0YWcsIGNvdW50XSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVUYWdFbGVtZW50KHRhZywgY291bnQsIHRoaXMudGFnQ29udGFpbmVyKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNvcnRlZFRhZ3MuZm9yRWFjaCgoW3RhZywgY291bnRdKSA9PiB7XG4gICAgICAgIHRoaXMuY3JlYXRlVGFnRWxlbWVudCh0YWcsIGNvdW50LCB0aGlzLnRhZ0NvbnRhaW5lcik7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVRhZ0VsZW1lbnQodGFnOiBzdHJpbmcsIGNvdW50OiBudW1iZXIsIHBhcmVudEVsOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IHRhZ0VsID0gcGFyZW50RWwuY3JlYXRlU3Bhbih7IGNsczogXCJmbGF0LXRhZ1wiIH0pO1xuICAgIFxuICAgIGlmICh0aGlzLnNlbGVjdGVkVGFncy5oYXModGFnKSkgdGFnRWwuYWRkQ2xhc3MoXCJmbGF0LXRhZy1zZWxlY3RlZFwiKTtcbiAgICBlbHNlIGlmICh0aGlzLmV4Y2x1ZGVkVGFncy5oYXModGFnKSkgdGFnRWwuYWRkQ2xhc3MoXCJmbGF0LXRhZy1leGNsdWRlZFwiKTtcbiAgICBcbiAgICBjb25zdCBzYWZlUGlubmVkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M/LnBpbm5lZFRhZ3MgfHwgW107XG4gICAgaWYgKHNhZmVQaW5uZWQuaW5jbHVkZXModGFnKSkgdGFnRWwuYWRkQ2xhc3MoXCJmbGF0LXRhZy1waW5uZWRcIik7XG4gICAgXG4gICAgdGFnRWwuc2V0VGV4dChgIyR7dGFnfSAoJHtjb3VudH0pYCk7XG5cbiAgICBjb25zdCBoYW5kbGVUYWdJbnRlcmFjdGlvbiA9IGFzeW5jIChpc011bHRpU2VsZWN0OiBib29sZWFuLCBpc0V4Y2x1ZGU6IGJvb2xlYW4sIGlzUGluOiBib29sZWFuKSA9PiB7XG4gICAgICBpZiAoaXNQaW4pIHtcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncykgcmV0dXJuO1xuICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLnBpbm5lZFRhZ3MpIHRoaXMucGx1Z2luLnNldHRpbmdzLnBpbm5lZFRhZ3MgPSBbXTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5waW5uZWRUYWdzLmluY2x1ZGVzKHRhZykpIHtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5waW5uZWRUYWdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucGlubmVkVGFncy5maWx0ZXIodCA9PiB0ICE9PSB0YWcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnBpbm5lZFRhZ3MucHVzaCh0YWcpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICByZXR1cm47IFxuICAgICAgfVxuXG4gICAgICBpZiAoaXNFeGNsdWRlKSB7XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVkVGFncy5oYXModGFnKSkge1xuICAgICAgICAgIHRoaXMuZXhjbHVkZWRUYWdzLmRlbGV0ZSh0YWcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZXhjbHVkZWRUYWdzLmFkZCh0YWcpO1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUYWdzLmRlbGV0ZSh0YWcpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzTXVsdGlTZWxlY3QpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRUYWdzLmhhcyh0YWcpKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFRhZ3MuZGVsZXRlKHRhZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFRhZ3MuYWRkKHRhZyk7XG4gICAgICAgICAgdGhpcy5leGNsdWRlZFRhZ3MuZGVsZXRlKHRhZyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVGFncy5zaXplID09PSAxICYmIHRoaXMuc2VsZWN0ZWRUYWdzLmhhcyh0YWcpKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFRhZ3MuY2xlYXIoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkVGFncy5jbGVhcigpO1xuICAgICAgICAgIHRoaXMuZXhjbHVkZWRUYWdzLmNsZWFyKCk7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFRhZ3MuYWRkKHRhZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhpcy5yZW5kZXJUYWdzKCk7XG4gICAgICB0aGlzLnVwZGF0ZVNlYXJjaCgpO1xuICAgIH07XG5cbiAgICB0YWdFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGhhbmRsZVRhZ0ludGVyYWN0aW9uKGUuY3RybEtleSB8fCBlLm1ldGFLZXksIGUuc2hpZnRLZXksIGUuYWx0S2V5KTtcbiAgICB9KTtcblxuICAgIHRhZ0VsLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIChlKSA9PiB7XG4gICAgICB0aGlzLnRvdWNoVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMudG91Y2hUaW1lciA9IG51bGw7XG4gICAgICAgIGNvbnN0IGlzQ3VycmVudGx5U2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkVGFncy5oYXModGFnKTtcbiAgICAgICAgaGFuZGxlVGFnSW50ZXJhY3Rpb24oIWlzQ3VycmVudGx5U2VsZWN0ZWQsIGlzQ3VycmVudGx5U2VsZWN0ZWQsIGZhbHNlKTtcbiAgICAgIH0sIDUwMCk7IFxuICAgIH0sIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcblxuICAgIHRhZ0VsLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCAoZSkgPT4ge1xuICAgICAgaWYgKHRoaXMudG91Y2hUaW1lcikge1xuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMudG91Y2hUaW1lcik7XG4gICAgICAgIHRoaXMudG91Y2hUaW1lciA9IG51bGw7XG4gICAgICAgIGhhbmRsZVRhZ0ludGVyYWN0aW9uKGZhbHNlLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyBcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICB0YWdFbC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLnRvdWNoVGltZXIpIHtcbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRvdWNoVGltZXIpO1xuICAgICAgICB0aGlzLnRvdWNoVGltZXIgPSBudWxsO1xuICAgICAgfVxuICAgIH0sIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0RmlsdGVyZWRUYWdzQXN5bmMoKTogUHJvbWlzZTxNYXA8c3RyaW5nLCBudW1iZXI+PiB7XG4gICAgbGV0IGZpbHRlcmVkVGFncyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gICAgXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRUYWdzLnNpemUgPT09IDApIHtcbiAgICAgIGZpbHRlcmVkVGFncyA9IG5ldyBNYXAodGhpcy5hbGxUYWdzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc2VsZWN0ZWRUYWdzQXJyYXkgPSBBcnJheS5mcm9tKHRoaXMuc2VsZWN0ZWRUYWdzKTtcbiAgICAgIGNvbnN0IG1hdGNoaW5nRmlsZXM6IHN0cmluZ1tdID0gW107XG4gICAgICBcbiAgICAgIHRoaXMudGFnc0J5RmlsZS5mb3JFYWNoKCh0YWdzLCBmaWxlUGF0aCkgPT4ge1xuICAgICAgICBpZiAoc2VsZWN0ZWRUYWdzQXJyYXkuZXZlcnkodGFnID0+IHRhZ3MuaGFzKHRhZykpKSB7XG4gICAgICAgICAgbWF0Y2hpbmdGaWxlcy5wdXNoKGZpbGVQYXRoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmICh0aGlzLnNlYXJjaE1vZGUgPT09IFwibm90ZVwiKSB7XG4gICAgICAgIG1hdGNoaW5nRmlsZXMuZm9yRWFjaChmaWxlUGF0aCA9PiB7XG4gICAgICAgICAgY29uc3QgZmlsZVRhZ3MgPSB0aGlzLnRhZ3NCeUZpbGUuZ2V0KGZpbGVQYXRoKTtcbiAgICAgICAgICBpZiAoZmlsZVRhZ3MpIHtcbiAgICAgICAgICAgIGZpbGVUYWdzLmZvckVhY2godGFnID0+IHtcbiAgICAgICAgICAgICAgZmlsdGVyZWRUYWdzLnNldCh0YWcsIChmaWx0ZXJlZFRhZ3MuZ2V0KHRhZykgfHwgMCkgKyAxKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGNvbnN0IGZpbGVQYXRoIG9mIG1hdGNoaW5nRmlsZXMpIHtcbiAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlKTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgICAgICAgICAgICBjb25zdCBsb3dlckxpbmUgPSBsaW5lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgIGlmICh0aGlzLnNlYXJjaE1vZGUgPT09IFwidGFza1wiICYmICFsb3dlckxpbmUuaW5jbHVkZXMoXCItIFtcIikpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hNb2RlID09PSBcInRhc2stdG9kb1wiICYmICFsb3dlckxpbmUuaW5jbHVkZXMoXCItIFsgXVwiKSkgY29udGludWU7XG4gICAgICAgICAgICAgIGlmICh0aGlzLnNlYXJjaE1vZGUgPT09IFwidGFzay1kb25lXCIgJiYgIWxvd2VyTGluZS5pbmNsdWRlcyhcIi0gW3hdXCIpKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGNvbnN0IGxpbmVUYWdzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgICAgICAgICAgIGNvbnN0IHRhZ1JlZ2V4ID0gLyMoW15cXHMjXSspL2c7XG4gICAgICAgICAgICAgIGxldCBtYXRjaDtcbiAgICAgICAgICAgICAgd2hpbGUgKChtYXRjaCA9IHRhZ1JlZ2V4LmV4ZWMobGluZSkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbGluZVRhZ3MuYWRkKG1hdGNoWzFdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkVGFnc0FycmF5LmV2ZXJ5KHNlbGVjdGVkVGFnID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShsaW5lVGFncykuc29tZSh0ID0+IHQudG9Mb3dlckNhc2UoKSA9PT0gc2VsZWN0ZWRUYWcudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICAgICAgbGluZVRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICAgICAgICAgICAgZmlsdGVyZWRUYWdzLnNldCh0YWcsIChmaWx0ZXJlZFRhZ3MuZ2V0KHRhZykgfHwgMCkgKyAxKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBzZWxlY3RlZFRhZ3NBcnJheS5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgIGlmICghZmlsdGVyZWRUYWdzLmhhcyh0YWcpKSB7XG4gICAgICAgICAgZmlsdGVyZWRUYWdzLnNldCh0YWcsIHRoaXMuYWxsVGFncy5nZXQodGFnKSB8fCAwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGN1dG9mZiA9IHRoaXMucGx1Z2luLnNldHRpbmdzPy5mcmVxdWVuY3lDdXRvZmYgfHwgMDtcbiAgICBjb25zdCBzYWZlUGlubmVkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M/LnBpbm5lZFRhZ3MgfHwgW107XG4gICAgXG4gICAgaWYgKGN1dG9mZiA+IDApIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gICAgICBmaWx0ZXJlZFRhZ3MuZm9yRWFjaCgoY291bnQsIHRhZykgPT4ge1xuICAgICAgICBpZiAoY291bnQgPj0gY3V0b2ZmIHx8IHRoaXMuc2VsZWN0ZWRUYWdzLmhhcyh0YWcpIHx8IHNhZmVQaW5uZWQuaW5jbHVkZXModGFnKSkge1xuICAgICAgICAgIHJlc3VsdC5zZXQodGFnLCBjb3VudCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgZmlsdGVyZWRUYWdzID0gcmVzdWx0O1xuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy50YWdTZWFyY2hUZXh0KSB7XG4gICAgICBjb25zdCBzZWFyY2hUZXh0ID0gdGhpcy50YWdTZWFyY2hUZXh0LnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCByZXN1bHQgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuICAgICAgXG4gICAgICBmaWx0ZXJlZFRhZ3MuZm9yRWFjaCgoY291bnQsIHRhZykgPT4ge1xuICAgICAgICBpZiAodGFnLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVGV4dCkgfHwgdGhpcy5zZWxlY3RlZFRhZ3MuaGFzKHRhZykgfHwgdGhpcy5leGNsdWRlZFRhZ3MuaGFzKHRhZykpIHtcbiAgICAgICAgICByZXN1bHQuc2V0KHRhZywgY291bnQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmaWx0ZXJlZFRhZ3M7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVNlYXJjaCgpIHtcbiAgICBsZXQgc2VhcmNoTGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXCJzZWFyY2hcIilbMF07XG4gICAgXG4gICAgaWYgKCFzZWFyY2hMZWFmKSB7XG4gICAgICBjb25zdCByaWdodExlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcbiAgICAgIGlmIChyaWdodExlYWYpIHtcbiAgICAgICAgc2VhcmNoTGVhZiA9IHJpZ2h0TGVhZjtcbiAgICAgICAgc2VhcmNoTGVhZi5zZXRWaWV3U3RhdGUoeyB0eXBlOiBcInNlYXJjaFwiIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnNlbGVjdGVkVGFncy5zaXplID09PSAwICYmIHRoaXMuZXhjbHVkZWRUYWdzLnNpemUgPT09IDApIHtcbiAgICAgIGlmIChzZWFyY2hMZWFmKSB7XG4gICAgICAgIGNvbnN0IHNlYXJjaFZpZXcgPSBzZWFyY2hMZWFmLnZpZXcgYXMgYW55O1xuICAgICAgICBpZiAoc2VhcmNoVmlldyAmJiB0eXBlb2Ygc2VhcmNoVmlldy5zZXRRdWVyeSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgc2VhcmNoVmlldy5zZXRRdWVyeShcIlwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBsZXQgdGFnUXVlcnkgPSBcIlwiO1xuICAgIGNvbnN0IHNlbGVjdGVkID0gQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkVGFncyk7XG4gICAgY29uc3QgZXhjbHVkZWQgPSBBcnJheS5mcm9tKHRoaXMuZXhjbHVkZWRUYWdzKTtcblxuICAgIGlmICh0aGlzLnNlYXJjaE1vZGUgPT09IFwibm90ZVwiKSB7XG4gICAgICB0YWdRdWVyeSA9IFtcbiAgICAgICAgLi4uc2VsZWN0ZWQubWFwKHRhZyA9PiBgdGFnOiMke3RhZ31gKSxcbiAgICAgICAgLi4uZXhjbHVkZWQubWFwKHRhZyA9PiBgLXRhZzojJHt0YWd9YClcbiAgICAgIF0uam9pbihcIiBcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBwcmVmaXggPSBcImxpbmU6KFwiO1xuICAgICAgaWYgKHRoaXMuc2VhcmNoTW9kZSA9PT0gXCJ0YXNrXCIpIHByZWZpeCA9IFwidGFzazooXCI7XG4gICAgICBlbHNlIGlmICh0aGlzLnNlYXJjaE1vZGUgPT09IFwidGFzay10b2RvXCIpIHByZWZpeCA9IFwidGFzay10b2RvOihcIjtcbiAgICAgIGVsc2UgaWYgKHRoaXMuc2VhcmNoTW9kZSA9PT0gXCJ0YXNrLWRvbmVcIikgcHJlZml4ID0gXCJ0YXNrLWRvbmU6KFwiO1xuICAgICAgXG4gICAgICBjb25zdCBibG9ja0NvbnRlbnRzID0gW1xuICAgICAgICAuLi5zZWxlY3RlZC5tYXAodGFnID0+IGAjJHt0YWd9YCksXG4gICAgICAgIC4uLmV4Y2x1ZGVkLm1hcCh0YWcgPT4gYC0jJHt0YWd9YClcbiAgICAgIF0uam9pbihcIiBcIik7XG5cbiAgICAgIHRhZ1F1ZXJ5ID0gYCR7cHJlZml4fSAke2Jsb2NrQ29udGVudHN9IClgO1xuICAgIH1cbiAgICBcbiAgICBpZiAoc2VhcmNoTGVhZikge1xuICAgICAgY29uc3Qgc2VhcmNoVmlldyA9IHNlYXJjaExlYWYudmlldyBhcyBhbnk7XG4gICAgICBpZiAoc2VhcmNoVmlldyAmJiB0eXBlb2Ygc2VhcmNoVmlldy5zZXRRdWVyeSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHNlYXJjaFZpZXcuc2V0UXVlcnkodGFnUXVlcnkpO1xuICAgICAgfVxuICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYoc2VhcmNoTGVhZik7XG4gICAgfVxuICB9XG5cbiAgZ2V0RmlsZVRhZ3MoZmlsZTogVEZpbGUpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICBpZiAoIWNhY2hlKSByZXR1cm4gW107XG4gICAgXG4gICAgY29uc3QgdGFncyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIFxuICAgIGlmIChjYWNoZS50YWdzKSB7XG4gICAgICBjYWNoZS50YWdzLmZvckVhY2godGFnT2JqID0+IHtcbiAgICAgICAgY29uc3QgdGFnID0gdGFnT2JqLnRhZy5yZXBsYWNlKC9eIy8sIFwiXCIpO1xuICAgICAgICB0YWdzLmFkZCh0YWcpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGlmIChjYWNoZS5mcm9udG1hdHRlciAmJiBjYWNoZS5mcm9udG1hdHRlci50YWdzKSB7XG4gICAgICBjb25zdCBmbVRhZ3MgPSBjYWNoZS5mcm9udG1hdHRlci50YWdzO1xuICAgICAgaWYgKHR5cGVvZiBmbVRhZ3MgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGZtVGFncy5zcGxpdCgvW1xccyxdKy8pLmZpbHRlcihCb29sZWFuKS5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgICAgdGFncy5hZGQodGFnKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZm1UYWdzKSkge1xuICAgICAgICBmbVRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICAgIGlmICh0YWcpIHRhZ3MuYWRkKFN0cmluZyh0YWcpKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBBcnJheS5mcm9tKHRhZ3MpO1xuICB9XG5cbiAgcHVibGljIHRvZ2dsZVNvcnQoKSB7XG4gICAgdGhpcy5jdXJyZW50U29ydCA9IHRoaXMuY3VycmVudFNvcnQgPT09IFwiYXpcIiA/IFwiY291bnRcIiA6IFwiYXpcIjtcbiAgICB0aGlzLnJlbmRlclRhZ3MoKTtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhclRhZ1NlbGVjdGlvbnMoKSB7XG4gICAgdGhpcy5zZWxlY3RlZFRhZ3MuY2xlYXIoKTtcbiAgICB0aGlzLmV4Y2x1ZGVkVGFncy5jbGVhcigpO1xuICAgIHRoaXMucmVuZGVyVGFncygpO1xuICAgIHRoaXMudXBkYXRlU2VhcmNoKCk7XG4gIH1cblxuICBwdWJsaWMgY2xlYXJTZWFyY2hCb3goKSB7XG4gICAgY29uc3Qgc2VhcmNoQm94ID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLmZsYXQtdGFnLXNlYXJjaC1pbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgaWYgKHNlYXJjaEJveCkge1xuICAgICAgc2VhcmNoQm94LnZhbHVlID0gXCJcIjtcbiAgICAgIHRoaXMudGFnU2VhcmNoVGV4dCA9IFwiXCI7XG4gICAgICB0aGlzLnJlbmRlclRhZ3MoKTtcbiAgICB9XG4gIH1cbn1cbiIsICJleHBvcnQgY29uc3QgVklFV19UWVBFID0gXCJmbGF0LXRhZy12aWV3XCI7XG5cbiIsICJleHBvcnQgY29uc3QgZ2V0U3R5bGVzID0gKCk6IHN0cmluZyA9PiB7XG4gIHJldHVybiBgXG4gICAgLndvcmtzcGFjZS1zcGxpdC5tb2Qtcm9vdCAudmlldy1jb250ZW50LmZsYXQtdGFnLXZpZXcge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG4gICAgICBhbGlnbi1pdGVtczogc3RyZXRjaDtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIHBhZGRpbmc6IDA7XG4gICAgICBtYXJnaW46IDA7XG4gICAgfVxuXG4gICAgLmZsYXQtdGFnLWNvbnRhaW5lciB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xuICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgcGFkZGluZzogMDtcbiAgICAgIG1hcmdpbjogMDtcbiAgICB9XG5cbiAgICAuZmxhdC10YWctc29ydC1jb250YWluZXIge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBmbGV4LXNocmluazogMDtcbiAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBmbGV4LXdyYXA6IHdyYXA7IC8qIEFsbG93cyBzZWFyY2hpbmcgdG8gd3JhcCBuaWNlbHkgb24gbmFycm93IHBhbmVzICovXG4gICAgICBnYXA6IDhweDtcbiAgICB9XG4gICAgXG4gICAgLmZsYXQtdGFnLWJ1dHRvbnMtc2VjdGlvbiB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZ2FwOiA2cHg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgIH1cbiAgICBcbiAgICAvKiBCYXNlIHN0eWxpbmcgZm9yIG91ciBOb3RlL0xpbmUgYW5kIFRhc2sgdG9nZ2xlIGJ1dHRvbnMgKi9cbiAgICAuZmxhdC10YWctbW9kZS1idXR0b24ge1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgcGFkZGluZzogNHB4IDEwcHg7XG4gICAgICBmb250LXNpemU6IDAuOGVtO1xuICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1zKTtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItZm9ybS1maWVsZCk7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICB0cmFuc2l0aW9uOiBhbGwgMC4xNXMgZWFzZS1pbi1vdXQ7XG4gICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICBtaW4td2lkdGg6IDY1cHg7XG4gICAgfVxuXG4gICAgLyogSG92ZXIgZWZmZWN0IGZvciBpbmFjdGl2ZSBzdGF0ZSAqL1xuICAgIC5mbGF0LXRhZy1tb2RlLWJ1dHRvbjpob3ZlciB7XG4gICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICBib3JkZXItY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyLWhvdmVyKTtcbiAgICB9XG5cbiAgICAvKiBIaWdobHkgdmlzaWJsZSBhY3RpdmUgKHByZXNzZWQpIHN0YXRlICovXG4gICAgLmZsYXQtdGFnLW1vZGUtYnV0dG9uLmlzLWFjdGl2ZSB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDNweCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAgfVxuXG4gICAgLyogSG92ZXIgZWZmZWN0IHdoZW4gYWN0aXZlICovXG4gICAgLmZsYXQtdGFnLW1vZGUtYnV0dG9uLmlzLWFjdGl2ZTpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQtaG92ZXIpO1xuICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQtaG92ZXIpO1xuICAgIH1cbiAgICBcbiAgICAuZmxhdC10YWctc2VhcmNoLXNlY3Rpb24ge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBnYXA6IDRweDtcbiAgICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgcGFkZGluZzogMnB4IDhweDtcbiAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICAgIG1heC13aWR0aDogMjAwcHg7XG4gICAgfVxuICAgIFxuICAgIC5mbGF0LXRhZy1zZWFyY2gtaW5wdXQge1xuICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICBib3JkZXI6IG5vbmU7XG4gICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBoZWlnaHQ6IDI0cHg7XG4gICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgIH1cbiAgICBcbiAgICAuZmxhdC10YWctc2VhcmNoLWlucHV0OmZvY3VzIHtcbiAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICBib3gtc2hhZG93OiBub25lO1xuICAgIH1cbiAgICBcbiAgICAuZmxhdC10YWctc2VhcmNoLWljb24ge1xuICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICB9XG5cbiAgICAuZmxhdC10YWctc2VhcmNoLWNsZWFyLWJ1dHRvbiB7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgZm9udC1zaXplOiAwLjhlbTtcbiAgICB9XG5cbiAgICAuZmxhdC10YWctc2VhcmNoLWNsZWFyLWJ1dHRvbjpob3ZlciB7XG4gICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgIH1cblxuICAgIC5mbGF0LXRhZy1zb3J0LWJ1dHRvbiwgLmZsYXQtdGFnLWNsZWFyLWJ1dHRvbiB7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBwYWRkaW5nOiA0cHg7XG4gICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIH1cblxuICAgIC5mbGF0LXRhZy1zb3J0LWJ1dHRvbjpob3ZlciwgLmZsYXQtdGFnLWNsZWFyLWJ1dHRvbjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1ob3Zlcik7XG4gICAgfVxuXG4gICAgLmZsYXQtdGFnLXNvcnQtYnV0dG9uLmlzLWFjdGl2ZSB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDNweCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAgfVxuXG4gICAgLmZsYXQtdGFnLXNvcnQtYnV0dG9uLmlzLWFjdGl2ZTpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQtaG92ZXIpO1xuICAgIH1cblxuICAgIC5mbGF0LXRhZy1saXN0IHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICBhbGlnbi1jb250ZW50OiBmbGV4LXN0YXJ0O1xuICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgIGZsZXg6IDE7XG4gICAgICBsaW5lLWhlaWdodDogMS41ZW07XG4gICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICB9XG5cbiAgICAuZmxhdC10YWcge1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgcGFkZGluZzogMnB4IDZweDtcbiAgICAgIG1hcmdpbjogMnB4O1xuICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGFnLWJhY2tncm91bmQpO1xuICAgICAgY29sb3I6IHZhcigtLXRhZy1jb2xvcik7XG4gICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMXM7XG4gICAgfVxuXG4gICAgLmZsYXQtdGFnOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRhZy1iYWNrZ3JvdW5kLWhvdmVyKTtcbiAgICB9XG5cbiAgICAuZmxhdC10YWctc2VsZWN0ZWQge1xuICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICB9XG5cbiAgICAuZmxhdC10YWctZXhjbHVkZWQge1xuICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICB9XG4gICAgXG4gICAgLmZsYXQtdGFnLWxldHRlciB7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgZm9udC1zaXplOiAxLjJlbTtcbiAgICAgIG1hcmdpbjogMnB4O1xuICAgICAgcGFkZGluZzogMnB4IDZweDtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICBtaW4td2lkdGg6IDI0cHg7XG4gICAgfVxuICAgICAgICAuZmxhdC10YWctcGlubmVkLXNlY3Rpb24ge1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5LWFsdCk7XG4gICAgICBwYWRkaW5nOiA0cHg7XG4gICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtcyk7XG4gICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgfVxuXG4gICAgLmZsYXQtdGFnLXNlcGFyYXRvciB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGhlaWdodDogMXB4O1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgbWFyZ2luOiA0cHggMCA4cHggMDtcbiAgICB9XG4gICAgXG4gICAgLmZsYXQtdGFnLXBpbm5lZCB7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgIH1cblxuICBgO1xufTtcbiIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBGbGF0VGFnUGx1Z2luIGZyb20gXCIuL21haW5cIjtcblxuZXhwb3J0IGludGVyZmFjZSBGbGF0VGFnUGx1Z2luU2V0dGluZ3Mge1xuICBwaW5uZWRUYWdzOiBzdHJpbmdbXTtcbiAgZnJlcXVlbmN5Q3V0b2ZmOiBudW1iZXI7XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBGbGF0VGFnUGx1Z2luU2V0dGluZ3MgPSB7XG4gIHBpbm5lZFRhZ3M6IFtdLFxuICBmcmVxdWVuY3lDdXRvZmY6IDAsIC8vIDAgbWVhbnMgc2hvdyBhbGwgdGFnc1xufTtcblxuZXhwb3J0IGNsYXNzIEZsYXRUYWdTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gIHBsdWdpbjogRmxhdFRhZ1BsdWdpbjtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBGbGF0VGFnUGx1Z2luKSB7XG4gICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiRnJlcXVlbmN5IEN1dG9mZlwiKVxuICAgICAgLnNldERlc2MoXCJIaWRlIHRhZ3MgdGhhdCBhcHBlYXIgZmV3ZXIgdGltZXMgdGhhbiB0aGlzIG51bWJlciBpbiB0aGUgdmF1bHQuIDAgbWVhbnMgc2hvdyBhbGwgdGFncy5cIilcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiMFwiKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mcmVxdWVuY3lDdXRvZmYudG9TdHJpbmcoKSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZWQpICYmIHBhcnNlZCA+PSAwKSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZyZXF1ZW5jeUN1dG9mZiA9IHBhcnNlZDtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiQ2xlYXIgUGlubmVkIFRhZ3NcIilcbiAgICAgIC5zZXREZXNjKFwiUmVtb3ZlcyBhbGwgcGlubmVkIHRhZ3MgZnJvbSB0aGUgdG9wIG9mIHRoZSBmbGF0IHRhZyBsaXN0LlwiKVxuICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICBidG5cbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNsZWFyIFBpbm5lZFwiKVxuICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnBpbm5lZFRhZ3MgPSBbXTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxtQkFBc0M7OztBQ0F0QyxzQkFBd0Q7OztBQ0FqRCxJQUFNLFlBQVk7OztBRElsQixJQUFNLGNBQU4sY0FBMEIseUJBQVM7QUFBQSxFQWdCeEMsWUFBWSxNQUFxQixRQUF1QjtBQUN0RCxVQUFNLElBQUk7QUFYWixTQUFRLGVBQTRCLG9CQUFJLElBQUk7QUFDNUMsU0FBUSxlQUE0QixvQkFBSSxJQUFJO0FBQzVDLFNBQVEsVUFBK0Isb0JBQUksSUFBSTtBQUMvQyxTQUFRLGNBQThCO0FBQ3RDLFNBQVEsYUFBdUMsb0JBQUksSUFBSTtBQUV2RCxTQUFRLGdCQUF3QjtBQUNoQyxTQUFRLGFBQW1FO0FBQzNFLFNBQVEsYUFBNEI7QUFJbEMsU0FBSyxTQUFTO0FBQ2QsU0FBSyxZQUFZLFNBQVMsZUFBZTtBQUFBLEVBQzNDO0FBQUEsRUFFQSxjQUFzQjtBQUNwQixXQUFPO0FBQUEsRUFDVDtBQUFBLEVBRUEsaUJBQXlCO0FBQ3ZCLFdBQU87QUFBQSxFQUNUO0FBQUEsRUFFQSxVQUFrQjtBQUNoQixXQUFPO0FBQUEsRUFDVDtBQUFBLEVBRUEsTUFBTSxTQUFTO0FBQ2IsU0FBSyxZQUFZLEtBQUssVUFBVSxVQUFVLEVBQUUsS0FBSyxxQkFBcUIsQ0FBQztBQUN2RSxTQUFLLGdCQUFnQixLQUFLLFVBQVUsVUFBVSxFQUFFLEtBQUssMEJBQTBCLENBQUM7QUFFaEYsVUFBTSxnQkFBZ0IsS0FBSyxjQUFjLFVBQVUsRUFBRSxLQUFLLDJCQUEyQixDQUFDO0FBRXRGLFVBQU0sV0FBVyxjQUFjLFVBQVUsRUFBRSxLQUFLLHdCQUF3QixPQUFPLFdBQVcsQ0FBQztBQUMzRixpQ0FBUSxVQUFVLGlCQUFpQjtBQUVuQyxVQUFNLGNBQWMsY0FBYyxVQUFVLEVBQUUsS0FBSyx3QkFBd0IsT0FBTyxnQkFBZ0IsQ0FBQztBQUNuRyxpQ0FBUSxhQUFhLG9CQUFvQjtBQUV6QyxVQUFNLGNBQWMsY0FBYyxVQUFVLEVBQUUsS0FBSyx5QkFBeUIsT0FBTyx1QkFBdUIsQ0FBQztBQUMzRyxpQ0FBUSxhQUFhLEdBQUc7QUFDeEIsZ0JBQVksaUJBQWlCLFNBQVMsTUFBTTtBQUMxQyxXQUFLLG1CQUFtQjtBQUFBLElBQzFCLENBQUM7QUFHRCxVQUFNLFdBQVcsY0FBYyxVQUFVO0FBQUEsTUFDdkMsS0FBSztBQUFBLE1BQ0wsTUFBTTtBQUFBLE1BQ04sT0FBTztBQUFBLElBQ1QsQ0FBQztBQUdELFVBQU0sVUFBVSxjQUFjLFVBQVU7QUFBQSxNQUN0QyxLQUFLO0FBQUEsTUFDTCxNQUFNO0FBQUEsTUFDTixPQUFPO0FBQUEsSUFDVCxDQUFDO0FBRUQsVUFBTSxlQUFlLE1BQU07QUFFekIsZUFBUyxZQUFZLFdBQVc7QUFDaEMsa0JBQVksWUFBWSxXQUFXO0FBQ25DLFVBQUksS0FBSyxnQkFBZ0I7QUFBTSxpQkFBUyxTQUFTLFdBQVc7QUFDNUQsVUFBSSxLQUFLLGdCQUFnQjtBQUFTLG9CQUFZLFNBQVMsV0FBVztBQUdsRSxlQUFTLFlBQVksV0FBVztBQUNoQyxjQUFRLFlBQVksV0FBVztBQUUvQixVQUFJLEtBQUssZUFBZSxRQUFRO0FBQzlCLGlCQUFTLFFBQVEsTUFBTTtBQUN2QixpQkFBUyxTQUFTLFdBQVc7QUFBQSxNQUMvQixXQUFXLEtBQUssZUFBZSxRQUFRO0FBQ3JDLGlCQUFTLFFBQVEsTUFBTTtBQUN2QixpQkFBUyxTQUFTLFdBQVc7QUFBQSxNQUMvQixXQUFXLEtBQUssZUFBZSxRQUFRO0FBQ3JDLGdCQUFRLFFBQVEsVUFBVTtBQUMxQixnQkFBUSxTQUFTLFdBQVc7QUFBQSxNQUM5QixXQUFXLEtBQUssZUFBZSxhQUFhO0FBQzFDLGdCQUFRLFFBQVEsV0FBVztBQUMzQixnQkFBUSxTQUFTLFdBQVc7QUFBQSxNQUM5QixXQUFXLEtBQUssZUFBZSxhQUFhO0FBQzFDLGdCQUFRLFFBQVEsV0FBVztBQUMzQixnQkFBUSxTQUFTLFdBQVc7QUFBQSxNQUM5QjtBQUVBLFVBQUksQ0FBQyxRQUFRLE1BQU0sRUFBRSxTQUFTLEtBQUssVUFBVSxHQUFHO0FBQzlDLFlBQUksQ0FBQyxDQUFDLFlBQVksYUFBYSxXQUFXLEVBQUUsU0FBUyxRQUFRLFNBQVMsR0FBRztBQUN2RSxrQkFBUSxRQUFRLFVBQVU7QUFBQSxRQUM1QjtBQUFBLE1BQ0YsT0FBTztBQUNMLFlBQUksQ0FBQyxDQUFDLFFBQVEsTUFBTSxFQUFFLFNBQVMsU0FBUyxTQUFTLEdBQUc7QUFDbEQsbUJBQVMsUUFBUSxNQUFNO0FBQUEsUUFDekI7QUFBQSxNQUNGO0FBRUEsV0FBSyxhQUFhO0FBQ2xCLFVBQUksS0FBSyxjQUFjO0FBQ3JCLGFBQUssV0FBVztBQUFBLE1BQ2xCO0FBQUEsSUFDRjtBQUdBLGFBQVMsaUJBQWlCLFNBQVMsTUFBTTtBQUN2QyxXQUFLLGNBQWM7QUFDbkIsbUJBQWE7QUFBQSxJQUNmLENBQUM7QUFFRCxnQkFBWSxpQkFBaUIsU0FBUyxNQUFNO0FBQzFDLFdBQUssY0FBYztBQUNuQixtQkFBYTtBQUFBLElBQ2YsQ0FBQztBQUVELGFBQVMsaUJBQWlCLFNBQVMsTUFBTTtBQUN2QyxVQUFJLENBQUMsUUFBUSxNQUFNLEVBQUUsU0FBUyxLQUFLLFVBQVUsR0FBRztBQUM5QyxhQUFLLGFBQWEsS0FBSyxlQUFlLFNBQVMsU0FBUztBQUFBLE1BQzFELE9BQU87QUFDTCxhQUFLLGFBQWEsU0FBUyxjQUFjLFNBQVMsU0FBUztBQUFBLE1BQzdEO0FBQ0EsbUJBQWE7QUFBQSxJQUNmLENBQUM7QUFFRCxZQUFRLGlCQUFpQixTQUFTLE1BQU07QUFDdEMsVUFBSSxDQUFDLFFBQVEsYUFBYSxXQUFXLEVBQUUsU0FBUyxLQUFLLFVBQVUsR0FBRztBQUNoRSxZQUFJLEtBQUssZUFBZTtBQUFRLGVBQUssYUFBYTtBQUFBLGlCQUN6QyxLQUFLLGVBQWU7QUFBYSxlQUFLLGFBQWE7QUFBQTtBQUN2RCxlQUFLLGFBQWE7QUFBQSxNQUN6QixPQUFPO0FBQ0wsWUFBSSxRQUFRLGNBQWM7QUFBYSxlQUFLLGFBQWE7QUFBQSxpQkFDaEQsUUFBUSxjQUFjO0FBQWEsZUFBSyxhQUFhO0FBQUE7QUFDekQsZUFBSyxhQUFhO0FBQUEsTUFDekI7QUFDQSxtQkFBYTtBQUFBLElBQ2YsQ0FBQztBQUdELGlCQUFhO0FBRWIsVUFBTSxnQkFBZ0IsS0FBSyxjQUFjLFVBQVUsRUFBRSxLQUFLLDBCQUEwQixDQUFDO0FBRXJGLFVBQU0sWUFBWSxjQUFjLFNBQVMsU0FBUztBQUFBLE1BQ2hELEtBQUs7QUFBQSxNQUNMLE1BQU07QUFBQSxRQUNKLE1BQU07QUFBQSxRQUNOLGFBQWE7QUFBQSxNQUNmO0FBQUEsSUFDRixDQUFDO0FBRUQsVUFBTSxvQkFBb0IsY0FBYyxVQUFVO0FBQUEsTUFDaEQsS0FBSztBQUFBLE1BQ0wsT0FBTztBQUFBLElBQ1QsQ0FBQztBQUNELGlDQUFRLG1CQUFtQixVQUFVO0FBQ3JDLHNCQUFrQixpQkFBaUIsU0FBUyxNQUFNO0FBQ2hELFdBQUssZUFBZTtBQUFBLElBQ3RCLENBQUM7QUFFRCxjQUFVLGlCQUFpQixTQUFTLENBQUMsTUFBTTtBQUN6QyxZQUFNLFNBQVMsRUFBRTtBQUNqQixXQUFLLGdCQUFnQixPQUFPO0FBQzVCLFdBQUssV0FBVztBQUFBLElBQ2xCLENBQUM7QUFFRCxTQUFLLGVBQWUsS0FBSyxVQUFVLFVBQVUsRUFBRSxLQUFLLGdCQUFnQixDQUFDO0FBRXJFLFVBQU0sS0FBSyxTQUFTO0FBRXBCLFNBQUs7QUFBQSxNQUNILEtBQUssSUFBSSxjQUFjLEdBQUcsV0FBVyxDQUFDLFNBQWdCO0FBQ3BELGFBQUssZUFBZSxJQUFJO0FBQUEsTUFDMUIsQ0FBQztBQUFBLElBQ0g7QUFFQSxTQUFLO0FBQUEsTUFDSCxLQUFLLElBQUksTUFBTSxHQUFHLFVBQVUsQ0FBQyxTQUFTO0FBQ3BDLFlBQUksZ0JBQWdCLHlCQUFTLEtBQUssY0FBYyxNQUFNO0FBQ3BELGVBQUssZUFBZSxLQUFLLElBQUk7QUFDN0IsZUFBSyxXQUFXO0FBQUEsUUFDbEI7QUFBQSxNQUNGLENBQUM7QUFBQSxJQUNIO0FBRUEsU0FBSztBQUFBLE1BQ0gsS0FBSyxJQUFJLE1BQU0sR0FBRyxVQUFVLENBQUMsTUFBTSxZQUFZO0FBQzdDLFlBQUksZ0JBQWdCLHlCQUFTLEtBQUssY0FBYyxNQUFNO0FBQ3BELGdCQUFNLE9BQU8sS0FBSyxXQUFXLElBQUksT0FBTztBQUN4QyxjQUFJLE1BQU07QUFDUixpQkFBSyxXQUFXLElBQUksS0FBSyxNQUFNLElBQUk7QUFDbkMsaUJBQUssV0FBVyxPQUFPLE9BQU87QUFBQSxVQUNoQztBQUFBLFFBQ0Y7QUFBQSxNQUNGLENBQUM7QUFBQSxJQUNIO0FBRUEsU0FBSztBQUFBLE1BQ0gsS0FBSyxJQUFJLFVBQVUsR0FBRyxrQ0FBeUMsTUFBTTtBQUNuRSxhQUFLLFdBQVc7QUFBQSxNQUNsQixDQUFDO0FBQUEsSUFDSDtBQUFBLEVBQ0Y7QUFBQSxFQUVBLE1BQU0sV0FBVztBQUNmLFNBQUssUUFBUSxNQUFNO0FBQ25CLFNBQUssV0FBVyxNQUFNO0FBRXRCLFVBQU0sUUFBUSxLQUFLLElBQUksTUFBTSxpQkFBaUI7QUFFOUMsZUFBVyxRQUFRLE9BQU87QUFDeEIsWUFBTSxXQUFXLEtBQUssWUFBWSxJQUFJO0FBQ3RDLFdBQUssV0FBVyxJQUFJLEtBQUssTUFBTSxJQUFJLElBQUksUUFBUSxDQUFDO0FBQ2hELGVBQVMsUUFBUSxTQUFPO0FBQ3RCLGFBQUssUUFBUSxJQUFJLE1BQU0sS0FBSyxRQUFRLElBQUksR0FBRyxLQUFLLEtBQUssQ0FBQztBQUFBLE1BQ3hELENBQUM7QUFBQSxJQUNIO0FBRUEsU0FBSyxXQUFXO0FBQUEsRUFDbEI7QUFBQSxFQUVRLGVBQWUsTUFBYTtBQUNsQyxVQUFNLFVBQVUsS0FBSyxXQUFXLElBQUksS0FBSyxJQUFJLEtBQUssb0JBQUksSUFBWTtBQUNsRSxVQUFNLGFBQWEsS0FBSyxZQUFZLElBQUk7QUFDeEMsVUFBTSxVQUFVLElBQUksSUFBSSxVQUFVO0FBRWxDLFFBQUksYUFBYTtBQUVqQixZQUFRLFFBQVEsU0FBTztBQUNyQixVQUFJLENBQUMsUUFBUSxJQUFJLEdBQUcsR0FBRztBQUNyQixxQkFBYTtBQUNiLGNBQU0sU0FBUyxLQUFLLFFBQVEsSUFBSSxHQUFHLEtBQUssS0FBSztBQUM3QyxZQUFJLFNBQVM7QUFBRyxlQUFLLFFBQVEsT0FBTyxHQUFHO0FBQUE7QUFDbEMsZUFBSyxRQUFRLElBQUksS0FBSyxLQUFLO0FBQUEsTUFDbEM7QUFBQSxJQUNGLENBQUM7QUFFRCxZQUFRLFFBQVEsU0FBTztBQUNyQixVQUFJLENBQUMsUUFBUSxJQUFJLEdBQUcsR0FBRztBQUNyQixxQkFBYTtBQUNiLGFBQUssUUFBUSxJQUFJLE1BQU0sS0FBSyxRQUFRLElBQUksR0FBRyxLQUFLLEtBQUssQ0FBQztBQUFBLE1BQ3hEO0FBQUEsSUFDRixDQUFDO0FBRUQsUUFBSSxZQUFZO0FBQ2QsV0FBSyxXQUFXLElBQUksS0FBSyxNQUFNLE9BQU87QUFDdEMsV0FBSyxXQUFXO0FBQUEsSUFDbEI7QUFBQSxFQUNGO0FBQUEsRUFFUSxlQUFlLFVBQWtCO0FBQ3ZDLFVBQU0sVUFBVSxLQUFLLFdBQVcsSUFBSSxRQUFRO0FBQzVDLFFBQUksQ0FBQztBQUFTO0FBRWQsWUFBUSxRQUFRLFNBQU87QUFDckIsWUFBTSxTQUFTLEtBQUssUUFBUSxJQUFJLEdBQUcsS0FBSyxLQUFLO0FBQzdDLFVBQUksU0FBUztBQUFHLGFBQUssUUFBUSxPQUFPLEdBQUc7QUFBQTtBQUNsQyxhQUFLLFFBQVEsSUFBSSxLQUFLLEtBQUs7QUFBQSxJQUNsQyxDQUFDO0FBRUQsU0FBSyxXQUFXLE9BQU8sUUFBUTtBQUFBLEVBQ2pDO0FBQUEsRUFFQSxNQUFNLGFBQWE7QUFoUnJCO0FBaVJJLFNBQUssYUFBYSxNQUFNO0FBR3hCLFFBQUksS0FBSyxlQUFlO0FBQ3RCLFlBQU0sWUFBWSxLQUFLLGNBQWMsY0FBYyx5Q0FBeUM7QUFDNUYsWUFBTSxlQUFlLEtBQUssY0FBYyxjQUFjLDhDQUE4QztBQUNwRyxVQUFJLGFBQWEsY0FBYztBQUM3QixrQkFBVSxZQUFZLFdBQVc7QUFDakMscUJBQWEsWUFBWSxXQUFXO0FBQ3BDLFlBQUksS0FBSyxnQkFBZ0I7QUFBTSxvQkFBVSxTQUFTLFdBQVc7QUFBQTtBQUN4RCx1QkFBYSxTQUFTLFdBQVc7QUFBQSxNQUN4QztBQUFBLElBQ0Y7QUFFQSxVQUFNLGVBQWUsTUFBTSxLQUFLLHFCQUFxQjtBQUVyRCxVQUFNLGFBQWEsb0JBQUksSUFBb0I7QUFDM0MsVUFBTSxhQUFhLG9CQUFJLElBQW9CO0FBQzNDLFVBQU0sbUJBQWlCLFVBQUssT0FBTyxhQUFaLG1CQUFzQixlQUFjLENBQUM7QUFDNUQsVUFBTSxZQUFZLElBQUksSUFBSSxjQUFjO0FBRXhDLGlCQUFhLFFBQVEsQ0FBQyxPQUFPLFFBQVE7QUFDbkMsVUFBSSxVQUFVLElBQUksR0FBRyxHQUFHO0FBQ3RCLG1CQUFXLElBQUksS0FBSyxLQUFLO0FBQUEsTUFDM0IsT0FBTztBQUNMLG1CQUFXLElBQUksS0FBSyxLQUFLO0FBQUEsTUFDM0I7QUFBQSxJQUNGLENBQUM7QUFFRCxRQUFJLFdBQVcsT0FBTyxHQUFHO0FBQ3ZCLFlBQU0sZUFBZSxLQUFLLGFBQWEsVUFBVSxFQUFFLEtBQUssMEJBQTBCLENBQUM7QUFFbkYsWUFBTSxhQUFhLGFBQWEsV0FBVyxFQUFFLEtBQUssa0JBQWtCLENBQUM7QUFDckUsbUNBQVEsWUFBWSxLQUFLO0FBRXpCLFlBQU0sZUFBZSxNQUFNLEtBQUssV0FBVyxRQUFRLENBQUMsRUFBRSxLQUFLLENBQUMsR0FBRyxNQUFNLEVBQUUsQ0FBQyxFQUFFLGNBQWMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQ25HLG1CQUFhLFFBQVEsQ0FBQyxDQUFDLEtBQUssS0FBSyxNQUFNO0FBQ3JDLGFBQUssaUJBQWlCLEtBQUssT0FBTyxZQUFZO0FBQUEsTUFDaEQsQ0FBQztBQUVELFdBQUssYUFBYSxVQUFVLEVBQUUsS0FBSyxxQkFBcUIsQ0FBQztBQUFBLElBQzNEO0FBRUEsUUFBSTtBQUVKLFFBQUksS0FBSyxnQkFBZ0IsTUFBTTtBQUM3QixtQkFBYSxNQUFNLEtBQUssV0FBVyxRQUFRLENBQUMsRUFBRSxLQUFLLENBQUMsR0FBRyxNQUFNLEVBQUUsQ0FBQyxFQUFFLGNBQWMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQUEsSUFDN0YsT0FBTztBQUNMLG1CQUFhLE1BQU0sS0FBSyxXQUFXLFFBQVEsQ0FBQyxFQUFFLEtBQUssQ0FBQyxHQUFHLE1BQU0sRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7QUFBQSxJQUMxRTtBQUVBLFFBQUksS0FBSyxnQkFBZ0IsTUFBTTtBQUM3QixZQUFNLGVBQWUsb0JBQUksSUFBcUM7QUFDOUQsbUJBQWEsSUFBSSxTQUFTLENBQUMsQ0FBQztBQUU1QixlQUFTLFdBQVcsSUFBSSxZQUFZLElBQUksWUFBWTtBQUNsRCxxQkFBYSxJQUFJLE9BQU8sYUFBYSxRQUFRLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDcEQ7QUFFQSxZQUFNLG1CQUFtQixDQUFDLFVBQUssVUFBSyxVQUFLLFVBQUssVUFBSyxRQUFLLFVBQUssVUFBSyxRQUFHO0FBQ3JFLHVCQUFpQixRQUFRLFlBQVUsYUFBYSxJQUFJLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFFL0QsaUJBQVcsUUFBUSxhQUFXO0FBL1VwQyxZQUFBQyxLQUFBO0FBZ1ZRLGNBQU0sQ0FBQyxHQUFHLElBQUk7QUFDZCxjQUFNLFlBQVksSUFBSSxPQUFPLENBQUMsRUFBRSxZQUFZO0FBRTVDLFlBQUksVUFBVSxNQUFNLE9BQU8sR0FBRztBQUM1QixXQUFBQSxNQUFBLGFBQWEsSUFBSSxTQUFTLE1BQTFCLGdCQUFBQSxJQUE2QixLQUFLO0FBQUEsUUFDcEMsV0FBVyxpQkFBaUIsU0FBUyxTQUFTLEdBQUc7QUFDL0MsNkJBQWEsSUFBSSxTQUFTLE1BQTFCLG1CQUE2QixLQUFLO0FBQUEsUUFDcEMsT0FBTztBQUNMLDZCQUFhLElBQUksT0FBTyxNQUF4QixtQkFBMkIsS0FBSztBQUFBLFFBQ2xDO0FBQUEsTUFDRixDQUFDO0FBRUQsbUJBQWEsUUFBUSxDQUFDLFlBQVksV0FBVztBQUMzQyxZQUFJLFdBQVcsU0FBUyxHQUFHO0FBQ3pCLGNBQUksV0FBVyxTQUFTO0FBQ3RCLGtCQUFNLFdBQVcsS0FBSyxhQUFhLFdBQVcsRUFBRSxLQUFLLGtCQUFrQixDQUFDO0FBQ3hFLHFCQUFTLFFBQVEsTUFBTTtBQUFBLFVBQ3pCO0FBRUEscUJBQVcsUUFBUSxDQUFDLENBQUMsS0FBSyxLQUFLLE1BQU07QUFDbkMsaUJBQUssaUJBQWlCLEtBQUssT0FBTyxLQUFLLFlBQVk7QUFBQSxVQUNyRCxDQUFDO0FBQUEsUUFDSDtBQUFBLE1BQ0YsQ0FBQztBQUFBLElBQ0gsT0FBTztBQUNMLGlCQUFXLFFBQVEsQ0FBQyxDQUFDLEtBQUssS0FBSyxNQUFNO0FBQ25DLGFBQUssaUJBQWlCLEtBQUssT0FBTyxLQUFLLFlBQVk7QUFBQSxNQUNyRCxDQUFDO0FBQUEsSUFDSDtBQUFBLEVBQ0Y7QUFBQSxFQUVRLGlCQUFpQixLQUFhLE9BQWUsVUFBdUI7QUEvVzlFO0FBZ1hJLFVBQU0sUUFBUSxTQUFTLFdBQVcsRUFBRSxLQUFLLFdBQVcsQ0FBQztBQUVyRCxRQUFJLEtBQUssYUFBYSxJQUFJLEdBQUc7QUFBRyxZQUFNLFNBQVMsbUJBQW1CO0FBQUEsYUFDekQsS0FBSyxhQUFhLElBQUksR0FBRztBQUFHLFlBQU0sU0FBUyxtQkFBbUI7QUFFdkUsVUFBTSxlQUFhLFVBQUssT0FBTyxhQUFaLG1CQUFzQixlQUFjLENBQUM7QUFDeEQsUUFBSSxXQUFXLFNBQVMsR0FBRztBQUFHLFlBQU0sU0FBUyxpQkFBaUI7QUFFOUQsVUFBTSxRQUFRLElBQUksUUFBUSxRQUFRO0FBRWxDLFVBQU0sdUJBQXVCLE9BQU8sZUFBd0IsV0FBb0IsVUFBbUI7QUFDakcsVUFBSSxPQUFPO0FBQ1QsWUFBSSxDQUFDLEtBQUssT0FBTztBQUFVO0FBQzNCLFlBQUksQ0FBQyxLQUFLLE9BQU8sU0FBUztBQUFZLGVBQUssT0FBTyxTQUFTLGFBQWEsQ0FBQztBQUV6RSxZQUFJLEtBQUssT0FBTyxTQUFTLFdBQVcsU0FBUyxHQUFHLEdBQUc7QUFDakQsZUFBSyxPQUFPLFNBQVMsYUFBYSxLQUFLLE9BQU8sU0FBUyxXQUFXLE9BQU8sT0FBSyxNQUFNLEdBQUc7QUFBQSxRQUN6RixPQUFPO0FBQ0wsZUFBSyxPQUFPLFNBQVMsV0FBVyxLQUFLLEdBQUc7QUFBQSxRQUMxQztBQUNBLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFDL0I7QUFBQSxNQUNGO0FBRUEsVUFBSSxXQUFXO0FBQ2IsWUFBSSxLQUFLLGFBQWEsSUFBSSxHQUFHLEdBQUc7QUFDOUIsZUFBSyxhQUFhLE9BQU8sR0FBRztBQUFBLFFBQzlCLE9BQU87QUFDTCxlQUFLLGFBQWEsSUFBSSxHQUFHO0FBQ3pCLGVBQUssYUFBYSxPQUFPLEdBQUc7QUFBQSxRQUM5QjtBQUFBLE1BQ0YsV0FBVyxlQUFlO0FBQ3hCLFlBQUksS0FBSyxhQUFhLElBQUksR0FBRyxHQUFHO0FBQzlCLGVBQUssYUFBYSxPQUFPLEdBQUc7QUFBQSxRQUM5QixPQUFPO0FBQ0wsZUFBSyxhQUFhLElBQUksR0FBRztBQUN6QixlQUFLLGFBQWEsT0FBTyxHQUFHO0FBQUEsUUFDOUI7QUFBQSxNQUNGLE9BQU87QUFDTCxZQUFJLEtBQUssYUFBYSxTQUFTLEtBQUssS0FBSyxhQUFhLElBQUksR0FBRyxHQUFHO0FBQzlELGVBQUssYUFBYSxNQUFNO0FBQUEsUUFDMUIsT0FBTztBQUNMLGVBQUssYUFBYSxNQUFNO0FBQ3hCLGVBQUssYUFBYSxNQUFNO0FBQ3hCLGVBQUssYUFBYSxJQUFJLEdBQUc7QUFBQSxRQUMzQjtBQUFBLE1BQ0Y7QUFFQSxXQUFLLFdBQVc7QUFDaEIsV0FBSyxhQUFhO0FBQUEsSUFDcEI7QUFFQSxVQUFNLGlCQUFpQixTQUFTLENBQUMsTUFBTTtBQUNyQyxRQUFFLGVBQWU7QUFDakIsMkJBQXFCLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsTUFBTTtBQUFBLElBQ25FLENBQUM7QUFFRCxVQUFNLGlCQUFpQixjQUFjLENBQUMsTUFBTTtBQUMxQyxXQUFLLGFBQWEsT0FBTyxXQUFXLE1BQU07QUFDeEMsYUFBSyxhQUFhO0FBQ2xCLGNBQU0sc0JBQXNCLEtBQUssYUFBYSxJQUFJLEdBQUc7QUFDckQsNkJBQXFCLENBQUMscUJBQXFCLHFCQUFxQixLQUFLO0FBQUEsTUFDdkUsR0FBRyxHQUFHO0FBQUEsSUFDUixHQUFHLEVBQUUsU0FBUyxLQUFLLENBQUM7QUFFcEIsVUFBTSxpQkFBaUIsWUFBWSxDQUFDLE1BQU07QUFDeEMsVUFBSSxLQUFLLFlBQVk7QUFDbkIsZUFBTyxhQUFhLEtBQUssVUFBVTtBQUNuQyxhQUFLLGFBQWE7QUFDbEIsNkJBQXFCLE9BQU8sT0FBTyxLQUFLO0FBQUEsTUFDMUMsT0FBTztBQUNMLFVBQUUsZUFBZTtBQUFBLE1BQ25CO0FBQUEsSUFDRixDQUFDO0FBRUQsVUFBTSxpQkFBaUIsYUFBYSxNQUFNO0FBQ3hDLFVBQUksS0FBSyxZQUFZO0FBQ25CLGVBQU8sYUFBYSxLQUFLLFVBQVU7QUFDbkMsYUFBSyxhQUFhO0FBQUEsTUFDcEI7QUFBQSxJQUNGLEdBQUcsRUFBRSxTQUFTLEtBQUssQ0FBQztBQUFBLEVBQ3RCO0FBQUEsRUFFQSxNQUFjLHVCQUFxRDtBQW5jckU7QUFvY0ksUUFBSSxlQUFlLG9CQUFJLElBQW9CO0FBRTNDLFFBQUksS0FBSyxhQUFhLFNBQVMsR0FBRztBQUNoQyxxQkFBZSxJQUFJLElBQUksS0FBSyxPQUFPO0FBQUEsSUFDckMsT0FBTztBQUNMLFlBQU0sb0JBQW9CLE1BQU0sS0FBSyxLQUFLLFlBQVk7QUFDdEQsWUFBTSxnQkFBMEIsQ0FBQztBQUVqQyxXQUFLLFdBQVcsUUFBUSxDQUFDLE1BQU0sYUFBYTtBQUMxQyxZQUFJLGtCQUFrQixNQUFNLFNBQU8sS0FBSyxJQUFJLEdBQUcsQ0FBQyxHQUFHO0FBQ2pELHdCQUFjLEtBQUssUUFBUTtBQUFBLFFBQzdCO0FBQUEsTUFDRixDQUFDO0FBRUQsVUFBSSxLQUFLLGVBQWUsUUFBUTtBQUM5QixzQkFBYyxRQUFRLGNBQVk7QUFDaEMsZ0JBQU0sV0FBVyxLQUFLLFdBQVcsSUFBSSxRQUFRO0FBQzdDLGNBQUksVUFBVTtBQUNaLHFCQUFTLFFBQVEsU0FBTztBQUN0QiwyQkFBYSxJQUFJLE1BQU0sYUFBYSxJQUFJLEdBQUcsS0FBSyxLQUFLLENBQUM7QUFBQSxZQUN4RCxDQUFDO0FBQUEsVUFDSDtBQUFBLFFBQ0YsQ0FBQztBQUFBLE1BQ0gsT0FBTztBQUNMLG1CQUFXLFlBQVksZUFBZTtBQUNwQyxnQkFBTSxPQUFPLEtBQUssSUFBSSxNQUFNLHNCQUFzQixRQUFRO0FBQzFELGNBQUksZ0JBQWdCLHVCQUFPO0FBQ3pCLGtCQUFNLFVBQVUsTUFBTSxLQUFLLElBQUksTUFBTSxXQUFXLElBQUk7QUFDcEQsa0JBQU0sUUFBUSxRQUFRLE1BQU0sSUFBSTtBQUVoQyx1QkFBVyxRQUFRLE9BQU87QUFDeEIsb0JBQU0sWUFBWSxLQUFLLFlBQVk7QUFDbkMsa0JBQUksS0FBSyxlQUFlLFVBQVUsQ0FBQyxVQUFVLFNBQVMsS0FBSztBQUFHO0FBQzlELGtCQUFJLEtBQUssZUFBZSxlQUFlLENBQUMsVUFBVSxTQUFTLE9BQU87QUFBRztBQUNyRSxrQkFBSSxLQUFLLGVBQWUsZUFBZSxDQUFDLFVBQVUsU0FBUyxPQUFPO0FBQUc7QUFFckUsb0JBQU0sV0FBVyxvQkFBSSxJQUFZO0FBQ2pDLG9CQUFNLFdBQVc7QUFDakIsa0JBQUk7QUFDSixzQkFBUSxRQUFRLFNBQVMsS0FBSyxJQUFJLE9BQU8sTUFBTTtBQUM3Qyx5QkFBUyxJQUFJLE1BQU0sQ0FBQyxDQUFDO0FBQUEsY0FDdkI7QUFFQSxrQkFBSSxrQkFBa0IsTUFBTSxpQkFBZTtBQUN6Qyx1QkFBTyxNQUFNLEtBQUssUUFBUSxFQUFFLEtBQUssT0FBSyxFQUFFLFlBQVksTUFBTSxZQUFZLFlBQVksQ0FBQztBQUFBLGNBQ3JGLENBQUMsR0FBRztBQUNGLHlCQUFTLFFBQVEsU0FBTztBQUN0QiwrQkFBYSxJQUFJLE1BQU0sYUFBYSxJQUFJLEdBQUcsS0FBSyxLQUFLLENBQUM7QUFBQSxnQkFDeEQsQ0FBQztBQUFBLGNBQ0g7QUFBQSxZQUNGO0FBQUEsVUFDRjtBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBRUEsd0JBQWtCLFFBQVEsU0FBTztBQUMvQixZQUFJLENBQUMsYUFBYSxJQUFJLEdBQUcsR0FBRztBQUMxQix1QkFBYSxJQUFJLEtBQUssS0FBSyxRQUFRLElBQUksR0FBRyxLQUFLLENBQUM7QUFBQSxRQUNsRDtBQUFBLE1BQ0YsQ0FBQztBQUFBLElBQ0g7QUFFQSxVQUFNLFdBQVMsVUFBSyxPQUFPLGFBQVosbUJBQXNCLG9CQUFtQjtBQUN4RCxVQUFNLGVBQWEsVUFBSyxPQUFPLGFBQVosbUJBQXNCLGVBQWMsQ0FBQztBQUV4RCxRQUFJLFNBQVMsR0FBRztBQUNkLFlBQU0sU0FBUyxvQkFBSSxJQUFvQjtBQUN2QyxtQkFBYSxRQUFRLENBQUMsT0FBTyxRQUFRO0FBQ25DLFlBQUksU0FBUyxVQUFVLEtBQUssYUFBYSxJQUFJLEdBQUcsS0FBSyxXQUFXLFNBQVMsR0FBRyxHQUFHO0FBQzdFLGlCQUFPLElBQUksS0FBSyxLQUFLO0FBQUEsUUFDdkI7QUFBQSxNQUNGLENBQUM7QUFDRCxxQkFBZTtBQUFBLElBQ2pCO0FBRUEsUUFBSSxLQUFLLGVBQWU7QUFDdEIsWUFBTSxhQUFhLEtBQUssY0FBYyxZQUFZO0FBQ2xELFlBQU0sU0FBUyxvQkFBSSxJQUFvQjtBQUV2QyxtQkFBYSxRQUFRLENBQUMsT0FBTyxRQUFRO0FBQ25DLFlBQUksSUFBSSxZQUFZLEVBQUUsU0FBUyxVQUFVLEtBQUssS0FBSyxhQUFhLElBQUksR0FBRyxLQUFLLEtBQUssYUFBYSxJQUFJLEdBQUcsR0FBRztBQUN0RyxpQkFBTyxJQUFJLEtBQUssS0FBSztBQUFBLFFBQ3ZCO0FBQUEsTUFDRixDQUFDO0FBQ0QsYUFBTztBQUFBLElBQ1Q7QUFFQSxXQUFPO0FBQUEsRUFDVDtBQUFBLEVBRVEsZUFBZTtBQUNyQixRQUFJLGFBQWEsS0FBSyxJQUFJLFVBQVUsZ0JBQWdCLFFBQVEsRUFBRSxDQUFDO0FBRS9ELFFBQUksQ0FBQyxZQUFZO0FBQ2YsWUFBTSxZQUFZLEtBQUssSUFBSSxVQUFVLGFBQWEsS0FBSztBQUN2RCxVQUFJLFdBQVc7QUFDYixxQkFBYTtBQUNiLG1CQUFXLGFBQWEsRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUFBLE1BQzVDO0FBQUEsSUFDRjtBQUVBLFFBQUksS0FBSyxhQUFhLFNBQVMsS0FBSyxLQUFLLGFBQWEsU0FBUyxHQUFHO0FBQ2hFLFVBQUksWUFBWTtBQUNkLGNBQU0sYUFBYSxXQUFXO0FBQzlCLFlBQUksY0FBYyxPQUFPLFdBQVcsYUFBYSxZQUFZO0FBQzNELHFCQUFXLFNBQVMsRUFBRTtBQUFBLFFBQ3hCO0FBQUEsTUFDRjtBQUNBO0FBQUEsSUFDRjtBQUVBLFFBQUksV0FBVztBQUNmLFVBQU0sV0FBVyxNQUFNLEtBQUssS0FBSyxZQUFZO0FBQzdDLFVBQU0sV0FBVyxNQUFNLEtBQUssS0FBSyxZQUFZO0FBRTdDLFFBQUksS0FBSyxlQUFlLFFBQVE7QUFDOUIsaUJBQVc7QUFBQSxRQUNULEdBQUcsU0FBUyxJQUFJLFNBQU8sUUFBUSxLQUFLO0FBQUEsUUFDcEMsR0FBRyxTQUFTLElBQUksU0FBTyxTQUFTLEtBQUs7QUFBQSxNQUN2QyxFQUFFLEtBQUssR0FBRztBQUFBLElBQ1osT0FBTztBQUNMLFVBQUksU0FBUztBQUNiLFVBQUksS0FBSyxlQUFlO0FBQVEsaUJBQVM7QUFBQSxlQUNoQyxLQUFLLGVBQWU7QUFBYSxpQkFBUztBQUFBLGVBQzFDLEtBQUssZUFBZTtBQUFhLGlCQUFTO0FBRW5ELFlBQU0sZ0JBQWdCO0FBQUEsUUFDcEIsR0FBRyxTQUFTLElBQUksU0FBTyxJQUFJLEtBQUs7QUFBQSxRQUNoQyxHQUFHLFNBQVMsSUFBSSxTQUFPLEtBQUssS0FBSztBQUFBLE1BQ25DLEVBQUUsS0FBSyxHQUFHO0FBRVYsaUJBQVcsR0FBRyxVQUFVO0FBQUEsSUFDMUI7QUFFQSxRQUFJLFlBQVk7QUFDZCxZQUFNLGFBQWEsV0FBVztBQUM5QixVQUFJLGNBQWMsT0FBTyxXQUFXLGFBQWEsWUFBWTtBQUMzRCxtQkFBVyxTQUFTLFFBQVE7QUFBQSxNQUM5QjtBQUNBLFdBQUssSUFBSSxVQUFVLFdBQVcsVUFBVTtBQUFBLElBQzFDO0FBQUEsRUFDRjtBQUFBLEVBRUEsWUFBWSxNQUF1QjtBQUNqQyxVQUFNLFFBQVEsS0FBSyxJQUFJLGNBQWMsYUFBYSxJQUFJO0FBQ3RELFFBQUksQ0FBQztBQUFPLGFBQU8sQ0FBQztBQUVwQixVQUFNLE9BQU8sb0JBQUksSUFBWTtBQUU3QixRQUFJLE1BQU0sTUFBTTtBQUNkLFlBQU0sS0FBSyxRQUFRLFlBQVU7QUFDM0IsY0FBTSxNQUFNLE9BQU8sSUFBSSxRQUFRLE1BQU0sRUFBRTtBQUN2QyxhQUFLLElBQUksR0FBRztBQUFBLE1BQ2QsQ0FBQztBQUFBLElBQ0g7QUFFQSxRQUFJLE1BQU0sZUFBZSxNQUFNLFlBQVksTUFBTTtBQUMvQyxZQUFNLFNBQVMsTUFBTSxZQUFZO0FBQ2pDLFVBQUksT0FBTyxXQUFXLFVBQVU7QUFDOUIsZUFBTyxNQUFNLFFBQVEsRUFBRSxPQUFPLE9BQU8sRUFBRSxRQUFRLFNBQU87QUFDcEQsZUFBSyxJQUFJLEdBQUc7QUFBQSxRQUNkLENBQUM7QUFBQSxNQUNILFdBQVcsTUFBTSxRQUFRLE1BQU0sR0FBRztBQUNoQyxlQUFPLFFBQVEsU0FBTztBQUNwQixjQUFJO0FBQUssaUJBQUssSUFBSSxPQUFPLEdBQUcsQ0FBQztBQUFBLFFBQy9CLENBQUM7QUFBQSxNQUNIO0FBQUEsSUFDRjtBQUVBLFdBQU8sTUFBTSxLQUFLLElBQUk7QUFBQSxFQUN4QjtBQUFBLEVBRU8sYUFBYTtBQUNsQixTQUFLLGNBQWMsS0FBSyxnQkFBZ0IsT0FBTyxVQUFVO0FBQ3pELFNBQUssV0FBVztBQUFBLEVBQ2xCO0FBQUEsRUFFTyxxQkFBcUI7QUFDMUIsU0FBSyxhQUFhLE1BQU07QUFDeEIsU0FBSyxhQUFhLE1BQU07QUFDeEIsU0FBSyxXQUFXO0FBQ2hCLFNBQUssYUFBYTtBQUFBLEVBQ3BCO0FBQUEsRUFFTyxpQkFBaUI7QUFDdEIsVUFBTSxZQUFZLEtBQUssVUFBVSxjQUFjLHdCQUF3QjtBQUN2RSxRQUFJLFdBQVc7QUFDYixnQkFBVSxRQUFRO0FBQ2xCLFdBQUssZ0JBQWdCO0FBQ3JCLFdBQUssV0FBVztBQUFBLElBQ2xCO0FBQUEsRUFDRjtBQUNGOzs7QUVwb0JPLElBQU0sWUFBWSxNQUFjO0FBQ3JDLFNBQU87QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBaU9UOzs7QUNsT0EsSUFBQUMsbUJBQStDO0FBUXhDLElBQU0sbUJBQTBDO0FBQUEsRUFDckQsWUFBWSxDQUFDO0FBQUEsRUFDYixpQkFBaUI7QUFBQTtBQUNuQjtBQUVPLElBQU0sb0JBQU4sY0FBZ0Msa0NBQWlCO0FBQUEsRUFHdEQsWUFBWSxLQUFVLFFBQXVCO0FBQzNDLFVBQU0sS0FBSyxNQUFNO0FBQ2pCLFNBQUssU0FBUztBQUFBLEVBQ2hCO0FBQUEsRUFFQSxVQUFnQjtBQUNkLFVBQU0sRUFBRSxZQUFZLElBQUk7QUFDeEIsZ0JBQVksTUFBTTtBQUVsQixRQUFJLHlCQUFRLFdBQVcsRUFDcEIsUUFBUSxrQkFBa0IsRUFDMUIsUUFBUSx5RkFBeUYsRUFDakc7QUFBQSxNQUFRLENBQUMsU0FDUixLQUNHLGVBQWUsR0FBRyxFQUNsQixTQUFTLEtBQUssT0FBTyxTQUFTLGdCQUFnQixTQUFTLENBQUMsRUFDeEQsU0FBUyxPQUFPLFVBQVU7QUFDekIsY0FBTSxTQUFTLFNBQVMsT0FBTyxFQUFFO0FBQ2pDLFlBQUksQ0FBQyxNQUFNLE1BQU0sS0FBSyxVQUFVLEdBQUc7QUFDakMsZUFBSyxPQUFPLFNBQVMsa0JBQWtCO0FBQ3ZDLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDakM7QUFBQSxNQUNGLENBQUM7QUFBQSxJQUNMO0FBRUYsUUFBSSx5QkFBUSxXQUFXLEVBQ3BCLFFBQVEsbUJBQW1CLEVBQzNCLFFBQVEsNERBQTRELEVBQ3BFO0FBQUEsTUFBVSxDQUFDLFFBQ1YsSUFDRyxjQUFjLGNBQWMsRUFDNUIsUUFBUSxZQUFZO0FBQ25CLGFBQUssT0FBTyxTQUFTLGFBQWEsQ0FBQztBQUNuQyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDakMsQ0FBQztBQUFBLElBQ0w7QUFBQSxFQUNKO0FBQ0Y7OztBSi9DQSxJQUFxQixnQkFBckIsY0FBMkMsd0JBQU87QUFBQSxFQUdoRCxNQUFNLFNBQVM7QUFDYixVQUFNLEtBQUssYUFBYTtBQUV4QixTQUFLO0FBQUEsTUFDSDtBQUFBO0FBQUEsTUFFQSxDQUFDLFNBQXdCLElBQUksWUFBWSxNQUFNLElBQUk7QUFBQSxJQUNyRDtBQUVBLFNBQUssY0FBYyxPQUFPLGtCQUFrQixNQUFNO0FBQ2hELFdBQUssYUFBYTtBQUFBLElBQ3BCLENBQUM7QUFFRCxTQUFLLGNBQWMsSUFBSSxrQkFBa0IsS0FBSyxLQUFLLElBQUksQ0FBQztBQUV4RCxTQUFLLFdBQVc7QUFBQSxNQUNkLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFVBQVUsTUFBTTtBQUNkLGFBQUssYUFBYTtBQUFBLE1BQ3BCO0FBQUEsSUFDRixDQUFDO0FBR0QsU0FBSyxXQUFXO0FBQUEsTUFDZCxJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLE1BQU07QUFwQ3RCO0FBcUNRLGNBQU0sUUFBTyxVQUFLLElBQUksVUFBVSxnQkFBZ0IsU0FBUyxFQUFFLENBQUMsTUFBL0MsbUJBQWtEO0FBQy9ELFlBQUk7QUFBTSxlQUFLLFdBQVc7QUFBQSxNQUM1QjtBQUFBLElBQ0YsQ0FBQztBQUVELFNBQUssV0FBVztBQUFBLE1BQ2QsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sVUFBVSxNQUFNO0FBN0N0QjtBQThDUSxjQUFNLFFBQU8sVUFBSyxJQUFJLFVBQVUsZ0JBQWdCLFNBQVMsRUFBRSxDQUFDLE1BQS9DLG1CQUFrRDtBQUMvRCxZQUFJO0FBQU0sZUFBSyxtQkFBbUI7QUFBQSxNQUNwQztBQUFBLElBQ0YsQ0FBQztBQUVELFNBQUssV0FBVztBQUFBLE1BQ2QsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sVUFBVSxNQUFNO0FBdER0QjtBQXVEUSxjQUFNLFFBQU8sVUFBSyxJQUFJLFVBQVUsZ0JBQWdCLFNBQVMsRUFBRSxDQUFDLE1BQS9DLG1CQUFrRDtBQUMvRCxZQUFJO0FBQU0sZUFBSyxvQkFBb0I7QUFBQSxNQUNyQztBQUFBLElBQ0YsQ0FBQztBQUVELFNBQUssV0FBVztBQUFBLE1BQ2QsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sVUFBVSxNQUFNO0FBL0R0QjtBQWdFUSxjQUFNLFFBQU8sVUFBSyxJQUFJLFVBQVUsZ0JBQWdCLFNBQVMsRUFBRSxDQUFDLE1BQS9DLG1CQUFrRDtBQUMvRCxZQUFJO0FBQU0sZUFBSyxzQkFBc0I7QUFBQSxNQUN2QztBQUFBLElBQ0YsQ0FBQztBQUVELFNBQUssV0FBVztBQUFBLE1BQ2QsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sVUFBVSxNQUFNO0FBeEV0QjtBQXlFUSxjQUFNLFFBQU8sVUFBSyxJQUFJLFVBQVUsZ0JBQWdCLFNBQVMsRUFBRSxDQUFDLE1BQS9DLG1CQUFrRDtBQUMvRCxZQUFJO0FBQU0sZUFBSyxlQUFlO0FBQUEsTUFDaEM7QUFBQSxJQUNGLENBQUM7QUFFRCxTQUFLLFNBQVM7QUFBQSxFQUNoQjtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ25CLFNBQUssV0FBVyxPQUFPLE9BQU8sQ0FBQyxHQUFHLGtCQUFrQixNQUFNLEtBQUssU0FBUyxDQUFDO0FBQUEsRUFDM0U7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNuQixVQUFNLEtBQUssU0FBUyxLQUFLLFFBQVE7QUFFakMsU0FBSyxJQUFJLFVBQVUsUUFBUSxnQ0FBZ0M7QUFBQSxFQUM3RDtBQUFBLEVBRUEsTUFBTSxXQUFXO0FBQ2YsU0FBSyxJQUFJLFVBQVUsbUJBQW1CLFNBQVM7QUFBQSxFQUNqRDtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ25CLFVBQU0sRUFBRSxVQUFVLElBQUksS0FBSztBQUUzQixRQUFJLE9BQU8sVUFBVSxnQkFBZ0IsU0FBUyxFQUFFLENBQUM7QUFFakQsUUFBSSxDQUFDLE1BQU07QUFDVCxZQUFNLFlBQVksVUFBVSxhQUFhLEtBQUs7QUFDOUMsVUFBSSxXQUFXO0FBQ2IsZUFBTztBQUNQLGNBQU0sS0FBSyxhQUFhLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFBQSxNQUM3QztBQUFBLElBQ0Y7QUFFQSxRQUFJLE1BQU07QUFDUixnQkFBVSxXQUFXLElBQUk7QUFBQSxJQUMzQjtBQUFBLEVBQ0Y7QUFBQSxFQUVBLFdBQVc7QUFDVCxVQUFNLFVBQVUsU0FBUyxjQUFjLE9BQU87QUFDOUMsWUFBUSxZQUFZLFVBQVU7QUFDOUIsYUFBUyxLQUFLLFlBQVksT0FBTztBQUFBLEVBQ25DO0FBQ0Y7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJpbXBvcnRfb2JzaWRpYW4iXQp9Cg==
