/* 
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD 
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => FlatTagPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// constants.ts
var VIEW_TYPE = "flat-tag-view";

// flatTagView.ts
var import_obsidian = require("obsidian");
var GlobalMuteConfirmModal = class extends import_obsidian.Modal {
  constructor(app, tagToMute, onConfirm) {
    super(app);
    this.tagToMute = tagToMute;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Global Mute Tag" });
    const isCurrentlyMuted = this.tagToMute.startsWith("%");
    const targetState = isCurrentlyMuted ? "UN-MUTE" : "MUTE";
    const resultingTag = isCurrentlyMuted ? `#${this.tagToMute.slice(1)}` : `#%${this.tagToMute}`;
    contentEl.createEl("p", {
      text: `Are you sure you want to globally ${targetState} the tag #${this.tagToMute}?`
    });
    contentEl.createEl("p", {
      text: `This will search your entire vault and change every instance to ${resultingTag}. This action modifies your files and cannot be easily undone.`
    });
    new import_obsidian.Setting(contentEl).addButton(
      (btn) => btn.setButtonText("Cancel").onClick(() => this.close())
    ).addButton(
      (btn) => btn.setButtonText(`Yes, ${targetState} Globally`).setCta().onClick(() => {
        this.onConfirm();
        this.close();
      })
    );
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var FlatTagView = class extends import_obsidian.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.selectedTags = /* @__PURE__ */ new Set();
    this.excludedTags = /* @__PURE__ */ new Set();
    this.allTags = /* @__PURE__ */ new Map();
    this.tagsByFile = /* @__PURE__ */ new Map();
    this.currentSort = "az";
    this.searchMode = "note";
    this.tagSearchText = "";
    this.touchTimer = null;
    this.lastInteractionWasTouch = false;
    this.renderId = 0;
    this.plugin = plugin;
    this.containerEl.addClass("flat-tag-view");
  }
  getViewType() {
    return VIEW_TYPE;
  }
  getDisplayText() {
    return "Flat Tags";
  }
  getIcon() {
    return "tag";
  }
  async onOpen() {
    this.container = this.contentEl.createDiv({ cls: "flat-tag-container" });
    this.containerEl.addEventListener("touchstart", () => {
      this.lastInteractionWasTouch = true;
    }, { passive: true });
    this.containerEl.addEventListener("pointerdown", (e) => {
      if (e.pointerType && e.pointerType !== "touch")
        this.lastInteractionWasTouch = false;
    }, { passive: true });
    this.sortContainer = this.container.createDiv({ cls: "flat-tag-sort-container" });
    const buttonSection = this.sortContainer.createDiv({ cls: "flat-tag-buttons-section" });
    this.sortAzBtn = buttonSection.createDiv({ cls: "flat-tag-sort-button", title: "Sort A-Z" });
    (0, import_obsidian.setIcon)(this.sortAzBtn, "lucide-sort-asc");
    this.sortCountBtn = buttonSection.createDiv({ cls: "flat-tag-sort-button", title: "Sort by usage" });
    (0, import_obsidian.setIcon)(this.sortCountBtn, "lucide-bar-chart-2");
    const clearButton = buttonSection.createDiv({ cls: "flat-tag-clear-button", title: "Clear tag selections" });
    (0, import_obsidian.setIcon)(clearButton, "x");
    clearButton.addEventListener("click", () => this.clearTagSelections());
    this.scopeBtn = buttonSection.createDiv({
      cls: "flat-tag-mode-button",
      text: "NOTE",
      title: "Click to cycle: Note -> Line"
    });
    this.taskBtn = buttonSection.createDiv({
      cls: "flat-tag-mode-button",
      text: "TASK-ALL",
      title: "Click to cycle: All -> Todo -> Done"
    });
    const cutoffSpacer = buttonSection.createDiv({ cls: "flat-tag-cutoff-spacer" });
    cutoffSpacer.ariaHidden = "true";
    const cutoffSection = buttonSection.createDiv({ cls: "flat-tag-cutoff-section" });
    this.cutoffToggleBtn = cutoffSection.createDiv({ cls: "flat-tag-cutoff-toggle", title: "Toggle frequency cutoff" });
    this.cutoffInput = cutoffSection.createEl("input", {
      cls: "flat-tag-cutoff-input",
      attr: { type: "number", min: "0", step: "1", inputmode: "numeric", placeholder: "0" }
    });
    this.cutoffToggleBtn.addEventListener("click", async () => {
      this.plugin.settings.frequencyCutoffEnabled = !this.plugin.settings.frequencyCutoffEnabled;
      await this.plugin.saveSettings();
      this.syncCutoffControlsFromSettings();
      this.renderTags();
    });
    this.cutoffInput.addEventListener("input", async () => {
      const parsed = parseInt(this.cutoffInput.value, 10);
      if (!isNaN(parsed) && parsed >= 0) {
        this.plugin.settings.frequencyCutoff = parsed;
        await this.plugin.saveSettings();
        this.renderTags();
      }
    });
    this.sortAzBtn.addEventListener("click", () => {
      if (this.currentSort === "az") {
        const vaultName = this.app.vault.getName();
        const count = Object.keys(this.app.metadataCache.getTags()).length;
        new import_obsidian.Notice(`'${vaultName}': ${count} unique tags`);
      } else {
        this.currentSort = "az";
        this.updateModeUI(true);
      }
    });
    this.sortCountBtn.addEventListener("click", () => {
      if (this.currentSort === "count") {
        const vaultName = this.app.vault.getName();
        const count = Object.keys(this.app.metadataCache.getTags()).length;
        new import_obsidian.Notice(`'${vaultName}': ${count} unique tags`);
      } else {
        this.currentSort = "count";
        this.updateModeUI(true);
      }
    });
    this.scopeBtn.addEventListener("click", () => this.toggleScopeMode());
    this.taskBtn.addEventListener("click", () => this.toggleTaskMode());
    const searchSection = this.sortContainer.createDiv({ cls: "flat-tag-search-section" });
    const searchBox = searchSection.createEl("input", {
      cls: "flat-tag-search-input",
      attr: { type: "text", placeholder: "Search tags..." }
    });
    const clearSearchButton = searchSection.createDiv({ cls: "flat-tag-search-clear-button", title: "Clear search" });
    (0, import_obsidian.setIcon)(clearSearchButton, "square-x");
    clearSearchButton.addEventListener("click", () => this.clearSearchBox());
    searchBox.addEventListener("input", (e) => {
      var _a;
      const target = e.target;
      this.tagSearchText = (_a = target.value) != null ? _a : "";
      this.renderTags();
    });
    this.tagContainer = this.container.createDiv({ cls: "flat-tag-list" });
    this.syncCutoffControlsFromSettings();
    this.updateModeUI(true);
    this.app.workspace.onLayoutReady(async () => {
      await this.loadTags();
    });
    this.registerEvent(this.app.metadataCache.on("changed", (file) => {
      this.updateFileTags(file);
    }));
    this.registerEvent(this.app.vault.on("delete", (file) => {
      if (file instanceof import_obsidian.TFile && file.extension === "md") {
        this.removeFileTags(file.path);
        this.renderTags();
      }
    }));
    this.registerEvent(this.app.vault.on("rename", (file, oldPath) => {
      if (file instanceof import_obsidian.TFile && file.extension === "md") {
        const tags = this.tagsByFile.get(oldPath);
        if (tags) {
          this.tagsByFile.set(file.path, tags);
          this.tagsByFile.delete(oldPath);
        }
      }
    }));
    this.registerEvent(this.app.workspace.on("flat-tag-view:settings-updated", () => {
      this.syncCutoffControlsFromSettings();
      this.renderTags();
    }));
  }
  async onClose() {
    this.contentEl.empty();
  }
  async loadTags() {
    this.allTags.clear();
    this.tagsByFile.clear();
    const files = this.app.vault.getMarkdownFiles();
    for (const file of files) {
      const fileTags = this.getFileTags(file);
      this.tagsByFile.set(file.path, fileTags);
      fileTags.forEach((tag) => this.allTags.set(tag, (this.allTags.get(tag) || 0) + 1));
    }
    this.renderTags();
  }
  updateFileTags(file) {
    const oldTagsArr = this.tagsByFile.get(file.path) || [];
    const newTagsArr = this.getFileTags(file);
    const oldSorted = [...oldTagsArr].sort().join(",");
    const newSorted = [...newTagsArr].sort().join(",");
    if (oldSorted === newSorted) {
      if (this.selectedTags.size > 0 && this.searchMode !== "note") {
        const selectedArr = Array.from(this.selectedTags);
        if (selectedArr.every((t) => oldTagsArr.includes(t))) {
          this.renderTags();
        }
      }
      return;
    }
    oldTagsArr.forEach((tag) => {
      const count = (this.allTags.get(tag) || 0) - 1;
      if (count <= 0)
        this.allTags.delete(tag);
      else
        this.allTags.set(tag, count);
    });
    newTagsArr.forEach((tag) => this.allTags.set(tag, (this.allTags.get(tag) || 0) + 1));
    this.tagsByFile.set(file.path, newTagsArr);
    this.renderTags();
  }
  removeFileTags(filePath) {
    const oldTags = this.tagsByFile.get(filePath);
    if (!oldTags)
      return;
    oldTags.forEach((tag) => {
      const count = (this.allTags.get(tag) || 0) - 1;
      if (count <= 0)
        this.allTags.delete(tag);
      else
        this.allTags.set(tag, count);
    });
    this.tagsByFile.delete(filePath);
  }
  async renderTags() {
    var _a;
    this.sortAzBtn.toggleClass("is-active", this.currentSort === "az");
    this.sortCountBtn.toggleClass("is-active", this.currentSort === "count");
    const currentRenderId = ++this.renderId;
    const filteredTags = await this.getFilteredTagsAsync();
    if (currentRenderId !== this.renderId)
      return;
    this.tagContainer.empty();
    const pinned = /* @__PURE__ */ new Map();
    const normal = /* @__PURE__ */ new Map();
    const pinnedSet = new Set((_a = this.plugin.settings.pinnedTags) != null ? _a : []);
    filteredTags.forEach((count, tag) => {
      if (pinnedSet.has(tag))
        pinned.set(tag, count);
      else
        normal.set(tag, count);
    });
    if (pinned.size > 0) {
      const pinContainer = this.tagContainer.createDiv({ cls: "flat-tag-pinned-section" });
      const pinnedIcon = pinContainer.createSpan({ cls: "flat-tag-letter" });
      (0, import_obsidian.setIcon)(pinnedIcon, "pin");
      Array.from(pinned.entries()).sort((a, b) => a[0].localeCompare(b[0], "pl")).forEach(([tag, count]) => this.createTagElement(tag, count, pinContainer));
      this.tagContainer.createDiv({ cls: "flat-tag-separator" });
    }
    let sortedTags = Array.from(normal.entries());
    if (this.currentSort === "az") {
      const collator = new Intl.Collator("pl", { numeric: true, sensitivity: "base" });
      sortedTags.sort((a, b) => {
        const charA = Array.from(a[0])[0] || "";
        const charB = Array.from(b[0])[0] || "";
        const isLetterA = /^\p{L}$/u.test(charA);
        const isLetterB = /^\p{L}$/u.test(charB);
        if (!isLetterA && isLetterB)
          return -1;
        if (isLetterA && !isLetterB)
          return 1;
        return collator.compare(a[0], b[0]);
      });
      let currentHeader = "";
      for (const [tag, count] of sortedTags) {
        const firstChar = (Array.from(tag)[0] || "").toUpperCase();
        const isLetter = /^\p{L}$/u.test(firstChar);
        const headerToUse = isLetter ? firstChar : "OTHER";
        if (headerToUse !== currentHeader) {
          currentHeader = headerToUse;
          if (currentHeader !== "OTHER") {
            const letterEl = this.tagContainer.createSpan({ cls: "flat-tag-letter" });
            letterEl.setText(currentHeader);
          }
        }
        this.createTagElement(tag, count, this.tagContainer);
      }
    } else {
      sortedTags.sort((a, b) => {
        if (b[1] !== a[1])
          return b[1] - a[1];
        return a[0].localeCompare(b[0], "pl");
      });
      sortedTags.forEach(([tag, count]) => this.createTagElement(tag, count, this.tagContainer));
    }
  }
  createTagElement(tag, count, parentEl) {
    var _a;
    const tagEl = parentEl.createSpan({ cls: "flat-tag" });
    if (this.selectedTags.has(tag))
      tagEl.addClass("flat-tag-selected");
    else if (this.excludedTags.has(tag))
      tagEl.addClass("flat-tag-excluded");
    if (((_a = this.plugin.settings.pinnedTags) != null ? _a : []).includes(tag))
      tagEl.addClass("flat-tag-pinned");
    tagEl.setText(`#${tag} (${count})`);
    tagEl.style.userSelect = "none";
    tagEl.style.webkitUserSelect = "none";
    const handleTagInteraction = async (isMultiSelect, isExclude, isPin) => {
      var _a2;
      if (isPin) {
        const list = (_a2 = this.plugin.settings.pinnedTags) != null ? _a2 : [];
        this.plugin.settings.pinnedTags = list.includes(tag) ? list.filter((t) => t !== tag) : [...list, tag];
        await this.plugin.saveSettings();
        this.renderTags();
        return;
      }
      if (isExclude) {
        if (this.excludedTags.has(tag))
          this.excludedTags.delete(tag);
        else {
          this.excludedTags.add(tag);
          this.selectedTags.delete(tag);
        }
      } else if (isMultiSelect) {
        if (this.selectedTags.has(tag))
          this.selectedTags.delete(tag);
        else {
          this.selectedTags.add(tag);
          this.excludedTags.delete(tag);
        }
      } else {
        if (this.selectedTags.size === 1 && this.selectedTags.has(tag))
          this.selectedTags.clear();
        else {
          this.selectedTags.clear();
          this.excludedTags.clear();
          this.selectedTags.add(tag);
        }
      }
      if (this.selectedTags.has(tag)) {
        tagEl.addClass("flat-tag-selected");
        tagEl.removeClass("flat-tag-excluded");
      } else if (this.excludedTags.has(tag)) {
        tagEl.addClass("flat-tag-excluded");
        tagEl.removeClass("flat-tag-selected");
      } else {
        tagEl.removeClass("flat-tag-selected");
        tagEl.removeClass("flat-tag-excluded");
      }
      this.renderTags();
      void this.updateSearch();
    };
    let touchHandled = false;
    let touchStartX = 0;
    let touchStartY = 0;
    let isSwiping = false;
    let longPressTriggered = false;
    tagEl.addEventListener("click", (e) => {
      if (touchHandled) {
        touchHandled = false;
        return;
      }
      e.preventDefault();
      void handleTagInteraction(!!(e.ctrlKey || e.metaKey), !!e.shiftKey, !!e.altKey);
    });
    tagEl.addEventListener("contextmenu", (e) => {
      if (import_obsidian.Platform.isMobile) {
        e.preventDefault();
        return;
      }
      e.preventDefault();
      const menu = new import_obsidian.Menu();
      const isMuted = tag.startsWith("%");
      const actionName = isMuted ? "Global Un-Mute" : "Global Mute";
      const targetTag = isMuted ? tag.slice(1) : `%${tag}`;
      menu.addItem((item) => {
        item.setTitle(`${actionName} to #${targetTag}`).setIcon("alert-triangle").onClick(() => {
          new GlobalMuteConfirmModal(this.app, tag, async () => {
            await this.executeGlobalMute(tag);
          }).open();
        });
      });
      menu.showAtMouseEvent(e);
    });
    tagEl.addEventListener("touchstart", (e) => {
      const touch = e.touches[0];
      touchStartX = touch.clientX;
      touchStartY = touch.clientY;
      isSwiping = false;
      longPressTriggered = false;
      touchHandled = false;
      if (this.touchTimer)
        window.clearTimeout(this.touchTimer);
      this.touchTimer = window.setTimeout(() => {
        this.touchTimer = null;
        if (!isSwiping) {
          longPressTriggered = true;
          touchHandled = true;
          void handleTagInteraction(true, false, false);
        }
      }, 500);
    }, { passive: true });
    tagEl.addEventListener("touchmove", (e) => {
      const touch = e.touches[0];
      const dx = touch.clientX - touchStartX;
      const dy = touch.clientY - touchStartY;
      if (!isSwiping) {
        if (Math.abs(dx) > 10 && Math.abs(dx) > Math.abs(dy)) {
          if (this.touchTimer) {
            window.clearTimeout(this.touchTimer);
            this.touchTimer = null;
          }
          isSwiping = true;
        } else if (Math.abs(dy) > 10) {
          if (this.touchTimer) {
            window.clearTimeout(this.touchTimer);
            this.touchTimer = null;
          }
          return;
        }
      }
      if (isSwiping && dx < 0) {
        e.preventDefault();
        const capped = Math.max(dx, -90);
        tagEl.style.transform = `translateX(${capped}px)`;
        tagEl.style.opacity = String(0.5 + Math.abs(capped) / 90 * 0.5);
      }
    }, { passive: false });
    tagEl.addEventListener("touchend", (e) => {
      const touch = e.changedTouches[0];
      const dx = touch.clientX - touchStartX;
      tagEl.style.transition = "transform 0.2s ease, opacity 0.2s ease";
      tagEl.style.transform = "";
      tagEl.style.opacity = "";
      setTimeout(() => {
        tagEl.style.transition = "";
      }, 220);
      if (isSwiping) {
        isSwiping = false;
        touchHandled = true;
        if (dx <= -60)
          void handleTagInteraction(false, false, true);
        return;
      }
      if (longPressTriggered) {
        longPressTriggered = false;
        return;
      }
      if (this.touchTimer) {
        window.clearTimeout(this.touchTimer);
        this.touchTimer = null;
      }
    }, { passive: true });
    tagEl.addEventListener("touchcancel", () => {
      isSwiping = false;
      longPressTriggered = false;
      touchHandled = false;
      if (this.touchTimer) {
        window.clearTimeout(this.touchTimer);
        this.touchTimer = null;
      }
      tagEl.style.transition = "transform 0.2s ease, opacity 0.2s ease";
      tagEl.style.transform = "";
      tagEl.style.opacity = "";
      setTimeout(() => {
        tagEl.style.transition = "";
      }, 220);
    }, { passive: true });
  }
  // ── Execute Global Mute logic ───────────────────────────────────────────
  async executeGlobalMute(tag) {
    const isCurrentlyMuted = tag.startsWith("%");
    const targetTagWord = isCurrentlyMuted ? tag.slice(1) : `%${tag}`;
    const escapedTag = tag.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
    const tagRegex = new RegExp(`#${escapedTag}(?![\\p{L}\\p{N}_\\-%])`, "gu");
    let filesModified = 0;
    const filesToProcess = [];
    this.tagsByFile.forEach((tagsArr, filePath) => {
      if (tagsArr.includes(tag)) {
        filesToProcess.push(filePath);
      }
    });
    new import_obsidian.Notice(`Globally replacing #${tag}...`);
    for (const filePath of filesToProcess) {
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian.TFile) {
        await this.app.vault.process(file, (data) => {
          const newData = data.replace(tagRegex, `#${targetTagWord}`);
          if (data !== newData)
            filesModified++;
          return newData;
        });
      }
    }
    new import_obsidian.Notice(`Success: Replaced #${tag} with #${targetTagWord} in ${filesModified} file(s).`);
    this.selectedTags.delete(tag);
    this.excludedTags.delete(tag);
    this.renderTags();
    void this.updateSearch();
  }
  // ─────────────────────────────────────────────────────────────────────────────
  async getFilteredTagsAsync() {
    var _a, _b, _c;
    let filtered = /* @__PURE__ */ new Map();
    if (this.selectedTags.size === 0) {
      filtered = new Map(this.allTags);
    } else {
      const selectedArr = Array.from(this.selectedTags);
      const matchingFiles = [];
      this.tagsByFile.forEach((tagsArr, filePath) => {
        if (selectedArr.every((t) => tagsArr.includes(t)))
          matchingFiles.push(filePath);
      });
      if (this.searchMode === "note") {
        for (const filePath of matchingFiles) {
          const tags = this.tagsByFile.get(filePath);
          if (!tags)
            continue;
          for (const t of tags)
            filtered.set(t, (filtered.get(t) || 0) + 1);
        }
      } else {
        for (const filePath of matchingFiles) {
          const file = this.app.vault.getAbstractFileByPath(filePath);
          if (!(file instanceof import_obsidian.TFile))
            continue;
          const content = await this.app.vault.cachedRead(file);
          const lines = content.split(/\r?\n/);
          for (const line of lines) {
            const lower = line.toLowerCase();
            if (this.searchMode === "task" && !lower.includes("- ["))
              continue;
            if (this.searchMode === "task-todo" && !lower.includes("- [ ]"))
              continue;
            if (this.searchMode === "task-done" && !lower.includes("- [x"))
              continue;
            const lineTags = /* @__PURE__ */ new Set();
            const tagRegex = /#(?!%)([^\s#]+)/g;
            let m;
            while ((m = tagRegex.exec(lower)) !== null)
              lineTags.add(m[1]);
            const hasAll = selectedArr.every(
              (sel) => Array.from(lineTags).some((t) => t.toLowerCase() === sel.toLowerCase())
            );
            if (!hasAll)
              continue;
            for (const t of lineTags)
              filtered.set(t, (filtered.get(t) || 0) + 1);
          }
        }
      }
    }
    for (const t of this.selectedTags)
      if (!filtered.has(t))
        filtered.set(t, this.allTags.get(t) || 0);
    for (const t of this.excludedTags)
      if (!filtered.has(t))
        filtered.set(t, this.allTags.get(t) || 0);
    const cutoffEnabled = (_a = this.plugin.settings.frequencyCutoffEnabled) != null ? _a : false;
    const cutoff = cutoffEnabled ? (_b = this.plugin.settings.frequencyCutoff) != null ? _b : 0 : 0;
    const pinned = new Set((_c = this.plugin.settings.pinnedTags) != null ? _c : []);
    if (cutoff > 0) {
      const next = /* @__PURE__ */ new Map();
      filtered.forEach((count, tag) => {
        if (count >= cutoff || this.selectedTags.has(tag) || pinned.has(tag))
          next.set(tag, count);
      });
      filtered = next;
    }
    if (this.tagSearchText) {
      const q = this.tagSearchText.toLowerCase();
      const next = /* @__PURE__ */ new Map();
      filtered.forEach((count, tag) => {
        if (tag.toLowerCase().includes(q) || this.selectedTags.has(tag) || this.excludedTags.has(tag))
          next.set(tag, count);
      });
      filtered = next;
    }
    return filtered;
  }
  async updateSearch(options) {
    var _a, _b, _c;
    const workspace = this.app.workspace;
    const prevLeaf = workspace.activeLeaf;
    const isTouchContext = import_obsidian.Platform.isMobile || this.lastInteractionWasTouch;
    const revealSearch = (_a = options == null ? void 0 : options.revealSearch) != null ? _a : !isTouchContext;
    const createIfMissing = (_b = options == null ? void 0 : options.createIfMissing) != null ? _b : !isTouchContext;
    let searchLeaf = workspace.getLeavesOfType("search")[0];
    if (!searchLeaf && createIfMissing) {
      const rightLeaf = workspace.getRightLeaf(true);
      if (rightLeaf) {
        searchLeaf = rightLeaf;
        await searchLeaf.setViewState({ type: "search", active: false });
      }
    }
    if (searchLeaf && revealSearch)
      workspace.revealLeaf(searchLeaf);
    if (prevLeaf)
      workspace.setActiveLeaf(prevLeaf, { focus: true });
    this.lastInteractionWasTouch = false;
    if (!searchLeaf)
      return;
    const selected = Array.from(this.selectedTags);
    const excluded = Array.from(this.excludedTags);
    const searchView = searchLeaf.view;
    if (selected.length === 0 && excluded.length === 0) {
      const clearBtn = (_c = searchView == null ? void 0 : searchView.containerEl) == null ? void 0 : _c.querySelector(".search-input-clear-button");
      if (clearBtn)
        clearBtn.dispatchEvent(new MouseEvent("click", { bubbles: true, cancelable: false }));
      else if (typeof (searchView == null ? void 0 : searchView.setQuery) === "function")
        searchView.setQuery("");
      return;
    }
    let query = "";
    if (this.searchMode === "note") {
      query = [
        ...selected.map((t) => `tag:#${t}`),
        ...excluded.map((t) => `-tag:#${t}`)
      ].join(" ");
    } else {
      const prefix = this.searchMode === "line" ? "line:(" : this.searchMode === "task" ? "task:(" : this.searchMode === "task-todo" ? "task-todo:(" : "task-done:(";
      const body = [
        ...selected.map((t) => `#${t}`),
        ...excluded.map((t) => `-#${t}`)
      ].join(" ");
      query = `${prefix}${body})`;
    }
    if (typeof (searchView == null ? void 0 : searchView.setQuery) === "function") {
      searchView.setQuery(query);
      setTimeout(() => searchView.setQuery(query), 150);
    }
  }
  getFileTags(file) {
    var _a;
    const cache = this.app.metadataCache.getFileCache(file);
    if (!cache)
      return [];
    const tags = [];
    if (cache.tags)
      cache.tags.forEach((t) => tags.push(t.tag.replace(/^#/, "")));
    const fm = (_a = cache.frontmatter) == null ? void 0 : _a.tags;
    if (typeof fm === "string") {
      fm.split(",").map((s) => s.trim()).filter(Boolean).forEach((t) => tags.push(t.replace(/^#/, "")));
    } else if (Array.isArray(fm)) {
      fm.forEach((t) => {
        if (t)
          tags.push(String(t).replace(/^#/, ""));
      });
    }
    return Array.from(new Set(tags));
  }
  syncCutoffControlsFromSettings() {
    var _a, _b;
    const enabled = (_a = this.plugin.settings.frequencyCutoffEnabled) != null ? _a : false;
    const cutoff = (_b = this.plugin.settings.frequencyCutoff) != null ? _b : 0;
    this.cutoffInput.value = String(cutoff);
    this.cutoffInput.disabled = !enabled;
    this.cutoffToggleBtn.toggleClass("is-enabled", enabled);
    this.cutoffToggleBtn.toggleClass("is-disabled", !enabled);
    (0, import_obsidian.setIcon)(this.cutoffToggleBtn, enabled ? "eye" : "eye-off");
  }
  updateModeUI(skipSearch = false) {
    this.sortAzBtn.toggleClass("is-active", this.currentSort === "az");
    this.sortCountBtn.toggleClass("is-active", this.currentSort === "count");
    this.scopeBtn.removeClass("is-active");
    this.taskBtn.removeClass("is-active");
    if (this.searchMode === "note") {
      this.scopeBtn.setText("NOTE");
      this.scopeBtn.addClass("is-active");
    } else if (this.searchMode === "line") {
      this.scopeBtn.setText("LINE");
      this.scopeBtn.addClass("is-active");
    } else if (this.searchMode === "task") {
      this.taskBtn.setText("TASK-ALL");
      this.taskBtn.addClass("is-active");
    } else if (this.searchMode === "task-todo") {
      this.taskBtn.setText("TASK-TODO");
      this.taskBtn.addClass("is-active");
    } else if (this.searchMode === "task-done") {
      this.taskBtn.setText("TASK-DONE");
      this.taskBtn.addClass("is-active");
    }
    if (["note", "line"].includes(this.searchMode)) {
      if (!["TASK-ALL", "TASK-TODO", "TASK-DONE"].includes(this.taskBtn.innerText))
        this.taskBtn.setText("TASK-ALL");
    } else {
      if (!["NOTE", "LINE"].includes(this.scopeBtn.innerText))
        this.scopeBtn.setText("NOTE");
    }
    if (!skipSearch)
      void this.updateSearch();
    if (this.tagContainer)
      this.renderTags();
  }
  toggleScopeMode() {
    if (["note", "line"].includes(this.searchMode))
      this.searchMode = this.searchMode === "note" ? "line" : "note";
    else
      this.searchMode = this.scopeBtn.innerText === "LINE" ? "line" : "note";
    this.updateModeUI();
  }
  toggleTaskMode() {
    if (this.searchMode === "task")
      this.searchMode = "task-todo";
    else if (this.searchMode === "task-todo")
      this.searchMode = "task-done";
    else if (this.searchMode === "task-done")
      this.searchMode = "task";
    else
      this.searchMode = "task";
    this.updateModeUI();
  }
  toggleSort() {
    this.currentSort = this.currentSort === "az" ? "count" : "az";
    this.updateModeUI(true);
  }
  clearTagSelections() {
    this.selectedTags.clear();
    this.excludedTags.clear();
    this.renderTags();
    void this.updateSearch({ revealSearch: false, createIfMissing: false });
  }
  clearSearchBox() {
    const searchBox = this.contentEl.querySelector(".flat-tag-search-input");
    if (searchBox)
      searchBox.value = "";
    this.tagSearchText = "";
    this.renderTags();
  }
  selectSingleTag(tag) {
    this.selectedTags.clear();
    this.excludedTags.clear();
    const cleanTag = tag.replace(/^#/, "");
    this.selectedTags.add(cleanTag);
    this.renderTags();
    void this.updateSearch({ revealSearch: true, createIfMissing: true });
  }
};

// styles.ts
var getStyles = () => {
  return `
.workspace-split.mod-root .view-content.flat-tag-view {
	display: flex;
	flex-direction: column;
	justify-content: flex-start;
	align-items: stretch;
	height: 100%;
	padding: 0;
	margin: 0;
}

.flat-tag-container {
	display: flex;
	flex-direction: column;
	align-items: flex-start;
	justify-content: flex-start;
	width: 100%;
	height: 100%;
	box-sizing: border-box;
	padding: 0;
	margin: 0;
}

.flat-tag-sort-container {
	display: flex;
	justify-content: space-between;
	align-items: center;
	flex-shrink: 0;
	padding: 8px;
	background-color: var(--background-primary);
	border-bottom: 1px solid var(--background-modifier-border);
	width: 100%;
	flex-wrap: wrap;
	gap: 8px;
}

.flat-tag-buttons-section {
	display: flex;
	gap: 6px;
	align-items: center;
	flex-wrap: wrap;
}

.flat-tag-mode-button {
	cursor: pointer;
	padding: 4px 10px;
	font-size: 0.8em;
	font-weight: 500;
	border-radius: var(--radius-s);
	color: var(--text-muted);
	background-color: var(--background-modifier-form-field);
	border: 1px solid var(--background-modifier-border);
	transition: all 0.15s ease-in-out;
	user-select: none;
	display: flex;
	align-items: center;
	justify-content: center;
	min-width: 65px;
}

.flat-tag-mode-button:hover {
	color: var(--text-normal);
	background-color: var(--background-modifier-hover);
	border-color: var(--background-modifier-border-hover);
}

.flat-tag-mode-button.is-active {
	background-color: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
	box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
}

.flat-tag-mode-button.is-active:hover {
	background-color: var(--interactive-accent-hover);
	border-color: var(--interactive-accent-hover);
}

.flat-tag-search-section {
	display: flex;
	align-items: center;
	gap: 4px;
	margin-left: auto;
	background-color: var(--background-secondary);
	border-radius: 4px;
	padding: 2px 8px;
	flex-grow: 1;
	max-width: 220px;
}

.flat-tag-search-input {
	background: transparent;
	border: none;
	color: var(--text-normal);
	width: 100%;
	height: 24px;
	font-size: 0.9em;
}

.flat-tag-search-input:focus {
	outline: none;
	box-shadow: none;
}

.flat-tag-search-clear-button {
	cursor: pointer;
	color: var(--text-muted);
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 0.8em;
}

.flat-tag-search-clear-button:hover {
	color: var(--text-normal);
}

.flat-tag-sort-button,
.flat-tag-clear-button {
	cursor: pointer;
	padding: 4px;
	border-radius: 4px;
	display: flex;
	align-items: center;
	justify-content: center;
}

.flat-tag-sort-button:hover,
.flat-tag-clear-button:hover {
	background-color: var(--interactive-hover);
}

.flat-tag-sort-button.is-active {
	background-color: var(--interactive-accent);
	color: var(--text-on-accent);
	box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
}

.flat-tag-sort-button.is-active:hover {
	background-color: var(--interactive-accent-hover);
}

/* Cutoff controls */
.flat-tag-cutoff-spacer {
	flex: 0 0 8px;
	width: 8px;
	height: 1px;
}

.flat-tag-cutoff-section {
	display: flex;
	align-items: center;
	gap: 6px;
	padding: 2px 8px;
	border-radius: var(--radius-s);
	border: 1px solid var(--background-modifier-border);
	background: linear-gradient(180deg, var(--background-secondary) 0%, var(--background-primary) 100%);
	box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.04);
	height: 28px;
}

.flat-tag-cutoff-toggle {
	cursor: pointer;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	color: var(--text-muted);
	padding: 2px;
	border-radius: var(--radius-s);
}

.flat-tag-cutoff-toggle:hover {
	color: var(--text-normal);
	background-color: var(--background-modifier-hover);
}

.flat-tag-cutoff-toggle.is-enabled {
	color: var(--interactive-accent);
}

.flat-tag-cutoff-toggle.is-disabled {
	opacity: 0.7;
}

.flat-tag-cutoff-input {
	width: 52px;
	height: 22px;
	border: none;
	background: transparent;
	padding: 0;
	margin: 0;
	text-align: center;
	font-size: 0.9em;
	color: var(--text-normal);
}

.flat-tag-cutoff-input:focus {
	outline: none;
	box-shadow: none;
}

.flat-tag-cutoff-input:disabled {
	color: var(--text-faint);
	cursor: not-allowed;
}

.flat-tag-list {
	display: flex;
	flex-wrap: wrap;
	align-content: flex-start;
	overflow-y: auto;
	flex: 1;
	line-height: 1.5em;
	padding: 8px;
	width: 100%;
}

.flat-tag {
	display: inline-block;
	padding: 2px 6px;
	margin: 2px;
	border-radius: 4px;
	cursor: pointer;
	background-color: var(--tag-background);
	color: var(--tag-color);
	transition: background-color 0.1s;
}

.flat-tag:hover {
	background-color: var(--tag-background-hover);
}

.flat-tag-selected {
	font-weight: bold;
	background-color: var(--interactive-accent);
	color: var(--text-on-accent);
}

.flat-tag-excluded {
	font-weight: bold;
	background-color: var(--color-red);
	color: var(--text-on-accent);
}

.flat-tag-letter {
	display: inline-flex;
	font-weight: bold;
	font-size: 1.2em;
	margin: 2px;
	padding: 2px 6px;
	border-radius: 4px;
	background-color: var(--background-secondary);
	color: var(--text-normal);
	align-items: center;
	justify-content: center;
	min-width: 24px;
}

.flat-tag-pinned-section {
	width: 100%;
	display: flex;
	flex-wrap: wrap;
	align-items: center;
	background-color: color-mix(in srgb, var(--interactive-accent) 10%, var(--background-primary));
	border: 1px solid color-mix(in srgb, var(--interactive-accent) 25%, transparent);
	padding: 4px;
	border-radius: var(--radius-s);
	margin-bottom: 4px;
}

.flat-tag-separator {
	width: 100%;
	height: 1px;
	background-color: var(--background-modifier-border);
	margin: 4px 0 8px 0;
}

.flat-tag-pinned {
	border: 1px solid var(--interactive-accent);
}


/* Glow reminder when list is filtered:
   input is not focused and not empty (placeholder not shown). */
.flat-tag-search-input:not(:focus):not(:placeholder-shown) {
  border-color: var(--interactive-accent);
  box-shadow:
    0 0 0 2px color-mix(in srgb, var(--interactive-accent) 35%, transparent),
    0 0 14px color-mix(in srgb, var(--interactive-accent) 25%, transparent);
  animation: ftv-search-pulse 2.2s ease-in-out infinite;
}

@keyframes ftv-search-pulse {
  0%, 100% {
    box-shadow:
      0 0 0 2px color-mix(in srgb, var(--interactive-accent) 28%, transparent),
      0 0 10px color-mix(in srgb, var(--interactive-accent) 18%, transparent);
  }
  50% {
    box-shadow:
      0 0 0 2px color-mix(in srgb, var(--interactive-accent) 45%, transparent),
      0 0 18px color-mix(in srgb, var(--interactive-accent) 35%, transparent);
  }
}

/* Theme tuning */
body.theme-light .flat-tag-search-input:not(:focus):not(:placeholder-shown) {
  animation-duration: 2.6s;
}

body.theme-dark .flat-tag-search-input:not(:focus):not(:placeholder-shown) {
  animation-duration: 2.0s;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .flat-tag-search-input:not(:focus):not(:placeholder-shown) {
    animation: none;
  }
}

`;
};

// settings.ts
var import_obsidian2 = require("obsidian");
var DEFAULT_SETTINGS = {
  pinnedTags: [],
  frequencyCutoff: 0,
  frequencyCutoffEnabled: false,
  altClickTagMode: "start-line",
  showPlacementInStatusBar: true,
  mobileLongPressEnabled: true,
  mobileLongPressMs: 1e3
};
var FlatTagSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian2.Setting(containerEl).setName("Alt-click tag placement").setDesc("When creating a tag, where it should go.").addDropdown(
      (dd) => dd.addOption("start-line", "Put tag at start of line").addOption("in-place", "Turn word into tag in place").addOption("end-line", "Put tag at end of line").setValue(this.plugin.settings.altClickTagMode).onChange(async (value) => {
        this.plugin.settings.altClickTagMode = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian2.Setting(containerEl).setName("Show placement of newly created tags in status bar").setDesc("Displays SOL / INP / EOL in the Obsidian status bar.").addToggle(
      (t) => t.setValue(this.plugin.settings.showPlacementInStatusBar).onChange(async (val) => {
        this.plugin.settings.showPlacementInStatusBar = val;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian2.Setting(containerEl).setName("Frequency cutoff").setDesc("Hide tags that appear fewer times than this number in the vault.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.frequencyCutoffEnabled).onChange(async (value) => {
        this.plugin.settings.frequencyCutoffEnabled = value;
        await this.plugin.saveSettings();
      })
    ).addText(
      (text) => text.setPlaceholder("0").setValue(this.plugin.settings.frequencyCutoff.toString()).onChange(async (value) => {
        const parsed = parseInt(value, 10);
        if (!isNaN(parsed) && parsed >= 0) {
          this.plugin.settings.frequencyCutoff = parsed;
          await this.plugin.saveSettings();
        }
      })
    );
    new import_obsidian2.Setting(containerEl).setName("Clear pinned tags").setDesc("Removes all pinned tags from the top of the flat tag list.").addButton(
      (btn) => btn.setButtonText("Clear pinned").onClick(async () => {
        this.plugin.settings.pinnedTags = [];
        await this.plugin.saveSettings();
      })
    );
  }
};

// main.ts
var FlatTagPlugin = class extends import_obsidian3.Plugin {
  constructor() {
    super(...arguments);
    this.statusBarEl = null;
  }
  async onload() {
    await this.loadSettings();
    this.registerView(VIEW_TYPE, (leaf) => new FlatTagView(leaf, this));
    this.addRibbonIcon("tag", "Open Flat Tags", () => void this.activateView());
    this.addSettingTab(new FlatTagSettingTab(this.app, this));
    this.addCommand({
      id: "open-flat-tags",
      name: "Open Flat Tags",
      callback: () => void this.activateView()
    });
    this.addCommand({
      id: "toggle-flat-tag-sort",
      name: "Toggle Flat Tag Sort (A-Z/Usage)",
      callback: () => {
        var _a;
        const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0]) == null ? void 0 : _a.view;
        if (view && typeof view.toggleSort === "function")
          view.toggleSort();
      }
    });
    this.addCommand({
      id: "clear-flat-tag-selections",
      name: "Clear Flat Tag Selections",
      callback: () => {
        var _a;
        const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0]) == null ? void 0 : _a.view;
        if (view && typeof view.clearTagSelections === "function")
          view.clearTagSelections();
      }
    });
    this.addCommand({
      id: "clear-flat-tag-search",
      name: "Clear Flat Tag Search Box",
      callback: () => {
        var _a;
        const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0]) == null ? void 0 : _a.view;
        if (view && typeof view.clearSearchBox === "function")
          view.clearSearchBox();
      }
    });
    this.addCommand({
      id: "toggle-flat-tag-scope-mode",
      name: "Toggle Flat Tag Mode (Note/Line)",
      callback: () => {
        var _a;
        const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0]) == null ? void 0 : _a.view;
        if (view && typeof view.toggleScopeMode === "function")
          view.toggleScopeMode();
      }
    });
    this.addCommand({
      id: "toggle-flat-tag-task-mode",
      name: "Cycle Flat Tag Task Mode (All/Todo/Done)",
      callback: () => {
        var _a;
        const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0]) == null ? void 0 : _a.view;
        if (view && typeof view.toggleTaskMode === "function")
          view.toggleTaskMode();
      }
    });
    this.addCommand({
      id: "cycle-flat-tag-placement",
      name: "Cycle Tag Placement (SOL / INP / EOL)",
      callback: () => void this.cycleTagPlacement()
    });
    this.addCommand({
      id: "set-flat-tag-placement-sol",
      name: "Set Tag Placement to Start of Line (SOL)",
      callback: async () => {
        this.settings.altClickTagMode = "start-line";
        await this.saveSettings();
        new import_obsidian3.Notice("Tag placement: Start of line");
      }
    });
    this.addCommand({
      id: "set-flat-tag-placement-inp",
      name: "Set Tag Placement to In Place (INP)",
      callback: async () => {
        this.settings.altClickTagMode = "in-place";
        await this.saveSettings();
        new import_obsidian3.Notice("Tag placement: In place");
      }
    });
    this.addCommand({
      id: "set-flat-tag-placement-eol",
      name: "Set Tag Placement to End of Line (EOL)",
      callback: async () => {
        this.settings.altClickTagMode = "end-line";
        await this.saveSettings();
        new import_obsidian3.Notice("Tag placement: End of line");
      }
    });
    this.addStyle();
    this.statusBarEl = this.addStatusBarItem();
    this.updateStatusBar();
    this.statusBarEl.addClass("mod-clickable");
    this.statusBarEl.addEventListener("click", () => void this.cycleTagPlacement());
    this.registerDomEvent(document, "click", (evt) => {
      if (!evt.altKey)
        return;
      if (evt.shiftKey && (evt.ctrlKey || evt.metaKey)) {
        evt.preventDefault();
        evt.stopPropagation();
        void this.handleEditorTrigger({ kind: "local-mute", mouseEvent: evt });
        return;
      }
      if (evt.shiftKey && !evt.ctrlKey && !evt.metaKey) {
        evt.preventDefault();
        evt.stopPropagation();
        void this.handleEditorTrigger({ kind: "strip-hash", mouseEvent: evt });
        return;
      }
      if (!evt.shiftKey && (evt.ctrlKey || evt.metaKey)) {
        evt.preventDefault();
        evt.stopPropagation();
        void this.handleEditorTrigger({ kind: "drill-down", mouseEvent: evt });
        return;
      }
      if (!evt.shiftKey && !evt.ctrlKey && !evt.metaKey) {
        evt.preventDefault();
        void this.handleEditorTrigger({ kind: "alt-click", mouseEvent: evt });
        return;
      }
    }, { capture: true });
    this.registerMobileLongPress();
  }
  onunload() {
    this.app.workspace.detachLeavesOfType(VIEW_TYPE);
    if (this.statusBarEl) {
      this.statusBarEl.remove();
      this.statusBarEl = null;
    }
  }
  async cycleTagPlacement() {
    const modes = ["start-line", "in-place", "end-line"];
    const current = this.settings.altClickTagMode;
    const next = modes[(modes.indexOf(current) + 1) % modes.length];
    this.settings.altClickTagMode = next;
    await this.saveSettings();
    const labels = {
      "start-line": "Start of line",
      "in-place": "In place",
      "end-line": "End of line"
    };
    new import_obsidian3.Notice(`Tag placement: ${labels[next]}`);
  }
  // ── Status bar ──────────────────────────────────────────────────────────────
  updateStatusBar() {
    var _a, _b;
    if (!this.statusBarEl)
      return;
    const show = (_a = this.settings.showPlacementInStatusBar) != null ? _a : true;
    if (!show) {
      this.statusBarEl.setText("");
      this.statusBarEl.style.display = "none";
      return;
    }
    const labels = {
      "start-line": "SOL",
      "in-place": "INP",
      "end-line": "EOL"
    };
    const modeLabel = (_b = labels[this.settings.altClickTagMode]) != null ? _b : "SOL";
    this.statusBarEl.setText(`#>${modeLabel}`);
    this.statusBarEl.style.display = "";
  }
  // ── Mobile long press ────────────────────────────────────────────────────────
  registerMobileLongPress() {
    if (!import_obsidian3.Platform.isMobile)
      return;
    let timer = null;
    let startX = 0;
    let startY = 0;
    let cancelled = false;
    let longPressArmed = false;
    const clear = () => {
      if (timer)
        window.clearTimeout(timer);
      timer = null;
      longPressArmed = false;
    };
    this.registerDomEvent(
      document,
      "touchstart",
      (evt) => {
        var _a;
        if (!this.settings.mobileLongPressEnabled)
          return;
        if (evt.touches.length !== 1)
          return;
        cancelled = false;
        longPressArmed = false;
        const t = evt.touches[0];
        startX = t.clientX;
        startY = t.clientY;
        clear();
        const ms = Math.max(250, Math.min(5e3, (_a = this.settings.mobileLongPressMs) != null ? _a : 1e3));
        timer = window.setTimeout(() => {
          timer = null;
          if (cancelled)
            return;
          longPressArmed = true;
        }, ms);
      },
      { passive: true }
    );
    this.registerDomEvent(
      document,
      "touchmove",
      (evt) => {
        if (!timer)
          return;
        const t = evt.touches[0];
        const dx = Math.abs(t.clientX - startX);
        const dy = Math.abs(t.clientY - startY);
        if (dx > 12 || dy > 12) {
          cancelled = true;
          clear();
        }
      },
      { passive: true }
    );
    this.registerDomEvent(
      document,
      "touchend",
      () => {
        const shouldFire = longPressArmed && !cancelled;
        clear();
        if (!shouldFire)
          return;
        void this.handleEditorTrigger({ kind: "mobile-long-press" });
      },
      { passive: true }
    );
    this.registerDomEvent(
      document,
      "touchcancel",
      () => {
        cancelled = true;
        clear();
      },
      { passive: true }
    );
  }
  // ── Trigger entry-point ──────────────────────────────────────────────────────
  async handleEditorTrigger(trigger) {
    const view = this.app.workspace.getActiveViewOfType(import_obsidian3.MarkdownView);
    if (!view)
      return;
    const anyView = view;
    if (typeof anyView.getMode === "function" && anyView.getMode() !== "source")
      return;
    const editor = view.editor;
    if (!editor)
      return;
    if (trigger.kind === "mobile-long-press") {
      const sel = editor.getSelection();
      if (!sel || !sel.trim())
        return;
    }
    const candidate = this.getCandidateWithRange(editor, { preferSelection: import_obsidian3.Platform.isMobile });
    if (!candidate)
      return;
    if (trigger.kind === "drill-down") {
      if (candidate.raw.startsWith("#") && !candidate.raw.startsWith("#%")) {
        await this.activateView();
        setTimeout(() => {
          const ftvLeaf = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0];
          if (ftvLeaf && ftvLeaf.view instanceof FlatTagView) {
            ftvLeaf.view.selectSingleTag(candidate.raw);
          }
        }, 50);
      }
      return;
    }
    if (trigger.kind === "local-mute") {
      if (candidate.raw.startsWith("#") && candidate.range) {
        const currentTag = candidate.raw;
        let newTag = "";
        if (currentTag.startsWith("#%")) {
          newTag = "#" + currentTag.slice(2);
        } else {
          newTag = "#%" + currentTag.slice(1);
        }
        editor.replaceRange(newTag, candidate.range.from, candidate.range.to);
      }
      return;
    }
    if (trigger.kind === "strip-hash") {
      if (candidate.raw.startsWith("#%"))
        return;
      if (!candidate.raw.startsWith("#"))
        return;
      await this.stripHashFromTag(editor, candidate);
      return;
    }
    if (trigger.kind === "alt-click" || trigger.kind === "mobile-long-press") {
      if (candidate.raw.startsWith("#%")) {
        return;
      }
      if (candidate.raw.startsWith("#")) {
        await this.removeTag(editor, candidate);
      } else {
        await this.createTag(editor, this.settings.altClickTagMode, candidate);
      }
    }
  }
  // ── Candidate resolution ─────────────────────────────────────────────────────
  getSelectionRange(editor) {
    var _a, _b;
    const anyEditor = editor;
    const from = (_a = anyEditor.getCursor) == null ? void 0 : _a.call(anyEditor, "from");
    const to = (_b = anyEditor.getCursor) == null ? void 0 : _b.call(anyEditor, "to");
    if (!from || !to)
      return null;
    if (from.line === to.line && from.ch === to.ch)
      return null;
    if (from.line > to.line || from.line === to.line && from.ch > to.ch)
      return { from: to, to: from };
    return { from, to };
  }
  buildSelCandidate(editor, sel, r) {
    const raw = sel.trim();
    if (!raw.startsWith("#") && r.from.ch > 0) {
      const lineText = editor.getLine(r.from.line);
      if (lineText.charAt(r.from.ch - 1) === "#") {
        return {
          raw: "#" + raw,
          range: { from: { line: r.from.line, ch: r.from.ch - 1 }, to: r.to }
        };
      }
    }
    return { raw, range: r };
  }
  getCandidateWithRange(editor, opts) {
    var _a;
    const preferSelection = (_a = opts == null ? void 0 : opts.preferSelection) != null ? _a : true;
    const sel = editor.getSelection();
    const selRange = this.getSelectionRange(editor);
    if (preferSelection && sel && sel.trim() && !/[\r\n]/.test(sel) && selRange) {
      return this.buildSelCandidate(editor, sel, selRange);
    }
    const token = this.getTokenAtCursor(editor);
    if (token)
      return token;
    if (!preferSelection && sel && sel.trim() && !/[\r\n]/.test(sel) && selRange) {
      return this.buildSelCandidate(editor, sel, selRange);
    }
    return null;
  }
  getTokenAtCursor(editor) {
    var _a;
    const cursor = editor.getCursor();
    const lineText = (_a = editor.getLine(cursor.line)) != null ? _a : "";
    if (!lineText)
      return null;
    const isBodyChar = (ch) => /[^\s"'`\]\[{}()=+\\|,<.>!?:;*&^@$#]/u.test(ch);
    let i = cursor.ch;
    if (i >= lineText.length)
      i = lineText.length - 1;
    if (i < 0)
      return null;
    const cur = lineText.charAt(i);
    if (cur === "#") {
      let end = i + 1;
      while (end < lineText.length && isBodyChar(lineText.charAt(end)))
        end++;
      if (end === i + 1)
        return null;
      return {
        raw: lineText.slice(i, end),
        range: { from: { line: cursor.line, ch: i }, to: { line: cursor.line, ch: end } }
      };
    }
    if (isBodyChar(cur)) {
      return this.wordRangeAt(cursor.line, lineText, i);
    }
    if (i > 0 && isBodyChar(lineText.charAt(i - 1))) {
      return this.wordRangeAt(cursor.line, lineText, i - 1);
    }
    return null;
  }
  wordRangeAt(line, lineText, i) {
    const isBodyChar = (ch) => /[^\s"'`\]\[{}()=+\\|,<.>!?:;*&^@$#]/u.test(ch);
    let start = i;
    while (start > 0 && isBodyChar(lineText.charAt(start - 1)))
      start--;
    const hashStart = start > 0 && lineText.charAt(start - 1) === "#" ? start - 1 : start;
    let end = i + 1;
    while (end < lineText.length && isBodyChar(lineText.charAt(end)))
      end++;
    const raw = lineText.slice(hashStart, end);
    if (!raw.trim())
      return null;
    return {
      raw,
      range: { from: { line, ch: hashStart }, to: { line, ch: end } }
    };
  }
  // ── Validation ───────────────────────────────────────────────────────────────
  hasForbiddenChars(raw) {
    const s = raw.trim();
    if (!s)
      return true;
    const body = s.startsWith("#") ? s.slice(1) : s;
    if (body.includes("#"))
      return true;
    return /[!@$^&*()+= <>,.?`~]/.test(body);
  }
  normalizeCandidate(raw) {
    let t = raw.trim();
    if (!t)
      return null;
    if (this.hasForbiddenChars(t))
      return null;
    if (t.startsWith("#"))
      t = t.slice(1);
    if (!t)
      return null;
    if (/^\d+$/.test(t) || t === "%")
      return null;
    if (/\s/.test(t))
      return null;
    return t;
  }
  // ── Tag helpers ──────────────────────────────────────────────────────────────
  tagTokenForPlacement(candidate, mode) {
    const text = mode === "start-line" || mode === "end-line" ? candidate.toLowerCase() : candidate;
    return `#${text}`;
  }
  sortTags(tokens) {
    const uniq = [];
    const seen = /* @__PURE__ */ new Set();
    for (const t of tokens) {
      const key = t.replace(/^#/, "").toLowerCase();
      if (seen.has(key))
        continue;
      seen.add(key);
      uniq.push(t);
    }
    return uniq.sort((a, b) => a.toLowerCase().localeCompare(b.toLowerCase(), "pl"));
  }
  // ── Line parsing ─────────────────────────────────────────────────────────────
  parseLeadingTags(lineText) {
    var _a, _b, _c;
    const indent = ((_a = lineText.match(/^\s*/)) != null ? _a : [""])[0];
    const rest = lineText.slice(indent.length);
    const m = rest.match(/^((?:#[^\s#]+\s+)*)/);
    const tagBlock = (_b = m == null ? void 0 : m[1]) != null ? _b : "";
    const tags = (_c = tagBlock.match(/#[^\s#]+/g)) != null ? _c : [];
    const after = rest.slice(tagBlock.length);
    return { indent, tagBlock, tags, after };
  }
  splitBlockIdSuffix(lineText) {
    var _a;
    const trailingWs = ((_a = lineText.match(/\s*$/)) != null ? _a : [""])[0];
    const noTrail = lineText.slice(0, lineText.length - trailingWs.length);
    const m = noTrail.match(/(\s\^[\p{L}\p{N}_-]+)$/u);
    if (!m)
      return { core: noTrail, blockId: "", trailingWs };
    const blockWithSpace = m[1];
    const core = noTrail.slice(0, noTrail.length - blockWithSpace.length);
    const blockId = blockWithSpace.trim();
    return { core, blockId, trailingWs };
  }
  parseTrailingTags(coreText) {
    var _a;
    const m = coreText.match(/(\s+(?:#[^\s#]+\s*)+)$/);
    if (!m)
      return { before: coreText, tags: [] };
    const tagBlock = m[1];
    const tags = (_a = tagBlock.match(/#[^\s#]+/g)) != null ? _a : [];
    const before = coreText.slice(0, coreText.length - tagBlock.length);
    return { before, tags };
  }
  buildLineWithLeading(indent, tags, after) {
    const afterClean = after.replace(/^\s+/, "");
    const tagBlock = tags.join(" ");
    const body = tagBlock ? afterClean ? `${tagBlock} ${afterClean}` : tagBlock : afterClean;
    return `${indent}${body}`;
  }
  buildLineWithTrailing(before, tags, blockId, trailingWs) {
    const beforeClean = before.replace(/\s+$/, "");
    const tagBlock = tags.join(" ");
    const parts = [];
    if (beforeClean)
      parts.push(beforeClean);
    if (tagBlock)
      parts.push(tagBlock);
    if (blockId)
      parts.push(blockId);
    return `${parts.join(" ")}${trailingWs}`;
  }
  // ── Create / Remove ─────────────────────────────────────────────────────────
  async createTag(editor, mode, candidate) {
    const normalized = this.normalizeCandidate(candidate.raw);
    if (!normalized)
      return;
    const tagToken = this.tagTokenForPlacement(normalized, mode);
    if (mode === "in-place") {
      if (candidate.range)
        editor.replaceRange(tagToken, candidate.range.from, candidate.range.to);
      else
        editor.replaceSelection(tagToken);
      return;
    }
    const line = editor.getCursor().line;
    const lineText = editor.getLine(line);
    if (mode === "start-line") {
      const lead = this.parseLeadingTags(lineText);
      const next2 = this.sortTags([...lead.tags, tagToken]);
      const newLine2 = this.buildLineWithLeading(lead.indent, next2, lead.after);
      editor.replaceRange(newLine2, { line, ch: 0 }, { line, ch: lineText.length });
      return;
    }
    const split = this.splitBlockIdSuffix(lineText);
    const trail = this.parseTrailingTags(split.core);
    const next = this.sortTags([...trail.tags, tagToken]);
    const newLine = this.buildLineWithTrailing(trail.before, next, split.blockId, split.trailingWs);
    editor.replaceRange(newLine, { line, ch: 0 }, { line, ch: lineText.length });
  }
  async stripHashFromTag(editor, candidate) {
    if (!candidate.range)
      return;
    const line = candidate.range.from.line;
    if (candidate.range.to.line !== line)
      return;
    const lineText = editor.getLine(line);
    const fromCh = candidate.range.from.ch;
    const toCh = candidate.range.to.ch;
    const selected = editor.getRange(candidate.range.from, candidate.range.to);
    if (!selected || !selected.startsWith("#"))
      return;
    const beforeTag = lineText.slice(0, fromCh);
    const afterTag = lineText.slice(toCh);
    if (beforeTag.endsWith("[") && afterTag.startsWith(`](${selected})`)) {
      let expandedFrom = fromCh - 1;
      let expandedTo = toCh + 3 + selected.length;
      if (expandedTo < lineText.length && lineText.charAt(expandedTo) === " ")
        expandedTo++;
      else if (expandedFrom > 0 && lineText.charAt(expandedFrom - 1) === " ")
        expandedFrom--;
      editor.replaceRange(selected.slice(1), { line, ch: expandedFrom }, { line, ch: expandedTo });
      return;
    }
    editor.replaceRange(selected.slice(1), candidate.range.from, candidate.range.to);
  }
  async removeTag(editor, candidate) {
    var _a, _b, _c, _d, _e, _f;
    const normalized = this.normalizeCandidate(candidate.raw);
    if (!normalized)
      return;
    const key = normalized.toLowerCase();
    const cursor = editor.getCursor();
    const line = (_c = (_b = (_a = candidate.range) == null ? void 0 : _a.from) == null ? void 0 : _b.line) != null ? _c : cursor.line;
    if (candidate.range && (candidate.range.from.line !== line || candidate.range.to.line !== line))
      return;
    const lineText = editor.getLine(line);
    const ch = (_f = (_e = (_d = candidate.range) == null ? void 0 : _d.from) == null ? void 0 : _e.ch) != null ? _f : cursor.ch;
    const lead = this.parseLeadingTags(lineText);
    const split = this.splitBlockIdSuffix(lineText);
    const trail = this.parseTrailingTags(split.core);
    const leadStart = 0;
    const leadEnd = lead.indent.length + lead.tagBlock.length;
    const trailStart = trail.before.length;
    const trailEnd = split.core.length;
    const inLeading = ch >= leadStart && ch < leadEnd;
    const inTrailing = ch >= trailStart && ch < trailEnd;
    if (inLeading) {
      const leadHas = lead.tags.some((t) => t.replace(/^#/, "").toLowerCase() === key);
      if (leadHas) {
        const kept = lead.tags.filter((t) => t.replace(/^#/, "").toLowerCase() !== key);
        const newLine = this.buildLineWithLeading(lead.indent, kept, lead.after);
        editor.replaceRange(newLine, { line, ch: 0 }, { line, ch: lineText.length });
        return;
      }
    }
    if (inTrailing) {
      const trailHas = trail.tags.some((t) => t.replace(/^#/, "").toLowerCase() === key);
      if (trailHas) {
        const kept = trail.tags.filter((t) => t.replace(/^#/, "").toLowerCase() !== key);
        const newLine = this.buildLineWithTrailing(trail.before, kept, split.blockId, split.trailingWs);
        editor.replaceRange(newLine, { line, ch: 0 }, { line, ch: lineText.length });
        return;
      }
    }
    if (candidate.range) {
      const fromCh = candidate.range.from.ch;
      const toCh = candidate.range.to.ch;
      const selected = editor.getRange(candidate.range.from, candidate.range.to);
      if (selected && selected.startsWith("#")) {
        const beforeTag = lineText.slice(0, fromCh);
        const afterTag = lineText.slice(toCh);
        if (beforeTag.endsWith("[") && afterTag.startsWith(`](${selected})`)) {
          let expandedFrom = fromCh - 1;
          let expandedTo = toCh + 3 + selected.length;
          if (expandedTo < lineText.length && lineText.charAt(expandedTo) === " ") {
            expandedTo++;
          } else if (expandedFrom > 0 && lineText.charAt(expandedFrom - 1) === " ") {
            expandedFrom--;
          }
          editor.replaceRange("", { line, ch: expandedFrom }, { line, ch: expandedTo });
        } else {
          editor.replaceRange(selected.slice(1), candidate.range.from, candidate.range.to);
        }
      }
    }
  }
  // ── Settings ────────────────────────────────────────────────────────────────
  async loadSettings() {
    var _a;
    const loaded = (_a = await this.loadData()) != null ? _a : {};
    const anyLoaded = loaded;
    const mode = anyLoaded.altClickTagMode;
    this.settings = {
      pinnedTags: Array.isArray(anyLoaded.pinnedTags) ? anyLoaded.pinnedTags.filter((t) => typeof t === "string") : DEFAULT_SETTINGS.pinnedTags,
      frequencyCutoff: typeof anyLoaded.frequencyCutoff === "number" && !isNaN(anyLoaded.frequencyCutoff) ? Math.max(0, Math.floor(anyLoaded.frequencyCutoff)) : DEFAULT_SETTINGS.frequencyCutoff,
      frequencyCutoffEnabled: typeof anyLoaded.frequencyCutoffEnabled === "boolean" ? anyLoaded.frequencyCutoffEnabled : DEFAULT_SETTINGS.frequencyCutoffEnabled,
      altClickTagMode: mode === "start-line" || mode === "in-place" || mode === "end-line" ? mode : DEFAULT_SETTINGS.altClickTagMode,
      mobileLongPressEnabled: typeof anyLoaded.mobileLongPressEnabled === "boolean" ? anyLoaded.mobileLongPressEnabled : DEFAULT_SETTINGS.mobileLongPressEnabled,
      mobileLongPressMs: typeof anyLoaded.mobileLongPressMs === "number" && !isNaN(anyLoaded.mobileLongPressMs) ? Math.max(250, Math.min(5e3, Math.floor(anyLoaded.mobileLongPressMs))) : DEFAULT_SETTINGS.mobileLongPressMs,
      showPlacementInStatusBar: typeof anyLoaded.showPlacementInStatusBar === "boolean" ? anyLoaded.showPlacementInStatusBar : DEFAULT_SETTINGS.showPlacementInStatusBar
    };
    await this.saveData(this.settings);
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.app.workspace.trigger("flat-tag-view:settings-updated");
    this.updateStatusBar();
  }
  // ── View activation / style ────────────────────────────────────────────────
  async activateView() {
    const workspace = this.app.workspace;
    let leaf = workspace.getLeavesOfType(VIEW_TYPE)[0];
    if (!leaf) {
      const rightLeaf = workspace.getRightLeaf(false);
      if (!rightLeaf)
        return;
      leaf = rightLeaf;
      await leaf.setViewState({ type: VIEW_TYPE });
    }
    workspace.revealLeaf(leaf);
  }
  addStyle() {
    const styleEl = document.createElement("style");
    styleEl.innerHTML = getStyles();
    document.head.appendChild(styleEl);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJjb25zdGFudHMudHMiLCAiZmxhdFRhZ1ZpZXcudHMiLCAic3R5bGVzLnRzIiwgInNldHRpbmdzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvclBvc2l0aW9uLCBNYXJrZG93blZpZXcsIE5vdGljZSwgUGxhdGZvcm0sIFBsdWdpbiwgV29ya3NwYWNlTGVhZiB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5pbXBvcnQgeyBWSUVXX1RZUEUgfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcbmltcG9ydCB7IEZsYXRUYWdWaWV3IH0gZnJvbSBcIi4vZmxhdFRhZ1ZpZXdcIjtcbmltcG9ydCB7IGdldFN0eWxlcyB9IGZyb20gXCIuL3N0eWxlc1wiO1xuaW1wb3J0IHsgQWx0Q2xpY2tUYWdNb2RlLCBERUZBVUxUX1NFVFRJTkdTLCBGbGF0VGFnUGx1Z2luU2V0dGluZ3MsIEZsYXRUYWdTZXR0aW5nVGFiIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcblxudHlwZSBFZGl0b3JSYW5nZSA9IHsgZnJvbTogRWRpdG9yUG9zaXRpb247IHRvOiBFZGl0b3JQb3NpdGlvbiB9O1xudHlwZSBDYW5kaWRhdGUgPSB7IHJhdzogc3RyaW5nOyByYW5nZT86IEVkaXRvclJhbmdlIH07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZsYXRUYWdQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBGbGF0VGFnUGx1Z2luU2V0dGluZ3M7XG4gICAgcHJpdmF0ZSBzdGF0dXNCYXJFbDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblxuICAgIGFzeW5jIG9ubG9hZCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgICAgICB0aGlzLnJlZ2lzdGVyVmlldyhWSUVXX1RZUEUsIChsZWFmOiBXb3Jrc3BhY2VMZWFmKSA9PiBuZXcgRmxhdFRhZ1ZpZXcobGVhZiwgdGhpcykpO1xuICAgICAgICB0aGlzLmFkZFJpYmJvbkljb24oXCJ0YWdcIiwgXCJPcGVuIEZsYXQgVGFnc1wiLCAoKSA9PiB2b2lkIHRoaXMuYWN0aXZhdGVWaWV3KCkpO1xuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IEZsYXRUYWdTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcIm9wZW4tZmxhdC10YWdzXCIsXG4gICAgICAgICAgICBuYW1lOiBcIk9wZW4gRmxhdCBUYWdzXCIsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4gdm9pZCB0aGlzLmFjdGl2YXRlVmlldygpLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwidG9nZ2xlLWZsYXQtdGFnLXNvcnRcIixcbiAgICAgICAgICAgIG5hbWU6IFwiVG9nZ2xlIEZsYXQgVGFnIFNvcnQgKEEtWi9Vc2FnZSlcIixcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFKVswXT8udmlldyBhcyBGbGF0VGFnVmlldztcbiAgICAgICAgICAgICAgICBpZiAodmlldyAmJiB0eXBlb2Ygdmlldy50b2dnbGVTb3J0ID09PSBcImZ1bmN0aW9uXCIpIHZpZXcudG9nZ2xlU29ydCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcImNsZWFyLWZsYXQtdGFnLXNlbGVjdGlvbnNcIixcbiAgICAgICAgICAgIG5hbWU6IFwiQ2xlYXIgRmxhdCBUYWcgU2VsZWN0aW9uc1wiLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEUpWzBdPy52aWV3IGFzIEZsYXRUYWdWaWV3O1xuICAgICAgICAgICAgICAgIGlmICh2aWV3ICYmIHR5cGVvZiB2aWV3LmNsZWFyVGFnU2VsZWN0aW9ucyA9PT0gXCJmdW5jdGlvblwiKSB2aWV3LmNsZWFyVGFnU2VsZWN0aW9ucygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcImNsZWFyLWZsYXQtdGFnLXNlYXJjaFwiLFxuICAgICAgICAgICAgbmFtZTogXCJDbGVhciBGbGF0IFRhZyBTZWFyY2ggQm94XCIsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRSlbMF0/LnZpZXcgYXMgRmxhdFRhZ1ZpZXc7XG4gICAgICAgICAgICAgICAgaWYgKHZpZXcgJiYgdHlwZW9mIHZpZXcuY2xlYXJTZWFyY2hCb3ggPT09IFwiZnVuY3Rpb25cIikgdmlldy5jbGVhclNlYXJjaEJveCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcInRvZ2dsZS1mbGF0LXRhZy1zY29wZS1tb2RlXCIsXG4gICAgICAgICAgICBuYW1lOiBcIlRvZ2dsZSBGbGF0IFRhZyBNb2RlIChOb3RlL0xpbmUpXCIsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRSlbMF0/LnZpZXcgYXMgRmxhdFRhZ1ZpZXc7XG4gICAgICAgICAgICAgICAgaWYgKHZpZXcgJiYgdHlwZW9mIHZpZXcudG9nZ2xlU2NvcGVNb2RlID09PSBcImZ1bmN0aW9uXCIpIHZpZXcudG9nZ2xlU2NvcGVNb2RlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwidG9nZ2xlLWZsYXQtdGFnLXRhc2stbW9kZVwiLFxuICAgICAgICAgICAgbmFtZTogXCJDeWNsZSBGbGF0IFRhZyBUYXNrIE1vZGUgKEFsbC9Ub2RvL0RvbmUpXCIsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRSlbMF0/LnZpZXcgYXMgRmxhdFRhZ1ZpZXc7XG4gICAgICAgICAgICAgICAgaWYgKHZpZXcgJiYgdHlwZW9mIHZpZXcudG9nZ2xlVGFza01vZGUgPT09IFwiZnVuY3Rpb25cIikgdmlldy50b2dnbGVUYXNrTW9kZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcImN5Y2xlLWZsYXQtdGFnLXBsYWNlbWVudFwiLFxuICAgICAgICAgICAgbmFtZTogXCJDeWNsZSBUYWcgUGxhY2VtZW50IChTT0wgLyBJTlAgLyBFT0wpXCIsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4gdm9pZCB0aGlzLmN5Y2xlVGFnUGxhY2VtZW50KCksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogXCJzZXQtZmxhdC10YWctcGxhY2VtZW50LXNvbFwiLFxuICAgICAgICAgICAgbmFtZTogXCJTZXQgVGFnIFBsYWNlbWVudCB0byBTdGFydCBvZiBMaW5lIChTT0wpXCIsXG4gICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuYWx0Q2xpY2tUYWdNb2RlID0gXCJzdGFydC1saW5lXCI7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiVGFnIHBsYWNlbWVudDogU3RhcnQgb2YgbGluZVwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogXCJzZXQtZmxhdC10YWctcGxhY2VtZW50LWlucFwiLFxuICAgICAgICAgICAgbmFtZTogXCJTZXQgVGFnIFBsYWNlbWVudCB0byBJbiBQbGFjZSAoSU5QKVwiLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmFsdENsaWNrVGFnTW9kZSA9IFwiaW4tcGxhY2VcIjtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJUYWcgcGxhY2VtZW50OiBJbiBwbGFjZVwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogXCJzZXQtZmxhdC10YWctcGxhY2VtZW50LWVvbFwiLFxuICAgICAgICAgICAgbmFtZTogXCJTZXQgVGFnIFBsYWNlbWVudCB0byBFbmQgb2YgTGluZSAoRU9MKVwiLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmFsdENsaWNrVGFnTW9kZSA9IFwiZW5kLWxpbmVcIjtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJUYWcgcGxhY2VtZW50OiBFbmQgb2YgbGluZVwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgdGhpcy5hZGRTdHlsZSgpO1xuXG4gICAgICAgIC8vIFN0YXR1cyBiYXIgcGxhY2VtZW50IGluZGljYXRvclxuICAgICAgICB0aGlzLnN0YXR1c0JhckVsID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKCk7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdHVzQmFyKCk7XG4gICAgICAgIHRoaXMuc3RhdHVzQmFyRWwuYWRkQ2xhc3MoXCJtb2QtY2xpY2thYmxlXCIpO1xuICAgICAgICB0aGlzLnN0YXR1c0JhckVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB2b2lkIHRoaXMuY3ljbGVUYWdQbGFjZW1lbnQoKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBEZXNrdG9wOiBJbnRlcmNlcHQgZWRpdG9yIGNsaWNrcyB3aXRoIGNhcHR1cmUgdG8gcHJldmVudCBPYnNpZGlhbiBoaWphY2tpbmcgdGhlbVxuICAgICAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsIFwiY2xpY2tcIiwgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFldnQuYWx0S2V5KSByZXR1cm47XG5cbiAgICAgICAgICAgIC8vIDEuIEN0cmwgKyBBbHQgKyBTaGlmdCArIENsaWNrIC0+IExvY2FsIE11dGUgLyBVbm11dGUgdGFnXG4gICAgICAgICAgICBpZiAoZXZ0LnNoaWZ0S2V5ICYmIChldnQuY3RybEtleSB8fCBldnQubWV0YUtleSkpIHtcbiAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgdm9pZCB0aGlzLmhhbmRsZUVkaXRvclRyaWdnZXIoeyBraW5kOiBcImxvY2FsLW11dGVcIiwgbW91c2VFdmVudDogZXZ0IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gMWIuIFNoaWZ0ICsgQWx0ICsgQ2xpY2sgLT4gc3RyaXAgbGVhZGluZyAnIycgYnV0IGtlZXAgdGhlIGV4cHJlc3Npb24gdGV4dFxuICAgICAgICAgICAgICAgIGlmIChldnQuc2hpZnRLZXkgJiYgIWV2dC5jdHJsS2V5ICYmICFldnQubWV0YUtleSkge1xuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB2b2lkIHRoaXMuaGFuZGxlRWRpdG9yVHJpZ2dlcih7IGtpbmQ6IFwic3RyaXAtaGFzaFwiLCBtb3VzZUV2ZW50OiBldnQgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyAyLiBDdHJsICsgQWx0ICsgQ2xpY2sgLT4gRlRWIERyaWxsIERvd25cbiAgICAgICAgICAgIGlmICghZXZ0LnNoaWZ0S2V5ICYmIChldnQuY3RybEtleSB8fCBldnQubWV0YUtleSkpIHtcbiAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgdm9pZCB0aGlzLmhhbmRsZUVkaXRvclRyaWdnZXIoeyBraW5kOiBcImRyaWxsLWRvd25cIiwgbW91c2VFdmVudDogZXZ0IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gMy4gQWx0ICsgQ2xpY2sgKG9ubHkgQWx0KSAtPiBDcmVhdGUvUmVtb3ZlIHRhZ1xuICAgICAgICAgICAgaWYgKCFldnQuc2hpZnRLZXkgJiYgIWV2dC5jdHJsS2V5ICYmICFldnQubWV0YUtleSkge1xuICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOyBcbiAgICAgICAgICAgICAgICB2b2lkIHRoaXMuaGFuZGxlRWRpdG9yVHJpZ2dlcih7IGtpbmQ6IFwiYWx0LWNsaWNrXCIsIG1vdXNlRXZlbnQ6IGV2dCB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHsgY2FwdHVyZTogdHJ1ZSB9KTtcblxuICAgICAgICAvLyBNb2JpbGU6IGxvbmcgcHJlc3NcbiAgICAgICAgdGhpcy5yZWdpc3Rlck1vYmlsZUxvbmdQcmVzcygpO1xuICAgIH1cblxuICAgIG9udW5sb2FkKCkge1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFZJRVdfVFlQRSk7XG4gICAgICAgIGlmICh0aGlzLnN0YXR1c0JhckVsKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1c0JhckVsLnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5zdGF0dXNCYXJFbCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgY3ljbGVUYWdQbGFjZW1lbnQoKSB7XG4gICAgICAgIGNvbnN0IG1vZGVzOiBBbHRDbGlja1RhZ01vZGVbXSA9IFtcInN0YXJ0LWxpbmVcIiwgXCJpbi1wbGFjZVwiLCBcImVuZC1saW5lXCJdO1xuICAgICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5zZXR0aW5ncy5hbHRDbGlja1RhZ01vZGU7XG4gICAgICAgIGNvbnN0IG5leHQgPSBtb2Rlc1sobW9kZXMuaW5kZXhPZihjdXJyZW50KSArIDEpICUgbW9kZXMubGVuZ3RoXTtcblxuICAgICAgICB0aGlzLnNldHRpbmdzLmFsdENsaWNrVGFnTW9kZSA9IG5leHQ7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgICAgY29uc3QgbGFiZWxzOiBSZWNvcmQ8QWx0Q2xpY2tUYWdNb2RlLCBzdHJpbmc+ID0ge1xuICAgICAgICAgICAgXCJzdGFydC1saW5lXCI6IFwiU3RhcnQgb2YgbGluZVwiLFxuICAgICAgICAgICAgXCJpbi1wbGFjZVwiOiBcIkluIHBsYWNlXCIsXG4gICAgICAgICAgICBcImVuZC1saW5lXCI6IFwiRW5kIG9mIGxpbmVcIixcbiAgICAgICAgfTtcbiAgICAgICAgbmV3IE5vdGljZShgVGFnIHBsYWNlbWVudDogJHtsYWJlbHNbbmV4dF19YCk7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwIFN0YXR1cyBiYXIgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgICB1cGRhdGVTdGF0dXNCYXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0dXNCYXJFbCkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHNob3cgPSB0aGlzLnNldHRpbmdzLnNob3dQbGFjZW1lbnRJblN0YXR1c0JhciA/PyB0cnVlO1xuXG4gICAgICAgIGlmICghc2hvdykge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXNCYXJFbC5zZXRUZXh0KFwiXCIpO1xuICAgICAgICAgICAgdGhpcy5zdGF0dXNCYXJFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsYWJlbHM6IFJlY29yZDxBbHRDbGlja1RhZ01vZGUsIHN0cmluZz4gPSB7XG4gICAgICAgICAgICBcInN0YXJ0LWxpbmVcIjogXCJTT0xcIixcbiAgICAgICAgICAgIFwiaW4tcGxhY2VcIjogXCJJTlBcIixcbiAgICAgICAgICAgIFwiZW5kLWxpbmVcIjogXCJFT0xcIixcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBtb2RlTGFiZWwgPSBsYWJlbHNbdGhpcy5zZXR0aW5ncy5hbHRDbGlja1RhZ01vZGVdID8/IFwiU09MXCI7XG4gICAgICAgIHRoaXMuc3RhdHVzQmFyRWwuc2V0VGV4dChgIz4ke21vZGVMYWJlbH1gKTtcbiAgICAgICAgdGhpcy5zdGF0dXNCYXJFbC5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDAgTW9iaWxlIGxvbmcgcHJlc3MgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgICBwcml2YXRlIHJlZ2lzdGVyTW9iaWxlTG9uZ1ByZXNzKCkge1xuICAgICAgICBpZiAoIVBsYXRmb3JtLmlzTW9iaWxlKSByZXR1cm47XG5cbiAgICAgICAgbGV0IHRpbWVyOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgICAgICAgbGV0IHN0YXJ0WCA9IDA7XG4gICAgICAgIGxldCBzdGFydFkgPSAwO1xuICAgICAgICBsZXQgY2FuY2VsbGVkID0gZmFsc2U7XG4gICAgICAgIGxldCBsb25nUHJlc3NBcm1lZCA9IGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IGNsZWFyID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRpbWVyKSB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgICAgIHRpbWVyID0gbnVsbDtcbiAgICAgICAgICAgIGxvbmdQcmVzc0FybWVkID0gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KFxuICAgICAgICAgICAgZG9jdW1lbnQsXG4gICAgICAgICAgICBcInRvdWNoc3RhcnRcIixcbiAgICAgICAgICAgIChldnQ6IFRvdWNoRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MubW9iaWxlTG9uZ1ByZXNzRW5hYmxlZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmIChldnQudG91Y2hlcy5sZW5ndGggIT09IDEpIHJldHVybjtcbiAgICAgICAgICAgICAgICBjYW5jZWxsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBsb25nUHJlc3NBcm1lZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBldnQudG91Y2hlc1swXTtcbiAgICAgICAgICAgICAgICBzdGFydFggPSB0LmNsaWVudFg7XG4gICAgICAgICAgICAgICAgc3RhcnRZID0gdC5jbGllbnRZO1xuICAgICAgICAgICAgICAgIGNsZWFyKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbXMgPSBNYXRoLm1heCgyNTAsIE1hdGgubWluKDUwMDAsIHRoaXMuc2V0dGluZ3MubW9iaWxlTG9uZ1ByZXNzTXMgPz8gMTAwMCkpO1xuICAgICAgICAgICAgICAgIHRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aW1lciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYW5jZWxsZWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXJtOyBmaXJlIG9uIHRvdWNoZW5kIGFmdGVyIE9TIHNlbGVjdGlvbiBpcyBlc3RhYmxpc2hlZC5cbiAgICAgICAgICAgICAgICAgICAgbG9uZ1ByZXNzQXJtZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0sIG1zKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7IHBhc3NpdmU6IHRydWUgfVxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudChcbiAgICAgICAgICAgIGRvY3VtZW50LFxuICAgICAgICAgICAgXCJ0b3VjaG1vdmVcIixcbiAgICAgICAgICAgIChldnQ6IFRvdWNoRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRpbWVyKSByZXR1cm47XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGV2dC50b3VjaGVzWzBdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGR4ID0gTWF0aC5hYnModC5jbGllbnRYIC0gc3RhcnRYKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkeSA9IE1hdGguYWJzKHQuY2xpZW50WSAtIHN0YXJ0WSk7XG4gICAgICAgICAgICAgICAgaWYgKGR4ID4gMTIgfHwgZHkgPiAxMikgeyBjYW5jZWxsZWQgPSB0cnVlOyBjbGVhcigpOyB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyBwYXNzaXZlOiB0cnVlIH1cbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoXG4gICAgICAgICAgICBkb2N1bWVudCxcbiAgICAgICAgICAgIFwidG91Y2hlbmRcIixcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaG91bGRGaXJlID0gbG9uZ1ByZXNzQXJtZWQgJiYgIWNhbmNlbGxlZDtcbiAgICAgICAgICAgICAgICBjbGVhcigpO1xuICAgICAgICAgICAgICAgIGlmICghc2hvdWxkRmlyZSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5oYW5kbGVFZGl0b3JUcmlnZ2VyKHsga2luZDogXCJtb2JpbGUtbG9uZy1wcmVzc1wiIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgcGFzc2l2ZTogdHJ1ZSB9XG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KFxuICAgICAgICAgICAgZG9jdW1lbnQsXG4gICAgICAgICAgICBcInRvdWNoY2FuY2VsXCIsXG4gICAgICAgICAgICAoKSA9PiB7IGNhbmNlbGxlZCA9IHRydWU7IGNsZWFyKCk7IH0sXG4gICAgICAgICAgICB7IHBhc3NpdmU6IHRydWUgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMCBUcmlnZ2VyIGVudHJ5LXBvaW50IFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVFZGl0b3JUcmlnZ2VyKFxuICAgICAgICB0cmlnZ2VyOiB7IGtpbmQ6IFwiYWx0LWNsaWNrXCIgfCBcImRyaWxsLWRvd25cIiB8IFwibG9jYWwtbXV0ZVwiIHwgXCJzdHJpcC1oYXNoXCI7IG1vdXNlRXZlbnQ/OiBNb3VzZUV2ZW50IH0gfCB7IGtpbmQ6IFwibW9iaWxlLWxvbmctcHJlc3NcIiB9XG4gICAgKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICBpZiAoIXZpZXcpIHJldHVybjtcblxuICAgICAgICAvLyBTb3VyY2UgLyBlZGl0b3IgbW9kZSBvbmx5XG4gICAgICAgIGNvbnN0IGFueVZpZXcgPSB2aWV3IGFzIGFueTtcbiAgICAgICAgaWYgKHR5cGVvZiBhbnlWaWV3LmdldE1vZGUgPT09IFwiZnVuY3Rpb25cIiAmJiBhbnlWaWV3LmdldE1vZGUoKSAhPT0gXCJzb3VyY2VcIikgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IGVkaXRvciA9IHZpZXcuZWRpdG9yO1xuICAgICAgICBpZiAoIWVkaXRvcikgcmV0dXJuO1xuXG4gICAgICAgIC8vIE1vYmlsZTogcmVxdWlyZSBhIHJlYWwgc2VsZWN0aW9uIHRvIGF2b2lkIGFjY2lkZW50YWwgdHJpZ2dlcnNcbiAgICAgICAgaWYgKHRyaWdnZXIua2luZCA9PT0gXCJtb2JpbGUtbG9uZy1wcmVzc1wiKSB7XG4gICAgICAgICAgICBjb25zdCBzZWwgPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBpZiAoIXNlbCB8fCAhc2VsLnRyaW0oKSkgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2FuZGlkYXRlID0gdGhpcy5nZXRDYW5kaWRhdGVXaXRoUmFuZ2UoZWRpdG9yLCB7IHByZWZlclNlbGVjdGlvbjogUGxhdGZvcm0uaXNNb2JpbGUgfSk7XG4gICAgICAgIGlmICghY2FuZGlkYXRlKSByZXR1cm47XG5cbiAgICAgICAgLy8gMS4gRHJpbGwgZG93biBhY3Rpb25cbiAgICAgICAgaWYgKHRyaWdnZXIua2luZCA9PT0gXCJkcmlsbC1kb3duXCIpIHtcbiAgICAgICAgICAgIGlmIChjYW5kaWRhdGUucmF3LnN0YXJ0c1dpdGgoXCIjXCIpICYmICFjYW5kaWRhdGUucmF3LnN0YXJ0c1dpdGgoXCIjJVwiKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVWaWV3KCk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ0dkxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRSlbMF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChmdHZMZWFmICYmIGZ0dkxlYWYudmlldyBpbnN0YW5jZW9mIEZsYXRUYWdWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdHZMZWFmLnZpZXcuc2VsZWN0U2luZ2xlVGFnKGNhbmRpZGF0ZS5yYXcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgNTApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gMi4gTG9jYWwgTXV0ZSBhY3Rpb25cbiAgICAgICAgaWYgKHRyaWdnZXIua2luZCA9PT0gXCJsb2NhbC1tdXRlXCIpIHtcbiAgICAgICAgICAgIGlmIChjYW5kaWRhdGUucmF3LnN0YXJ0c1dpdGgoXCIjXCIpICYmIGNhbmRpZGF0ZS5yYW5nZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUYWcgPSBjYW5kaWRhdGUucmF3O1xuICAgICAgICAgICAgICAgIGxldCBuZXdUYWcgPSBcIlwiO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VGFnLnN0YXJ0c1dpdGgoXCIjJVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBuZXdUYWcgPSBcIiNcIiArIGN1cnJlbnRUYWcuc2xpY2UoMik7IC8vIFJlbW92ZSAlXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFnID0gXCIjJVwiICsgY3VycmVudFRhZy5zbGljZSgxKTsgLy8gQWRkICVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShuZXdUYWcsIGNhbmRpZGF0ZS5yYW5nZS5mcm9tLCBjYW5kaWRhdGUucmFuZ2UudG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gMmIuIFN0cmlwLWhhc2ggYWN0aW9uIChhbHdheXMgbGVhdmUgZXhwcmVzc2lvbiB0ZXh0KVxuICAgICAgICBpZiAodHJpZ2dlci5raW5kID09PSBcInN0cmlwLWhhc2hcIikge1xuICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZS5yYXcuc3RhcnRzV2l0aChcIiMlXCIpKSByZXR1cm47XG4gICAgICAgICAgICBpZiAoIWNhbmRpZGF0ZS5yYXcuc3RhcnRzV2l0aChcIiNcIikpIHJldHVybjtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zdHJpcEhhc2hGcm9tVGFnKGVkaXRvciwgY2FuZGlkYXRlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDMuIEFsdC1jbGljayAoZGVmYXVsdCBjcmVhdGUvcmVtb3ZlKVxuICAgICAgICBpZiAodHJpZ2dlci5raW5kID09PSBcImFsdC1jbGlja1wiIHx8IHRyaWdnZXIua2luZCA9PT0gXCJtb2JpbGUtbG9uZy1wcmVzc1wiKSB7XG4gICAgICAgICAgICAvLyBDb21wbGV0ZWx5IGlnbm9yZSBBbHQtY2xpY2tzIG9uIG11dGVkIHRhZ3NcbiAgICAgICAgICAgIGlmIChjYW5kaWRhdGUucmF3LnN0YXJ0c1dpdGgoXCIjJVwiKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZS5yYXcuc3RhcnRzV2l0aChcIiNcIikpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlbW92ZVRhZyhlZGl0b3IsIGNhbmRpZGF0ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlVGFnKGVkaXRvciwgdGhpcy5zZXR0aW5ncy5hbHRDbGlja1RhZ01vZGUsIGNhbmRpZGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDAgQ2FuZGlkYXRlIHJlc29sdXRpb24gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgICBwcml2YXRlIGdldFNlbGVjdGlvblJhbmdlKGVkaXRvcjogRWRpdG9yKTogRWRpdG9yUmFuZ2UgfCBudWxsIHtcbiAgICAgICAgY29uc3QgYW55RWRpdG9yID0gZWRpdG9yIGFzIGFueTtcbiAgICAgICAgY29uc3QgZnJvbSA9IGFueUVkaXRvci5nZXRDdXJzb3I/LihcImZyb21cIikgYXMgRWRpdG9yUG9zaXRpb24gfCB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IHRvID0gYW55RWRpdG9yLmdldEN1cnNvcj8uKFwidG9cIikgYXMgRWRpdG9yUG9zaXRpb24gfCB1bmRlZmluZWQ7XG4gICAgICAgIGlmICghZnJvbSB8fCAhdG8pIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoZnJvbS5saW5lID09PSB0by5saW5lICYmIGZyb20uY2ggPT09IHRvLmNoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKGZyb20ubGluZSA+IHRvLmxpbmUgfHwgKGZyb20ubGluZSA9PT0gdG8ubGluZSAmJiBmcm9tLmNoID4gdG8uY2gpKSByZXR1cm4geyBmcm9tOiB0bywgdG86IGZyb20gfTtcbiAgICAgICAgcmV0dXJuIHsgZnJvbSwgdG8gfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGJ1aWxkU2VsQ2FuZGlkYXRlKGVkaXRvcjogRWRpdG9yLCBzZWw6IHN0cmluZywgcjogRWRpdG9yUmFuZ2UpOiBDYW5kaWRhdGUge1xuICAgICAgICBjb25zdCByYXcgPSBzZWwudHJpbSgpO1xuICAgICAgICBpZiAoIXJhdy5zdGFydHNXaXRoKFwiI1wiKSAmJiByLmZyb20uY2ggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBsaW5lVGV4dCA9IGVkaXRvci5nZXRMaW5lKHIuZnJvbS5saW5lKTtcbiAgICAgICAgICAgIGlmIChsaW5lVGV4dC5jaGFyQXQoci5mcm9tLmNoIC0gMSkgPT09IFwiI1wiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgcmF3OiBcIiNcIiArIHJhdyxcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IHsgZnJvbTogeyBsaW5lOiByLmZyb20ubGluZSwgY2g6IHIuZnJvbS5jaCAtIDEgfSwgdG86IHIudG8gfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHJhdywgcmFuZ2U6IHIgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldENhbmRpZGF0ZVdpdGhSYW5nZShlZGl0b3I6IEVkaXRvciwgb3B0cz86IHsgcHJlZmVyU2VsZWN0aW9uPzogYm9vbGVhbiB9KTogQ2FuZGlkYXRlIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IHByZWZlclNlbGVjdGlvbiA9IG9wdHM/LnByZWZlclNlbGVjdGlvbiA/PyB0cnVlO1xuXG4gICAgICAgIGNvbnN0IHNlbCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgY29uc3Qgc2VsUmFuZ2UgPSB0aGlzLmdldFNlbGVjdGlvblJhbmdlKGVkaXRvcik7XG5cbiAgICAgICAgaWYgKHByZWZlclNlbGVjdGlvbiAmJiBzZWwgJiYgc2VsLnRyaW0oKSAmJiAhL1tcXHJcXG5dLy50ZXN0KHNlbCkgJiYgc2VsUmFuZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkU2VsQ2FuZGlkYXRlKGVkaXRvciwgc2VsLCBzZWxSYW5nZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0b2tlbiA9IHRoaXMuZ2V0VG9rZW5BdEN1cnNvcihlZGl0b3IpO1xuICAgICAgICBpZiAodG9rZW4pIHJldHVybiB0b2tlbjtcblxuICAgICAgICBpZiAoIXByZWZlclNlbGVjdGlvbiAmJiBzZWwgJiYgc2VsLnRyaW0oKSAmJiAhL1tcXHJcXG5dLy50ZXN0KHNlbCkgJiYgc2VsUmFuZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkU2VsQ2FuZGlkYXRlKGVkaXRvciwgc2VsLCBzZWxSYW5nZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFRva2VuQXRDdXJzb3IoZWRpdG9yOiBFZGl0b3IpOiBDYW5kaWRhdGUgfCBudWxsIHtcbiAgICAgICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuICAgICAgICBjb25zdCBsaW5lVGV4dCA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKSA/PyBcIlwiO1xuICAgICAgICBpZiAoIWxpbmVUZXh0KSByZXR1cm4gbnVsbDtcblxuICAgICAgICBjb25zdCBpc0JvZHlDaGFyID0gKGNoOiBzdHJpbmcpID0+IC9bXlxcc1wiJ2BcXF1cXFt7fSgpPStcXFxcfCw8Lj4hPzo7KiZeQCQjXS91LnRlc3QoY2gpO1xuXG4gICAgICAgIGxldCBpID0gY3Vyc29yLmNoO1xuICAgICAgICBpZiAoaSA+PSBsaW5lVGV4dC5sZW5ndGgpIGkgPSBsaW5lVGV4dC5sZW5ndGggLSAxO1xuICAgICAgICBpZiAoaSA8IDApIHJldHVybiBudWxsO1xuXG4gICAgICAgIGNvbnN0IGN1ciA9IGxpbmVUZXh0LmNoYXJBdChpKTtcblxuICAgICAgICAvLyBDYXNlIDE6IGN1cnNvciBkaXJlY3RseSBvbiAnIydcbiAgICAgICAgaWYgKGN1ciA9PT0gXCIjXCIpIHtcbiAgICAgICAgICAgIGxldCBlbmQgPSBpICsgMTtcbiAgICAgICAgICAgIHdoaWxlIChlbmQgPCBsaW5lVGV4dC5sZW5ndGggJiYgaXNCb2R5Q2hhcihsaW5lVGV4dC5jaGFyQXQoZW5kKSkpIGVuZCsrO1xuICAgICAgICAgICAgaWYgKGVuZCA9PT0gaSArIDEpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByYXc6IGxpbmVUZXh0LnNsaWNlKGksIGVuZCksXG4gICAgICAgICAgICAgICAgcmFuZ2U6IHsgZnJvbTogeyBsaW5lOiBjdXJzb3IubGluZSwgY2g6IGkgfSwgdG86IHsgbGluZTogY3Vyc29yLmxpbmUsIGNoOiBlbmQgfSB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENhc2UgMjogY3Vyc29yIG9uIGEgYm9keSBjaGFyYWN0ZXJcbiAgICAgICAgaWYgKGlzQm9keUNoYXIoY3VyKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMud29yZFJhbmdlQXQoY3Vyc29yLmxpbmUsIGxpbmVUZXh0LCBpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENhc2UgMzogY3Vyc29yIGp1c3QgYWZ0ZXIgYSBib2R5IGNoYXJhY3RlclxuICAgICAgICBpZiAoaSA+IDAgJiYgaXNCb2R5Q2hhcihsaW5lVGV4dC5jaGFyQXQoaSAtIDEpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMud29yZFJhbmdlQXQoY3Vyc29yLmxpbmUsIGxpbmVUZXh0LCBpIC0gMSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHdvcmRSYW5nZUF0KGxpbmU6IG51bWJlciwgbGluZVRleHQ6IHN0cmluZywgaTogbnVtYmVyKTogQ2FuZGlkYXRlIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGlzQm9keUNoYXIgPSAoY2g6IHN0cmluZykgPT4gL1teXFxzXCInYFxcXVxcW3t9KCk9K1xcXFx8LDwuPiE/OjsqJl5AJCNdL3UudGVzdChjaCk7XG5cbiAgICAgICAgbGV0IHN0YXJ0ID0gaTtcbiAgICAgICAgd2hpbGUgKHN0YXJ0ID4gMCAmJiBpc0JvZHlDaGFyKGxpbmVUZXh0LmNoYXJBdChzdGFydCAtIDEpKSkgc3RhcnQtLTtcblxuICAgICAgICBjb25zdCBoYXNoU3RhcnQgPSAoc3RhcnQgPiAwICYmIGxpbmVUZXh0LmNoYXJBdChzdGFydCAtIDEpID09PSBcIiNcIikgPyBzdGFydCAtIDEgOiBzdGFydDtcblxuICAgICAgICBsZXQgZW5kID0gaSArIDE7XG4gICAgICAgIHdoaWxlIChlbmQgPCBsaW5lVGV4dC5sZW5ndGggJiYgaXNCb2R5Q2hhcihsaW5lVGV4dC5jaGFyQXQoZW5kKSkpIGVuZCsrO1xuXG4gICAgICAgIGNvbnN0IHJhdyA9IGxpbmVUZXh0LnNsaWNlKGhhc2hTdGFydCwgZW5kKTtcbiAgICAgICAgaWYgKCFyYXcudHJpbSgpKSByZXR1cm4gbnVsbDtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmF3LFxuICAgICAgICAgICAgcmFuZ2U6IHsgZnJvbTogeyBsaW5lLCBjaDogaGFzaFN0YXJ0IH0sIHRvOiB7IGxpbmUsIGNoOiBlbmQgfSB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMCBWYWxpZGF0aW9uIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gICAgcHJpdmF0ZSBoYXNGb3JiaWRkZW5DaGFycyhyYXc6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBzID0gcmF3LnRyaW0oKTtcbiAgICAgICAgaWYgKCFzKSByZXR1cm4gdHJ1ZTtcblxuICAgICAgICBjb25zdCBib2R5ID0gcy5zdGFydHNXaXRoKFwiI1wiKSA/IHMuc2xpY2UoMSkgOiBzO1xuICAgICAgICBpZiAoYm9keS5pbmNsdWRlcyhcIiNcIikpIHJldHVybiB0cnVlO1xuXG4gICAgICAgIHJldHVybiAvWyFAJF4mKigpKz0gPD4sLj9gfl0vLnRlc3QoYm9keSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBub3JtYWxpemVDYW5kaWRhdGUocmF3OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgbGV0IHQgPSByYXcudHJpbSgpO1xuICAgICAgICBpZiAoIXQpIHJldHVybiBudWxsO1xuICAgICAgICBpZiAodGhpcy5oYXNGb3JiaWRkZW5DaGFycyh0KSkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgaWYgKHQuc3RhcnRzV2l0aChcIiNcIikpIHQgPSB0LnNsaWNlKDEpO1xuICAgICAgICBpZiAoIXQpIHJldHVybiBudWxsO1xuXG4gICAgICAgIGlmICgvXlxcZCskLy50ZXN0KHQpIHx8IHQgPT09IFwiJVwiKSByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKC9cXHMvLnRlc3QodCkpIHJldHVybiBudWxsO1xuXG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMCBUYWcgaGVscGVycyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICAgIHByaXZhdGUgdGFnVG9rZW5Gb3JQbGFjZW1lbnQoY2FuZGlkYXRlOiBzdHJpbmcsIG1vZGU6IEFsdENsaWNrVGFnTW9kZSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHRleHQgPSAobW9kZSA9PT0gXCJzdGFydC1saW5lXCIgfHwgbW9kZSA9PT0gXCJlbmQtbGluZVwiKSA/IGNhbmRpZGF0ZS50b0xvd2VyQ2FzZSgpIDogY2FuZGlkYXRlO1xuICAgICAgICByZXR1cm4gYCMke3RleHR9YDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNvcnRUYWdzKHRva2Vuczogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gICAgICAgIGNvbnN0IHVuaXE6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRva2Vucykge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gdC5yZXBsYWNlKC9eIy8sIFwiXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBpZiAoc2Vlbi5oYXMoa2V5KSkgY29udGludWU7XG4gICAgICAgICAgICBzZWVuLmFkZChrZXkpO1xuICAgICAgICAgICAgdW5pcS5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmlxLnNvcnQoKGEsIGIpID0+IGEudG9Mb3dlckNhc2UoKS5sb2NhbGVDb21wYXJlKGIudG9Mb3dlckNhc2UoKSwgXCJwbFwiKSk7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwIExpbmUgcGFyc2luZyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICAgIHByaXZhdGUgcGFyc2VMZWFkaW5nVGFncyhsaW5lVGV4dDogc3RyaW5nKTogeyBpbmRlbnQ6IHN0cmluZzsgdGFnQmxvY2s6IHN0cmluZzsgdGFnczogc3RyaW5nW107IGFmdGVyOiBzdHJpbmcgfSB7XG4gICAgICAgIGNvbnN0IGluZGVudCA9IChsaW5lVGV4dC5tYXRjaCgvXlxccyovKSA/PyBbXCJcIl0pWzBdO1xuICAgICAgICBjb25zdCByZXN0ID0gbGluZVRleHQuc2xpY2UoaW5kZW50Lmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IG0gPSByZXN0Lm1hdGNoKC9eKCg/OiNbXlxccyNdK1xccyspKikvKTtcbiAgICAgICAgY29uc3QgdGFnQmxvY2sgPSBtPy5bMV0gPz8gXCJcIjtcbiAgICAgICAgY29uc3QgdGFncyA9IHRhZ0Jsb2NrLm1hdGNoKC8jW15cXHMjXSsvZykgPz8gW107XG4gICAgICAgIGNvbnN0IGFmdGVyID0gcmVzdC5zbGljZSh0YWdCbG9jay5sZW5ndGgpO1xuICAgICAgICByZXR1cm4geyBpbmRlbnQsIHRhZ0Jsb2NrLCB0YWdzLCBhZnRlciB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgc3BsaXRCbG9ja0lkU3VmZml4KGxpbmVUZXh0OiBzdHJpbmcpOiB7IGNvcmU6IHN0cmluZzsgYmxvY2tJZDogc3RyaW5nOyB0cmFpbGluZ1dzOiBzdHJpbmcgfSB7XG4gICAgICAgIGNvbnN0IHRyYWlsaW5nV3MgPSAobGluZVRleHQubWF0Y2goL1xccyokLykgPz8gW1wiXCJdKVswXTtcbiAgICAgICAgY29uc3Qgbm9UcmFpbCA9IGxpbmVUZXh0LnNsaWNlKDAsIGxpbmVUZXh0Lmxlbmd0aCAtIHRyYWlsaW5nV3MubGVuZ3RoKTtcblxuICAgICAgICBjb25zdCBtID0gbm9UcmFpbC5tYXRjaCgvKFxcc1xcXltcXHB7TH1cXHB7Tn1fLV0rKSQvdSk7XG4gICAgICAgIGlmICghbSkgcmV0dXJuIHsgY29yZTogbm9UcmFpbCwgYmxvY2tJZDogXCJcIiwgdHJhaWxpbmdXcyB9O1xuXG4gICAgICAgIGNvbnN0IGJsb2NrV2l0aFNwYWNlID0gbVsxXTtcbiAgICAgICAgY29uc3QgY29yZSA9IG5vVHJhaWwuc2xpY2UoMCwgbm9UcmFpbC5sZW5ndGggLSBibG9ja1dpdGhTcGFjZS5sZW5ndGgpO1xuICAgICAgICBjb25zdCBibG9ja0lkID0gYmxvY2tXaXRoU3BhY2UudHJpbSgpO1xuXG4gICAgICAgIHJldHVybiB7IGNvcmUsIGJsb2NrSWQsIHRyYWlsaW5nV3MgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHBhcnNlVHJhaWxpbmdUYWdzKGNvcmVUZXh0OiBzdHJpbmcpOiB7IGJlZm9yZTogc3RyaW5nOyB0YWdzOiBzdHJpbmdbXSB9IHtcbiAgICAgICAgY29uc3QgbSA9IGNvcmVUZXh0Lm1hdGNoKC8oXFxzKyg/OiNbXlxccyNdK1xccyopKykkLyk7XG4gICAgICAgIGlmICghbSkgcmV0dXJuIHsgYmVmb3JlOiBjb3JlVGV4dCwgdGFnczogW10gfTtcblxuICAgICAgICBjb25zdCB0YWdCbG9jayA9IG1bMV07XG4gICAgICAgIGNvbnN0IHRhZ3MgPSB0YWdCbG9jay5tYXRjaCgvI1teXFxzI10rL2cpID8/IFtdO1xuICAgICAgICBjb25zdCBiZWZvcmUgPSBjb3JlVGV4dC5zbGljZSgwLCBjb3JlVGV4dC5sZW5ndGggLSB0YWdCbG9jay5sZW5ndGgpO1xuICAgICAgICByZXR1cm4geyBiZWZvcmUsIHRhZ3MgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGJ1aWxkTGluZVdpdGhMZWFkaW5nKGluZGVudDogc3RyaW5nLCB0YWdzOiBzdHJpbmdbXSwgYWZ0ZXI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGFmdGVyQ2xlYW4gPSBhZnRlci5yZXBsYWNlKC9eXFxzKy8sIFwiXCIpO1xuICAgICAgICBjb25zdCB0YWdCbG9jayA9IHRhZ3Muam9pbihcIiBcIik7XG4gICAgICAgIGNvbnN0IGJvZHkgPSB0YWdCbG9jayA/IChhZnRlckNsZWFuID8gYCR7dGFnQmxvY2t9ICR7YWZ0ZXJDbGVhbn1gIDogdGFnQmxvY2spIDogYWZ0ZXJDbGVhbjtcbiAgICAgICAgcmV0dXJuIGAke2luZGVudH0ke2JvZHl9YDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGJ1aWxkTGluZVdpdGhUcmFpbGluZyhiZWZvcmU6IHN0cmluZywgdGFnczogc3RyaW5nW10sIGJsb2NrSWQ6IHN0cmluZywgdHJhaWxpbmdXczogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgYmVmb3JlQ2xlYW4gPSBiZWZvcmUucmVwbGFjZSgvXFxzKyQvLCBcIlwiKTtcbiAgICAgICAgY29uc3QgdGFnQmxvY2sgPSB0YWdzLmpvaW4oXCIgXCIpO1xuICAgICAgICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgaWYgKGJlZm9yZUNsZWFuKSBwYXJ0cy5wdXNoKGJlZm9yZUNsZWFuKTtcbiAgICAgICAgaWYgKHRhZ0Jsb2NrKSBwYXJ0cy5wdXNoKHRhZ0Jsb2NrKTtcbiAgICAgICAgaWYgKGJsb2NrSWQpIHBhcnRzLnB1c2goYmxvY2tJZCk7XG4gICAgICAgIHJldHVybiBgJHtwYXJ0cy5qb2luKFwiIFwiKX0ke3RyYWlsaW5nV3N9YDtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDAgQ3JlYXRlIC8gUmVtb3ZlIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVUYWcoZWRpdG9yOiBFZGl0b3IsIG1vZGU6IEFsdENsaWNrVGFnTW9kZSwgY2FuZGlkYXRlOiBDYW5kaWRhdGUpIHtcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMubm9ybWFsaXplQ2FuZGlkYXRlKGNhbmRpZGF0ZS5yYXcpO1xuICAgICAgICBpZiAoIW5vcm1hbGl6ZWQpIHJldHVybjtcblxuICAgICAgICBjb25zdCB0YWdUb2tlbiA9IHRoaXMudGFnVG9rZW5Gb3JQbGFjZW1lbnQobm9ybWFsaXplZCwgbW9kZSk7XG5cbiAgICAgICAgaWYgKG1vZGUgPT09IFwiaW4tcGxhY2VcIikge1xuICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZS5yYW5nZSkgZWRpdG9yLnJlcGxhY2VSYW5nZSh0YWdUb2tlbiwgY2FuZGlkYXRlLnJhbmdlLmZyb20sIGNhbmRpZGF0ZS5yYW5nZS50byk7XG4gICAgICAgICAgICBlbHNlIGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKHRhZ1Rva2VuKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxpbmUgPSBlZGl0b3IuZ2V0Q3Vyc29yKCkubGluZTtcbiAgICAgICAgY29uc3QgbGluZVRleHQgPSBlZGl0b3IuZ2V0TGluZShsaW5lKTtcblxuICAgICAgICBpZiAobW9kZSA9PT0gXCJzdGFydC1saW5lXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGxlYWQgPSB0aGlzLnBhcnNlTGVhZGluZ1RhZ3MobGluZVRleHQpO1xuICAgICAgICAgICAgY29uc3QgbmV4dCA9IHRoaXMuc29ydFRhZ3MoWy4uLmxlYWQudGFncywgdGFnVG9rZW5dKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0xpbmUgPSB0aGlzLmJ1aWxkTGluZVdpdGhMZWFkaW5nKGxlYWQuaW5kZW50LCBuZXh0LCBsZWFkLmFmdGVyKTtcbiAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UobmV3TGluZSwgeyBsaW5lLCBjaDogMCB9LCB7IGxpbmUsIGNoOiBsaW5lVGV4dC5sZW5ndGggfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBlbmQtbGluZTogaW5zZXJ0IEJFRk9SRSB0aGUgXmJsb2NrLWlkIHN1ZmZpeCAoaWYgYW55KVxuICAgICAgICBjb25zdCBzcGxpdCA9IHRoaXMuc3BsaXRCbG9ja0lkU3VmZml4KGxpbmVUZXh0KTtcbiAgICAgICAgY29uc3QgdHJhaWwgPSB0aGlzLnBhcnNlVHJhaWxpbmdUYWdzKHNwbGl0LmNvcmUpO1xuICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy5zb3J0VGFncyhbLi4udHJhaWwudGFncywgdGFnVG9rZW5dKTtcbiAgICAgICAgY29uc3QgbmV3TGluZSA9IHRoaXMuYnVpbGRMaW5lV2l0aFRyYWlsaW5nKHRyYWlsLmJlZm9yZSwgbmV4dCwgc3BsaXQuYmxvY2tJZCwgc3BsaXQudHJhaWxpbmdXcyk7XG4gICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UobmV3TGluZSwgeyBsaW5lLCBjaDogMCB9LCB7IGxpbmUsIGNoOiBsaW5lVGV4dC5sZW5ndGggfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBzdHJpcEhhc2hGcm9tVGFnKGVkaXRvcjogRWRpdG9yLCBjYW5kaWRhdGU6IENhbmRpZGF0ZSkge1xuICAgICAgICBpZiAoIWNhbmRpZGF0ZS5yYW5nZSkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IGxpbmUgPSBjYW5kaWRhdGUucmFuZ2UuZnJvbS5saW5lO1xuICAgICAgICBpZiAoY2FuZGlkYXRlLnJhbmdlLnRvLmxpbmUgIT09IGxpbmUpIHJldHVybjtcblxuICAgICAgICBjb25zdCBsaW5lVGV4dCA9IGVkaXRvci5nZXRMaW5lKGxpbmUpO1xuICAgICAgICBjb25zdCBmcm9tQ2ggPSBjYW5kaWRhdGUucmFuZ2UuZnJvbS5jaDtcbiAgICAgICAgY29uc3QgdG9DaCA9IGNhbmRpZGF0ZS5yYW5nZS50by5jaDtcblxuICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGVkaXRvci5nZXRSYW5nZShjYW5kaWRhdGUucmFuZ2UuZnJvbSwgY2FuZGlkYXRlLnJhbmdlLnRvKTtcbiAgICAgICAgaWYgKCFzZWxlY3RlZCB8fCAhc2VsZWN0ZWQuc3RhcnRzV2l0aChcIiNcIikpIHJldHVybjtcblxuICAgICAgICBjb25zdCBiZWZvcmVUYWcgPSBsaW5lVGV4dC5zbGljZSgwLCBmcm9tQ2gpO1xuICAgICAgICBjb25zdCBhZnRlclRhZyA9IGxpbmVUZXh0LnNsaWNlKHRvQ2gpO1xuXG4gICAgICAgIGlmIChiZWZvcmVUYWcuZW5kc1dpdGgoXCJbXCIpICYmIGFmdGVyVGFnLnN0YXJ0c1dpdGgoYF0oJHtzZWxlY3RlZH0pYCkpIHtcbiAgICAgICAgICAgIGxldCBleHBhbmRlZEZyb20gPSBmcm9tQ2ggLSAxOyBcbiAgICAgICAgICAgIGxldCBleHBhbmRlZFRvID0gdG9DaCArIDMgKyBzZWxlY3RlZC5sZW5ndGg7IFxuXG4gICAgICAgICAgICBpZiAoZXhwYW5kZWRUbyA8IGxpbmVUZXh0Lmxlbmd0aCAmJiBsaW5lVGV4dC5jaGFyQXQoZXhwYW5kZWRUbykgPT09IFwiIFwiKSBleHBhbmRlZFRvKys7XG4gICAgICAgICAgICBlbHNlIGlmIChleHBhbmRlZEZyb20gPiAwICYmIGxpbmVUZXh0LmNoYXJBdChleHBhbmRlZEZyb20gLSAxKSA9PT0gXCIgXCIpIGV4cGFuZGVkRnJvbS0tO1xuXG4gICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKHNlbGVjdGVkLnNsaWNlKDEpLCB7IGxpbmUsIGNoOiBleHBhbmRlZEZyb20gfSwgeyBsaW5lLCBjaDogZXhwYW5kZWRUbyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2Uoc2VsZWN0ZWQuc2xpY2UoMSksIGNhbmRpZGF0ZS5yYW5nZS5mcm9tLCBjYW5kaWRhdGUucmFuZ2UudG8pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcmVtb3ZlVGFnKGVkaXRvcjogRWRpdG9yLCBjYW5kaWRhdGU6IENhbmRpZGF0ZSkge1xuICAgICAgICBjb25zdCBub3JtYWxpemVkID0gdGhpcy5ub3JtYWxpemVDYW5kaWRhdGUoY2FuZGlkYXRlLnJhdyk7XG4gICAgICAgIGlmICghbm9ybWFsaXplZCkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IGtleSA9IG5vcm1hbGl6ZWQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuICAgICAgICBjb25zdCBsaW5lID0gY2FuZGlkYXRlLnJhbmdlPy5mcm9tPy5saW5lID8/IGN1cnNvci5saW5lO1xuXG4gICAgICAgIGlmIChjYW5kaWRhdGUucmFuZ2UgJiYgKGNhbmRpZGF0ZS5yYW5nZS5mcm9tLmxpbmUgIT09IGxpbmUgfHwgY2FuZGlkYXRlLnJhbmdlLnRvLmxpbmUgIT09IGxpbmUpKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgbGluZVRleHQgPSBlZGl0b3IuZ2V0TGluZShsaW5lKTtcbiAgICAgICAgY29uc3QgY2ggPSBjYW5kaWRhdGUucmFuZ2U/LmZyb20/LmNoID8/IGN1cnNvci5jaDtcblxuICAgICAgICBjb25zdCBsZWFkID0gdGhpcy5wYXJzZUxlYWRpbmdUYWdzKGxpbmVUZXh0KTtcbiAgICAgICAgY29uc3Qgc3BsaXQgPSB0aGlzLnNwbGl0QmxvY2tJZFN1ZmZpeChsaW5lVGV4dCk7XG4gICAgICAgIGNvbnN0IHRyYWlsID0gdGhpcy5wYXJzZVRyYWlsaW5nVGFncyhzcGxpdC5jb3JlKTtcblxuICAgICAgICBjb25zdCBsZWFkU3RhcnQgPSAwO1xuICAgICAgICBjb25zdCBsZWFkRW5kID0gbGVhZC5pbmRlbnQubGVuZ3RoICsgbGVhZC50YWdCbG9jay5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHRyYWlsU3RhcnQgPSB0cmFpbC5iZWZvcmUubGVuZ3RoO1xuICAgICAgICBjb25zdCB0cmFpbEVuZCA9IHNwbGl0LmNvcmUubGVuZ3RoO1xuXG4gICAgICAgIGNvbnN0IGluTGVhZGluZyA9IGNoID49IGxlYWRTdGFydCAmJiBjaCA8IGxlYWRFbmQ7XG4gICAgICAgIGNvbnN0IGluVHJhaWxpbmcgPSBjaCA+PSB0cmFpbFN0YXJ0ICYmIGNoIDwgdHJhaWxFbmQ7XG5cbiAgICAgICAgLy8gMS4gUmVtb3ZlIGZyb20gbGVhZGluZyBibG9jayBPTkxZIGlmIGNsaWNrZWQgaW5zaWRlIGl0XG4gICAgICAgIGlmIChpbkxlYWRpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IGxlYWRIYXMgPSBsZWFkLnRhZ3Muc29tZSh0ID0+IHQucmVwbGFjZSgvXiMvLCBcIlwiKS50b0xvd2VyQ2FzZSgpID09PSBrZXkpO1xuICAgICAgICAgICAgaWYgKGxlYWRIYXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXB0ID0gbGVhZC50YWdzLmZpbHRlcih0ID0+IHQucmVwbGFjZSgvXiMvLCBcIlwiKS50b0xvd2VyQ2FzZSgpICE9PSBrZXkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0xpbmUgPSB0aGlzLmJ1aWxkTGluZVdpdGhMZWFkaW5nKGxlYWQuaW5kZW50LCBrZXB0LCBsZWFkLmFmdGVyKTtcbiAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKG5ld0xpbmUsIHsgbGluZSwgY2g6IDAgfSwgeyBsaW5lLCBjaDogbGluZVRleHQubGVuZ3RoIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDIuIFJlbW92ZSBmcm9tIHRyYWlsaW5nIGJsb2NrIE9OTFkgaWYgY2xpY2tlZCBpbnNpZGUgaXRcbiAgICAgICAgaWYgKGluVHJhaWxpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IHRyYWlsSGFzID0gdHJhaWwudGFncy5zb21lKHQgPT4gdC5yZXBsYWNlKC9eIy8sIFwiXCIpLnRvTG93ZXJDYXNlKCkgPT09IGtleSk7XG4gICAgICAgICAgICBpZiAodHJhaWxIYXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXB0ID0gdHJhaWwudGFncy5maWx0ZXIodCA9PiB0LnJlcGxhY2UoL14jLywgXCJcIikudG9Mb3dlckNhc2UoKSAhPT0ga2V5KTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdMaW5lID0gdGhpcy5idWlsZExpbmVXaXRoVHJhaWxpbmcodHJhaWwuYmVmb3JlLCBrZXB0LCBzcGxpdC5ibG9ja0lkLCBzcGxpdC50cmFpbGluZ1dzKTtcbiAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKG5ld0xpbmUsIHsgbGluZSwgY2g6IDAgfSwgeyBsaW5lLCBjaDogbGluZVRleHQubGVuZ3RoIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDMuIElubGluZSB0YWcgb3IgbWFya2Rvd24tbGluayB0YWcgcmVtb3ZhbFxuICAgICAgICBpZiAoY2FuZGlkYXRlLnJhbmdlKSB7XG4gICAgICAgICAgICBjb25zdCBmcm9tQ2ggPSBjYW5kaWRhdGUucmFuZ2UuZnJvbS5jaDtcbiAgICAgICAgICAgIGNvbnN0IHRvQ2ggPSBjYW5kaWRhdGUucmFuZ2UudG8uY2g7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGVkaXRvci5nZXRSYW5nZShjYW5kaWRhdGUucmFuZ2UuZnJvbSwgY2FuZGlkYXRlLnJhbmdlLnRvKTtcblxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkICYmIHNlbGVjdGVkLnN0YXJ0c1dpdGgoXCIjXCIpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmVmb3JlVGFnID0gbGluZVRleHQuc2xpY2UoMCwgZnJvbUNoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhZnRlclRhZyA9IGxpbmVUZXh0LnNsaWNlKHRvQ2gpO1xuXG4gICAgICAgICAgICAgICAgLy8gRWRnZSBjYXNlOiBVc2VyIHdhbnRzIHRvIHJlbW92ZSBhIHRhZyBmb3JtYXR0ZWQgYXMgYSBtYXJrZG93biBsaW5rIGBbI3RhZ10oI3RhZylgXG4gICAgICAgICAgICAgICAgaWYgKGJlZm9yZVRhZy5lbmRzV2l0aChcIltcIikgJiYgYWZ0ZXJUYWcuc3RhcnRzV2l0aChgXSgke3NlbGVjdGVkfSlgKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZXhwYW5kZWRGcm9tID0gZnJvbUNoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGV4cGFuZGVkVG8gPSB0b0NoICsgMyArIHNlbGVjdGVkLmxlbmd0aDsgLy8gbGVuZ3RoIG9mIGBdKGAgKyB0YWcgKyBgKWBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChleHBhbmRlZFRvIDwgbGluZVRleHQubGVuZ3RoICYmIGxpbmVUZXh0LmNoYXJBdChleHBhbmRlZFRvKSA9PT0gJyAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBhbmRlZFRvKys7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXhwYW5kZWRGcm9tID4gMCAmJiBsaW5lVGV4dC5jaGFyQXQoZXhwYW5kZWRGcm9tIC0gMSkgPT09ICcgJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kZWRGcm9tLS07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoXCJcIiwgeyBsaW5lLCBjaDogZXhwYW5kZWRGcm9tIH0sIHsgbGluZSwgY2g6IGV4cGFuZGVkVG8gfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU3RhbmRhcmQgaW5saW5lIHRhZzogc3RyaXAgdGhlICcjJ1xuICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKHNlbGVjdGVkLnNsaWNlKDEpLCBjYW5kaWRhdGUucmFuZ2UuZnJvbSwgY2FuZGlkYXRlLnJhbmdlLnRvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDAgU2V0dGluZ3MgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGxvYWRlZCA9IChhd2FpdCB0aGlzLmxvYWREYXRhKCkpID8/IHt9O1xuICAgICAgICBjb25zdCBhbnlMb2FkZWQgPSBsb2FkZWQgYXMgUGFydGlhbDxGbGF0VGFnUGx1Z2luU2V0dGluZ3M+ICYgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG5cbiAgICAgICAgY29uc3QgbW9kZSA9IGFueUxvYWRlZC5hbHRDbGlja1RhZ01vZGU7XG5cbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIHBpbm5lZFRhZ3M6IEFycmF5LmlzQXJyYXkoYW55TG9hZGVkLnBpbm5lZFRhZ3MpXG4gICAgICAgICAgICAgICAgPyAoYW55TG9hZGVkLnBpbm5lZFRhZ3MgYXMgdW5rbm93bltdKS5maWx0ZXIoKHQpOiB0IGlzIHN0cmluZyA9PiB0eXBlb2YgdCA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICA6IERFRkFVTFRfU0VUVElOR1MucGlubmVkVGFncyxcblxuICAgICAgICAgICAgZnJlcXVlbmN5Q3V0b2ZmOiAodHlwZW9mIGFueUxvYWRlZC5mcmVxdWVuY3lDdXRvZmYgPT09IFwibnVtYmVyXCIgJiYgIWlzTmFOKGFueUxvYWRlZC5mcmVxdWVuY3lDdXRvZmYpKVxuICAgICAgICAgICAgICAgID8gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihhbnlMb2FkZWQuZnJlcXVlbmN5Q3V0b2ZmKSlcbiAgICAgICAgICAgICAgICA6IERFRkFVTFRfU0VUVElOR1MuZnJlcXVlbmN5Q3V0b2ZmLFxuXG4gICAgICAgICAgICBmcmVxdWVuY3lDdXRvZmZFbmFibGVkOiB0eXBlb2YgYW55TG9hZGVkLmZyZXF1ZW5jeUN1dG9mZkVuYWJsZWQgPT09IFwiYm9vbGVhblwiXG4gICAgICAgICAgICAgICAgPyBhbnlMb2FkZWQuZnJlcXVlbmN5Q3V0b2ZmRW5hYmxlZFxuICAgICAgICAgICAgICAgIDogREVGQVVMVF9TRVRUSU5HUy5mcmVxdWVuY3lDdXRvZmZFbmFibGVkLFxuXG4gICAgICAgICAgICBhbHRDbGlja1RhZ01vZGU6IChtb2RlID09PSBcInN0YXJ0LWxpbmVcIiB8fCBtb2RlID09PSBcImluLXBsYWNlXCIgfHwgbW9kZSA9PT0gXCJlbmQtbGluZVwiKVxuICAgICAgICAgICAgICAgID8gbW9kZVxuICAgICAgICAgICAgICAgIDogREVGQVVMVF9TRVRUSU5HUy5hbHRDbGlja1RhZ01vZGUsXG5cbiAgICAgICAgICAgIG1vYmlsZUxvbmdQcmVzc0VuYWJsZWQ6IHR5cGVvZiBhbnlMb2FkZWQubW9iaWxlTG9uZ1ByZXNzRW5hYmxlZCA9PT0gXCJib29sZWFuXCJcbiAgICAgICAgICAgICAgICA/IGFueUxvYWRlZC5tb2JpbGVMb25nUHJlc3NFbmFibGVkXG4gICAgICAgICAgICAgICAgOiBERUZBVUxUX1NFVFRJTkdTLm1vYmlsZUxvbmdQcmVzc0VuYWJsZWQsXG5cbiAgICAgICAgICAgIG1vYmlsZUxvbmdQcmVzc01zOiAodHlwZW9mIGFueUxvYWRlZC5tb2JpbGVMb25nUHJlc3NNcyA9PT0gXCJudW1iZXJcIiAmJiAhaXNOYU4oYW55TG9hZGVkLm1vYmlsZUxvbmdQcmVzc01zKSlcbiAgICAgICAgICAgICAgICA/IE1hdGgubWF4KDI1MCwgTWF0aC5taW4oNTAwMCwgTWF0aC5mbG9vcihhbnlMb2FkZWQubW9iaWxlTG9uZ1ByZXNzTXMpKSlcbiAgICAgICAgICAgICAgICA6IERFRkFVTFRfU0VUVElOR1MubW9iaWxlTG9uZ1ByZXNzTXMsXG5cbiAgICAgICAgICAgIHNob3dQbGFjZW1lbnRJblN0YXR1c0JhcjogdHlwZW9mIGFueUxvYWRlZC5zaG93UGxhY2VtZW50SW5TdGF0dXNCYXIgPT09IFwiYm9vbGVhblwiXG4gICAgICAgICAgICAgICAgPyBhbnlMb2FkZWQuc2hvd1BsYWNlbWVudEluU3RhdHVzQmFyXG4gICAgICAgICAgICAgICAgOiBERUZBVUxUX1NFVFRJTkdTLnNob3dQbGFjZW1lbnRJblN0YXR1c0JhcixcbiAgICAgICAgfSBhcyBGbGF0VGFnUGx1Z2luU2V0dGluZ3M7XG5cbiAgICAgICAgLy8gUGVyc2lzdCBpbW1lZGlhdGVseSB0byBkcm9wIHN0YWxlIGtleXMgYW5kIGJhY2tmaWxsIG5ldyBkZWZhdWx0c1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoXCJmbGF0LXRhZy12aWV3OnNldHRpbmdzLXVwZGF0ZWRcIik7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdHVzQmFyKCk7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwIFZpZXcgYWN0aXZhdGlvbiAvIHN0eWxlIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gICAgYXN5bmMgYWN0aXZhdGVWaWV3KCkge1xuICAgICAgICBjb25zdCB3b3Jrc3BhY2UgPSB0aGlzLmFwcC53b3Jrc3BhY2U7XG4gICAgICAgIGxldCBsZWFmID0gd29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEUpWzBdO1xuXG4gICAgICAgIGlmICghbGVhZikge1xuICAgICAgICAgICAgY29uc3QgcmlnaHRMZWFmID0gd29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG4gICAgICAgICAgICBpZiAoIXJpZ2h0TGVhZikgcmV0dXJuO1xuICAgICAgICAgICAgbGVhZiA9IHJpZ2h0TGVhZjtcbiAgICAgICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHsgdHlwZTogVklFV19UWVBFIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgd29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRTdHlsZSgpIHtcbiAgICAgICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgc3R5bGVFbC5pbm5lckhUTUwgPSBnZXRTdHlsZXMoKTtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICB9XG59IiwgImV4cG9ydCBjb25zdCBWSUVXX1RZUEUgPSBcImZsYXQtdGFnLXZpZXdcIjtcbiIsICJpbXBvcnQgeyBJdGVtVmlldywgUGxhdGZvcm0sIHNldEljb24sIFRGaWxlLCBXb3Jrc3BhY2VMZWFmLCBOb3RpY2UsIE1vZGFsLCBBcHAsIFNldHRpbmcsIEJ1dHRvbkNvbXBvbmVudCwgTWVudSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgVklFV19UWVBFIH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgRmxhdFRhZ1BsdWdpbiBmcm9tIFwiLi9tYWluXCI7XG5cbnR5cGUgU29ydE1vZGUgPSBcImF6XCIgfCBcImNvdW50XCI7XG50eXBlIFNlYXJjaE1vZGUgPSBcIm5vdGVcIiB8IFwibGluZVwiIHwgXCJ0YXNrXCIgfCBcInRhc2stdG9kb1wiIHwgXCJ0YXNrLWRvbmVcIjtcblxuLy8gXHUyNTAwXHUyNTAwIEdsb2JhbCBNdXRlIENvbmZpcm1hdGlvbiBNb2RhbCBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbmNsYXNzIEdsb2JhbE11dGVDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdHRhZ1RvTXV0ZTogc3RyaW5nO1xuXHRvbkNvbmZpcm06ICgpID0+IHZvaWQ7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHRhZ1RvTXV0ZTogc3RyaW5nLCBvbkNvbmZpcm06ICgpID0+IHZvaWQpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMudGFnVG9NdXRlID0gdGFnVG9NdXRlO1xuXHRcdHRoaXMub25Db25maXJtID0gb25Db25maXJtO1xuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJHbG9iYWwgTXV0ZSBUYWdcIiB9KTtcblx0XHRcblx0XHRjb25zdCBpc0N1cnJlbnRseU11dGVkID0gdGhpcy50YWdUb011dGUuc3RhcnRzV2l0aChcIiVcIik7XG5cdFx0Y29uc3QgdGFyZ2V0U3RhdGUgPSBpc0N1cnJlbnRseU11dGVkID8gXCJVTi1NVVRFXCIgOiBcIk1VVEVcIjtcblx0XHRjb25zdCByZXN1bHRpbmdUYWcgPSBpc0N1cnJlbnRseU11dGVkIFxuXHRcdFx0PyBgIyR7dGhpcy50YWdUb011dGUuc2xpY2UoMSl9YCBcblx0XHRcdDogYCMlJHt0aGlzLnRhZ1RvTXV0ZX1gO1xuXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7IFxuXHRcdFx0dGV4dDogYEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBnbG9iYWxseSAke3RhcmdldFN0YXRlfSB0aGUgdGFnICMke3RoaXMudGFnVG9NdXRlfT9gXG5cdFx0fSk7XG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7IFxuXHRcdFx0dGV4dDogYFRoaXMgd2lsbCBzZWFyY2ggeW91ciBlbnRpcmUgdmF1bHQgYW5kIGNoYW5nZSBldmVyeSBpbnN0YW5jZSB0byAke3Jlc3VsdGluZ1RhZ30uIFRoaXMgYWN0aW9uIG1vZGlmaWVzIHlvdXIgZmlsZXMgYW5kIGNhbm5vdCBiZSBlYXNpbHkgdW5kb25lLmAgXG5cdFx0fSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuYWRkQnV0dG9uKChidG46IEJ1dHRvbkNvbXBvbmVudCkgPT5cblx0XHRcdFx0YnRuXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJDYW5jZWxcIilcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB0aGlzLmNsb3NlKCkpXG5cdFx0XHQpXG5cdFx0XHQuYWRkQnV0dG9uKChidG46IEJ1dHRvbkNvbXBvbmVudCkgPT5cblx0XHRcdFx0YnRuXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoYFllcywgJHt0YXJnZXRTdGF0ZX0gR2xvYmFsbHlgKVxuXHRcdFx0XHRcdC5zZXRDdGEoKVxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMub25Db25maXJtKCk7XG5cdFx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG4vLyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuZXhwb3J0IGNsYXNzIEZsYXRUYWdWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuXHRwdWJsaWMgcGx1Z2luOiBGbGF0VGFnUGx1Z2luO1xuXG5cdHByaXZhdGUgY29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG5cdHByaXZhdGUgdGFnQ29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG5cblx0cHJpdmF0ZSBzb3J0Q29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG5cdHByaXZhdGUgc29ydEF6QnRuITogSFRNTEVsZW1lbnQ7XG5cdHByaXZhdGUgc29ydENvdW50QnRuITogSFRNTEVsZW1lbnQ7XG5cblx0cHJpdmF0ZSBzY29wZUJ0biE6IEhUTUxFbGVtZW50O1xuXHRwcml2YXRlIHRhc2tCdG4hOiBIVE1MRWxlbWVudDtcblxuXHRwcml2YXRlIGN1dG9mZlRvZ2dsZUJ0biE6IEhUTUxFbGVtZW50O1xuXHRwcml2YXRlIGN1dG9mZklucHV0ITogSFRNTElucHV0RWxlbWVudDtcblxuXHRwcml2YXRlIHNlbGVjdGVkVGFnczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XG5cdHByaXZhdGUgZXhjbHVkZWRUYWdzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcblxuXHRwcml2YXRlIGFsbFRhZ3M6IE1hcDxzdHJpbmcsIG51bWJlcj4gPSBuZXcgTWFwKCk7XG5cdHByaXZhdGUgdGFnc0J5RmlsZTogTWFwPHN0cmluZywgc3RyaW5nW10+ID0gbmV3IE1hcCgpO1xuXG5cdHByaXZhdGUgY3VycmVudFNvcnQ6IFNvcnRNb2RlID0gXCJhelwiO1xuXHRwcml2YXRlIHNlYXJjaE1vZGU6IFNlYXJjaE1vZGUgPSBcIm5vdGVcIjtcblxuXHRwcml2YXRlIHRhZ1NlYXJjaFRleHQgPSBcIlwiO1xuXG5cdHByaXZhdGUgdG91Y2hUaW1lcjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgbGFzdEludGVyYWN0aW9uV2FzVG91Y2ggPSBmYWxzZTtcblx0cHJpdmF0ZSByZW5kZXJJZCA9IDA7XG5cblx0Y29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBGbGF0VGFnUGx1Z2luKSB7XG5cdFx0c3VwZXIobGVhZik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdFx0dGhpcy5jb250YWluZXJFbC5hZGRDbGFzcyhcImZsYXQtdGFnLXZpZXdcIik7XG5cdH1cblxuXHRnZXRWaWV3VHlwZSgpOiBzdHJpbmcgeyByZXR1cm4gVklFV19UWVBFOyB9XG5cdGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7IHJldHVybiBcIkZsYXQgVGFnc1wiOyB9XG5cdGdldEljb24oKTogc3RyaW5nIHsgcmV0dXJuIFwidGFnXCI7IH1cblxuXHRhc3luYyBvbk9wZW4oKSB7XG5cdFx0dGhpcy5jb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwiZmxhdC10YWctY29udGFpbmVyXCIgfSk7XG5cblx0XHR0aGlzLmNvbnRhaW5lckVsLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsICgpID0+IHtcblx0XHRcdHRoaXMubGFzdEludGVyYWN0aW9uV2FzVG91Y2ggPSB0cnVlO1xuXHRcdH0sIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcblxuXHRcdHRoaXMuY29udGFpbmVyRWwuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIChlOiBQb2ludGVyRXZlbnQpID0+IHtcblx0XHRcdGlmIChlLnBvaW50ZXJUeXBlICYmIGUucG9pbnRlclR5cGUgIT09IFwidG91Y2hcIikgdGhpcy5sYXN0SW50ZXJhY3Rpb25XYXNUb3VjaCA9IGZhbHNlO1xuXHRcdH0sIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcblxuXHRcdHRoaXMuc29ydENvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJmbGF0LXRhZy1zb3J0LWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IGJ1dHRvblNlY3Rpb24gPSB0aGlzLnNvcnRDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcImZsYXQtdGFnLWJ1dHRvbnMtc2VjdGlvblwiIH0pO1xuXG5cdFx0dGhpcy5zb3J0QXpCdG4gPSBidXR0b25TZWN0aW9uLmNyZWF0ZURpdih7IGNsczogXCJmbGF0LXRhZy1zb3J0LWJ1dHRvblwiLCB0aXRsZTogXCJTb3J0IEEtWlwiIH0pO1xuXHRcdHNldEljb24odGhpcy5zb3J0QXpCdG4sIFwibHVjaWRlLXNvcnQtYXNjXCIpO1xuXG5cdFx0dGhpcy5zb3J0Q291bnRCdG4gPSBidXR0b25TZWN0aW9uLmNyZWF0ZURpdih7IGNsczogXCJmbGF0LXRhZy1zb3J0LWJ1dHRvblwiLCB0aXRsZTogXCJTb3J0IGJ5IHVzYWdlXCIgfSk7XG5cdFx0c2V0SWNvbih0aGlzLnNvcnRDb3VudEJ0biwgXCJsdWNpZGUtYmFyLWNoYXJ0LTJcIik7XG5cblx0XHRjb25zdCBjbGVhckJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiBcImZsYXQtdGFnLWNsZWFyLWJ1dHRvblwiLCB0aXRsZTogXCJDbGVhciB0YWcgc2VsZWN0aW9uc1wiIH0pO1xuXHRcdHNldEljb24oY2xlYXJCdXR0b24sIFwieFwiKTtcblx0XHRjbGVhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbGVhclRhZ1NlbGVjdGlvbnMoKSk7XG5cblx0XHR0aGlzLnNjb3BlQnRuID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiBcImZsYXQtdGFnLW1vZGUtYnV0dG9uXCIsIHRleHQ6IFwiTk9URVwiLCB0aXRsZTogXCJDbGljayB0byBjeWNsZTogTm90ZSAtPiBMaW5lXCIsXG5cdFx0fSk7XG5cdFx0dGhpcy50YXNrQnRuID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiBcImZsYXQtdGFnLW1vZGUtYnV0dG9uXCIsIHRleHQ6IFwiVEFTSy1BTExcIiwgdGl0bGU6IFwiQ2xpY2sgdG8gY3ljbGU6IEFsbCAtPiBUb2RvIC0+IERvbmVcIixcblx0XHR9KTtcblxuXHRcdGNvbnN0IGN1dG9mZlNwYWNlciA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiBcImZsYXQtdGFnLWN1dG9mZi1zcGFjZXJcIiB9KTtcblx0XHRjdXRvZmZTcGFjZXIuYXJpYUhpZGRlbiA9IFwidHJ1ZVwiO1xuXG5cdFx0Y29uc3QgY3V0b2ZmU2VjdGlvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiBcImZsYXQtdGFnLWN1dG9mZi1zZWN0aW9uXCIgfSk7XG5cdFx0dGhpcy5jdXRvZmZUb2dnbGVCdG4gPSBjdXRvZmZTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogXCJmbGF0LXRhZy1jdXRvZmYtdG9nZ2xlXCIsIHRpdGxlOiBcIlRvZ2dsZSBmcmVxdWVuY3kgY3V0b2ZmXCIgfSk7XG5cdFx0dGhpcy5jdXRvZmZJbnB1dCA9IGN1dG9mZlNlY3Rpb24uY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG5cdFx0XHRjbHM6IFwiZmxhdC10YWctY3V0b2ZmLWlucHV0XCIsXG5cdFx0XHRhdHRyOiB7IHR5cGU6IFwibnVtYmVyXCIsIG1pbjogXCIwXCIsIHN0ZXA6IFwiMVwiLCBpbnB1dG1vZGU6IFwibnVtZXJpY1wiLCBwbGFjZWhvbGRlcjogXCIwXCIgfSxcblx0XHR9KTtcblxuXHRcdHRoaXMuY3V0b2ZmVG9nZ2xlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5mcmVxdWVuY3lDdXRvZmZFbmFibGVkID0gIXRoaXMucGx1Z2luLnNldHRpbmdzLmZyZXF1ZW5jeUN1dG9mZkVuYWJsZWQ7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdHRoaXMuc3luY0N1dG9mZkNvbnRyb2xzRnJvbVNldHRpbmdzKCk7XG5cdFx0XHR0aGlzLnJlbmRlclRhZ3MoKTtcblx0XHR9KTtcblxuXHRcdHRoaXMuY3V0b2ZmSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnN0IHBhcnNlZCA9IHBhcnNlSW50KHRoaXMuY3V0b2ZmSW5wdXQudmFsdWUsIDEwKTtcblx0XHRcdGlmICghaXNOYU4ocGFyc2VkKSAmJiBwYXJzZWQgPj0gMCkge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5mcmVxdWVuY3lDdXRvZmYgPSBwYXJzZWQ7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR0aGlzLnJlbmRlclRhZ3MoKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuc29ydEF6QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cdFx0XHRpZiAodGhpcy5jdXJyZW50U29ydCA9PT0gXCJhelwiKSB7XG5cdFx0XHRcdGNvbnN0IHZhdWx0TmFtZSA9IHRoaXMuYXBwLnZhdWx0LmdldE5hbWUoKTtcblx0XHRcdFx0Y29uc3QgY291bnQgPSBPYmplY3Qua2V5cyh0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldFRhZ3MoKSkubGVuZ3RoO1xuXHRcdFx0XHRuZXcgTm90aWNlKGAnJHt2YXVsdE5hbWV9JzogJHtjb3VudH0gdW5pcXVlIHRhZ3NgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuY3VycmVudFNvcnQgPSBcImF6XCI7XG5cdFx0XHRcdHRoaXMudXBkYXRlTW9kZVVJKHRydWUpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5zb3J0Q291bnRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcblx0XHRcdGlmICh0aGlzLmN1cnJlbnRTb3J0ID09PSBcImNvdW50XCIpIHtcblx0XHRcdFx0Y29uc3QgdmF1bHROYW1lID0gdGhpcy5hcHAudmF1bHQuZ2V0TmFtZSgpO1xuXHRcdFx0XHRjb25zdCBjb3VudCA9IE9iamVjdC5rZXlzKHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0VGFncygpKS5sZW5ndGg7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYCcke3ZhdWx0TmFtZX0nOiAke2NvdW50fSB1bmlxdWUgdGFnc2ApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5jdXJyZW50U29ydCA9IFwiY291bnRcIjtcblx0XHRcdFx0dGhpcy51cGRhdGVNb2RlVUkodHJ1ZSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLnNjb3BlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnRvZ2dsZVNjb3BlTW9kZSgpKTtcblx0XHR0aGlzLnRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMudG9nZ2xlVGFza01vZGUoKSk7XG5cblx0XHRjb25zdCBzZWFyY2hTZWN0aW9uID0gdGhpcy5zb3J0Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJmbGF0LXRhZy1zZWFyY2gtc2VjdGlvblwiIH0pO1xuXHRcdGNvbnN0IHNlYXJjaEJveCA9IHNlYXJjaFNlY3Rpb24uY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG5cdFx0XHRjbHM6IFwiZmxhdC10YWctc2VhcmNoLWlucHV0XCIsXG5cdFx0XHRhdHRyOiB7IHR5cGU6IFwidGV4dFwiLCBwbGFjZWhvbGRlcjogXCJTZWFyY2ggdGFncy4uLlwiIH0sXG5cdFx0fSk7XG5cblx0XHRjb25zdCBjbGVhclNlYXJjaEJ1dHRvbiA9IHNlYXJjaFNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiBcImZsYXQtdGFnLXNlYXJjaC1jbGVhci1idXR0b25cIiwgdGl0bGU6IFwiQ2xlYXIgc2VhcmNoXCIgfSk7XG5cdFx0c2V0SWNvbihjbGVhclNlYXJjaEJ1dHRvbiwgXCJzcXVhcmUteFwiKTtcblx0XHRjbGVhclNlYXJjaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbGVhclNlYXJjaEJveCgpKTtcblxuXHRcdHNlYXJjaEJveC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcblx0XHRcdGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cdFx0XHR0aGlzLnRhZ1NlYXJjaFRleHQgPSB0YXJnZXQudmFsdWUgPz8gXCJcIjtcblx0XHRcdHRoaXMucmVuZGVyVGFncygpO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy50YWdDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwiZmxhdC10YWctbGlzdFwiIH0pO1xuXG5cdFx0dGhpcy5zeW5jQ3V0b2ZmQ29udHJvbHNGcm9tU2V0dGluZ3MoKTtcblx0XHR0aGlzLnVwZGF0ZU1vZGVVSSh0cnVlKTtcblxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KGFzeW5jICgpID0+IHtcblx0XHRcdGF3YWl0IHRoaXMubG9hZFRhZ3MoKTtcblx0XHR9KTtcblxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLm9uKFwiY2hhbmdlZFwiLCAoZmlsZTogVEZpbGUpID0+IHtcblx0XHRcdHRoaXMudXBkYXRlRmlsZVRhZ3MoZmlsZSk7XG5cdFx0fSkpO1xuXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKFwiZGVsZXRlXCIsIChmaWxlKSA9PiB7XG5cdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcblx0XHRcdFx0dGhpcy5yZW1vdmVGaWxlVGFncyhmaWxlLnBhdGgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlclRhZ3MoKTtcblx0XHRcdH1cblx0XHR9KSk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAudmF1bHQub24oXCJyZW5hbWVcIiwgKGZpbGUsIG9sZFBhdGgpID0+IHtcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09IFwibWRcIikge1xuXHRcdFx0XHRjb25zdCB0YWdzID0gdGhpcy50YWdzQnlGaWxlLmdldChvbGRQYXRoKTtcblx0XHRcdFx0aWYgKHRhZ3MpIHtcblx0XHRcdFx0XHR0aGlzLnRhZ3NCeUZpbGUuc2V0KGZpbGUucGF0aCwgdGFncyk7XG5cdFx0XHRcdFx0dGhpcy50YWdzQnlGaWxlLmRlbGV0ZShvbGRQYXRoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pKTtcblxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJmbGF0LXRhZy12aWV3OnNldHRpbmdzLXVwZGF0ZWRcIiBhcyBhbnksICgpID0+IHtcblx0XHRcdHRoaXMuc3luY0N1dG9mZkNvbnRyb2xzRnJvbVNldHRpbmdzKCk7XG5cdFx0XHR0aGlzLnJlbmRlclRhZ3MoKTtcblx0XHR9KSk7XG5cdH1cblxuXHRhc3luYyBvbkNsb3NlKCkge1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdH1cblxuXHRhc3luYyBsb2FkVGFncygpIHtcblx0XHR0aGlzLmFsbFRhZ3MuY2xlYXIoKTtcblx0XHR0aGlzLnRhZ3NCeUZpbGUuY2xlYXIoKTtcblx0XHRjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblx0XHRmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcblx0XHRcdGNvbnN0IGZpbGVUYWdzID0gdGhpcy5nZXRGaWxlVGFncyhmaWxlKTtcblx0XHRcdHRoaXMudGFnc0J5RmlsZS5zZXQoZmlsZS5wYXRoLCBmaWxlVGFncyk7XG5cdFx0XHRmaWxlVGFncy5mb3JFYWNoKHRhZyA9PiB0aGlzLmFsbFRhZ3Muc2V0KHRhZywgKHRoaXMuYWxsVGFncy5nZXQodGFnKSB8fCAwKSArIDEpKTtcblx0XHR9XG5cdFx0dGhpcy5yZW5kZXJUYWdzKCk7XG5cdH1cblxuXHRwcml2YXRlIHVwZGF0ZUZpbGVUYWdzKGZpbGU6IFRGaWxlKSB7XG5cdFx0Y29uc3Qgb2xkVGFnc0FyciA9IHRoaXMudGFnc0J5RmlsZS5nZXQoZmlsZS5wYXRoKSB8fCBbXTtcblx0XHRjb25zdCBuZXdUYWdzQXJyID0gdGhpcy5nZXRGaWxlVGFncyhmaWxlKTtcblx0XHRjb25zdCBvbGRTb3J0ZWQgPSBbLi4ub2xkVGFnc0Fycl0uc29ydCgpLmpvaW4oXCIsXCIpO1xuXHRcdGNvbnN0IG5ld1NvcnRlZCA9IFsuLi5uZXdUYWdzQXJyXS5zb3J0KCkuam9pbihcIixcIik7XG5cdFx0aWYgKG9sZFNvcnRlZCA9PT0gbmV3U29ydGVkKSB7XG5cdFx0XHRpZiAodGhpcy5zZWxlY3RlZFRhZ3Muc2l6ZSA+IDAgJiYgdGhpcy5zZWFyY2hNb2RlICE9PSBcIm5vdGVcIikge1xuXHRcdFx0XHRjb25zdCBzZWxlY3RlZEFyciA9IEFycmF5LmZyb20odGhpcy5zZWxlY3RlZFRhZ3MpO1xuXHRcdFx0XHRpZiAoc2VsZWN0ZWRBcnIuZXZlcnkodCA9PiBvbGRUYWdzQXJyLmluY2x1ZGVzKHQpKSkge1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyVGFncygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0b2xkVGFnc0Fyci5mb3JFYWNoKHRhZyA9PiB7XG5cdFx0XHRjb25zdCBjb3VudCA9ICh0aGlzLmFsbFRhZ3MuZ2V0KHRhZykgfHwgMCkgLSAxO1xuXHRcdFx0aWYgKGNvdW50IDw9IDApIHRoaXMuYWxsVGFncy5kZWxldGUodGFnKTtcblx0XHRcdGVsc2UgdGhpcy5hbGxUYWdzLnNldCh0YWcsIGNvdW50KTtcblx0XHR9KTtcblx0XHRuZXdUYWdzQXJyLmZvckVhY2godGFnID0+IHRoaXMuYWxsVGFncy5zZXQodGFnLCAodGhpcy5hbGxUYWdzLmdldCh0YWcpIHx8IDApICsgMSkpO1xuXHRcdHRoaXMudGFnc0J5RmlsZS5zZXQoZmlsZS5wYXRoLCBuZXdUYWdzQXJyKTtcblx0XHR0aGlzLnJlbmRlclRhZ3MoKTtcblx0fVxuXG5cdHByaXZhdGUgcmVtb3ZlRmlsZVRhZ3MoZmlsZVBhdGg6IHN0cmluZykge1xuXHRcdGNvbnN0IG9sZFRhZ3MgPSB0aGlzLnRhZ3NCeUZpbGUuZ2V0KGZpbGVQYXRoKTtcblx0XHRpZiAoIW9sZFRhZ3MpIHJldHVybjtcblx0XHRvbGRUYWdzLmZvckVhY2godGFnID0+IHtcblx0XHRcdGNvbnN0IGNvdW50ID0gKHRoaXMuYWxsVGFncy5nZXQodGFnKSB8fCAwKSAtIDE7XG5cdFx0XHRpZiAoY291bnQgPD0gMCkgdGhpcy5hbGxUYWdzLmRlbGV0ZSh0YWcpO1xuXHRcdFx0ZWxzZSB0aGlzLmFsbFRhZ3Muc2V0KHRhZywgY291bnQpO1xuXHRcdH0pO1xuXHRcdHRoaXMudGFnc0J5RmlsZS5kZWxldGUoZmlsZVBhdGgpO1xuXHR9XG5cblx0YXN5bmMgcmVuZGVyVGFncygpIHtcblx0XHR0aGlzLnNvcnRBekJ0bi50b2dnbGVDbGFzcyhcImlzLWFjdGl2ZVwiLCB0aGlzLmN1cnJlbnRTb3J0ID09PSBcImF6XCIpO1xuXHRcdHRoaXMuc29ydENvdW50QnRuLnRvZ2dsZUNsYXNzKFwiaXMtYWN0aXZlXCIsIHRoaXMuY3VycmVudFNvcnQgPT09IFwiY291bnRcIik7XG5cblx0XHRjb25zdCBjdXJyZW50UmVuZGVySWQgPSArK3RoaXMucmVuZGVySWQ7XG5cdFx0Y29uc3QgZmlsdGVyZWRUYWdzID0gYXdhaXQgdGhpcy5nZXRGaWx0ZXJlZFRhZ3NBc3luYygpO1xuXHRcdGlmIChjdXJyZW50UmVuZGVySWQgIT09IHRoaXMucmVuZGVySWQpIHJldHVybjtcblxuXHRcdHRoaXMudGFnQ29udGFpbmVyLmVtcHR5KCk7XG5cblx0XHRjb25zdCBwaW5uZWQgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuXHRcdGNvbnN0IG5vcm1hbCA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG5cdFx0Y29uc3QgcGlubmVkU2V0ID0gbmV3IFNldCh0aGlzLnBsdWdpbi5zZXR0aW5ncy5waW5uZWRUYWdzID8/IFtdKTtcblxuXHRcdGZpbHRlcmVkVGFncy5mb3JFYWNoKChjb3VudCwgdGFnKSA9PiB7XG5cdFx0XHRpZiAocGlubmVkU2V0Lmhhcyh0YWcpKSBwaW5uZWQuc2V0KHRhZywgY291bnQpO1xuXHRcdFx0ZWxzZSBub3JtYWwuc2V0KHRhZywgY291bnQpO1xuXHRcdH0pO1xuXG5cdFx0aWYgKHBpbm5lZC5zaXplID4gMCkge1xuXHRcdFx0Y29uc3QgcGluQ29udGFpbmVyID0gdGhpcy50YWdDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcImZsYXQtdGFnLXBpbm5lZC1zZWN0aW9uXCIgfSk7XG5cdFx0XHRjb25zdCBwaW5uZWRJY29uID0gcGluQ29udGFpbmVyLmNyZWF0ZVNwYW4oeyBjbHM6IFwiZmxhdC10YWctbGV0dGVyXCIgfSk7XG5cdFx0XHRzZXRJY29uKHBpbm5lZEljb24sIFwicGluXCIpO1xuXHRcdFx0QXJyYXkuZnJvbShwaW5uZWQuZW50cmllcygpKVxuXHRcdFx0XHQuc29ydCgoYSwgYikgPT4gYVswXS5sb2NhbGVDb21wYXJlKGJbMF0sIFwicGxcIikpXG5cdFx0XHRcdC5mb3JFYWNoKChbdGFnLCBjb3VudF0pID0+IHRoaXMuY3JlYXRlVGFnRWxlbWVudCh0YWcsIGNvdW50LCBwaW5Db250YWluZXIpKTtcblx0XHRcdHRoaXMudGFnQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJmbGF0LXRhZy1zZXBhcmF0b3JcIiB9KTtcblx0XHR9XG5cblx0XHRsZXQgc29ydGVkVGFncyA9IEFycmF5LmZyb20obm9ybWFsLmVudHJpZXMoKSk7XG5cblx0XHRpZiAodGhpcy5jdXJyZW50U29ydCA9PT0gXCJhelwiKSB7XG5cdFx0XHQvLyBUcnVlIHVuaXZlcnNhbCBzb3J0aW5nIChcdTAxMDQgYWZ0ZXIgQSwgXHUwMTA2IGFmdGVyIEMpXG5cdFx0XHRjb25zdCBjb2xsYXRvciA9IG5ldyBJbnRsLkNvbGxhdG9yKFwicGxcIiwgeyBudW1lcmljOiB0cnVlLCBzZW5zaXRpdml0eTogXCJiYXNlXCIgfSk7XG5cdFx0XHRcblx0XHRcdC8vIEN1c3RvbSBzb3J0IGZ1bmN0aW9uIHRoYXQgZm9yY2VzIGVtb2ppcywgbnVtYmVycywgYW5kIHN5bWJvbHMgdG8gdGhlIGFic29sdXRlIHRvcFxuXHRcdFx0c29ydGVkVGFncy5zb3J0KChhLCBiKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGNoYXJBID0gQXJyYXkuZnJvbShhWzBdKVswXSB8fCBcIlwiO1xuXHRcdFx0XHRjb25zdCBjaGFyQiA9IEFycmF5LmZyb20oYlswXSlbMF0gfHwgXCJcIjtcblx0XHRcdFx0Y29uc3QgaXNMZXR0ZXJBID0gL15cXHB7TH0kL3UudGVzdChjaGFyQSk7XG5cdFx0XHRcdGNvbnN0IGlzTGV0dGVyQiA9IC9eXFxwe0x9JC91LnRlc3QoY2hhckIpO1xuXG5cdFx0XHRcdC8vIElmIG9uZSBpcyBub3QgYSBsZXR0ZXIgYW5kIHRoZSBvdGhlciBpcywgdGhlIG5vbi1sZXR0ZXIgd2lucyAoZ29lcyB0byB0b3ApXG5cdFx0XHRcdGlmICghaXNMZXR0ZXJBICYmIGlzTGV0dGVyQikgcmV0dXJuIC0xO1xuXHRcdFx0XHRpZiAoaXNMZXR0ZXJBICYmICFpc0xldHRlckIpIHJldHVybiAxO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCB1c2UgbmF0aXZlIFBvbGlzaCBzb3J0aW5nXG5cdFx0XHRcdHJldHVybiBjb2xsYXRvci5jb21wYXJlKGFbMF0sIGJbMF0pO1xuXHRcdFx0fSk7XG5cblx0XHRcdGxldCBjdXJyZW50SGVhZGVyID0gXCJcIjtcblxuXHRcdFx0Zm9yIChjb25zdCBbdGFnLCBjb3VudF0gb2Ygc29ydGVkVGFncykge1xuXHRcdFx0XHRjb25zdCBmaXJzdENoYXIgPSAoQXJyYXkuZnJvbSh0YWcpWzBdIHx8IFwiXCIpLnRvVXBwZXJDYXNlKCk7XG5cdFx0XHRcdGNvbnN0IGlzTGV0dGVyID0gL15cXHB7TH0kL3UudGVzdChmaXJzdENoYXIpO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc3QgaGVhZGVyVG9Vc2UgPSBpc0xldHRlciA/IGZpcnN0Q2hhciA6IFwiT1RIRVJcIjtcblxuXHRcdFx0XHRpZiAoaGVhZGVyVG9Vc2UgIT09IGN1cnJlbnRIZWFkZXIpIHtcblx0XHRcdFx0XHRjdXJyZW50SGVhZGVyID0gaGVhZGVyVG9Vc2U7XG5cdFx0XHRcdFx0aWYgKGN1cnJlbnRIZWFkZXIgIT09IFwiT1RIRVJcIikge1xuXHRcdFx0XHRcdFx0Y29uc3QgbGV0dGVyRWwgPSB0aGlzLnRhZ0NvbnRhaW5lci5jcmVhdGVTcGFuKHsgY2xzOiBcImZsYXQtdGFnLWxldHRlclwiIH0pO1xuXHRcdFx0XHRcdFx0bGV0dGVyRWwuc2V0VGV4dChjdXJyZW50SGVhZGVyKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLmNyZWF0ZVRhZ0VsZW1lbnQodGFnLCBjb3VudCwgdGhpcy50YWdDb250YWluZXIpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRzb3J0ZWRUYWdzLnNvcnQoKGEsIGIpID0+IHtcblx0XHRcdFx0aWYgKGJbMV0gIT09IGFbMV0pIHJldHVybiBiWzFdIC0gYVsxXTtcblx0XHRcdFx0cmV0dXJuIGFbMF0ubG9jYWxlQ29tcGFyZShiWzBdLCBcInBsXCIpO1xuXHRcdFx0fSk7XG5cdFx0XHRzb3J0ZWRUYWdzLmZvckVhY2goKFt0YWcsIGNvdW50XSkgPT4gdGhpcy5jcmVhdGVUYWdFbGVtZW50KHRhZywgY291bnQsIHRoaXMudGFnQ29udGFpbmVyKSk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBjcmVhdGVUYWdFbGVtZW50KHRhZzogc3RyaW5nLCBjb3VudDogbnVtYmVyLCBwYXJlbnRFbDogSFRNTEVsZW1lbnQpIHtcblx0XHRjb25zdCB0YWdFbCA9IHBhcmVudEVsLmNyZWF0ZVNwYW4oeyBjbHM6IFwiZmxhdC10YWdcIiB9KTtcblxuXHRcdGlmICh0aGlzLnNlbGVjdGVkVGFncy5oYXModGFnKSkgdGFnRWwuYWRkQ2xhc3MoXCJmbGF0LXRhZy1zZWxlY3RlZFwiKTtcblx0XHRlbHNlIGlmICh0aGlzLmV4Y2x1ZGVkVGFncy5oYXModGFnKSkgdGFnRWwuYWRkQ2xhc3MoXCJmbGF0LXRhZy1leGNsdWRlZFwiKTtcblx0XHRpZiAoKHRoaXMucGx1Z2luLnNldHRpbmdzLnBpbm5lZFRhZ3MgPz8gW10pLmluY2x1ZGVzKHRhZykpIHRhZ0VsLmFkZENsYXNzKFwiZmxhdC10YWctcGlubmVkXCIpO1xuXG5cdFx0dGFnRWwuc2V0VGV4dChgIyR7dGFnfSAoJHtjb3VudH0pYCk7XG5cdFx0dGFnRWwuc3R5bGUudXNlclNlbGVjdCA9IFwibm9uZVwiO1xuXHRcdCh0YWdFbC5zdHlsZSBhcyBhbnkpLndlYmtpdFVzZXJTZWxlY3QgPSBcIm5vbmVcIjtcblxuXHRcdGNvbnN0IGhhbmRsZVRhZ0ludGVyYWN0aW9uID0gYXN5bmMgKGlzTXVsdGlTZWxlY3Q6IGJvb2xlYW4sIGlzRXhjbHVkZTogYm9vbGVhbiwgaXNQaW46IGJvb2xlYW4pID0+IHtcblx0XHRcdGlmIChpc1Bpbikge1xuXHRcdFx0XHRjb25zdCBsaXN0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucGlubmVkVGFncyA/PyBbXTtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucGlubmVkVGFncyA9IGxpc3QuaW5jbHVkZXModGFnKVxuXHRcdFx0XHRcdD8gbGlzdC5maWx0ZXIodCA9PiB0ICE9PSB0YWcpXG5cdFx0XHRcdFx0OiBbLi4ubGlzdCwgdGFnXTtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyVGFncygpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmIChpc0V4Y2x1ZGUpIHtcblx0XHRcdFx0aWYgKHRoaXMuZXhjbHVkZWRUYWdzLmhhcyh0YWcpKSB0aGlzLmV4Y2x1ZGVkVGFncy5kZWxldGUodGFnKTtcblx0XHRcdFx0ZWxzZSB7IHRoaXMuZXhjbHVkZWRUYWdzLmFkZCh0YWcpOyB0aGlzLnNlbGVjdGVkVGFncy5kZWxldGUodGFnKTsgfVxuXHRcdFx0fSBlbHNlIGlmIChpc011bHRpU2VsZWN0KSB7XG5cdFx0XHRcdGlmICh0aGlzLnNlbGVjdGVkVGFncy5oYXModGFnKSkgdGhpcy5zZWxlY3RlZFRhZ3MuZGVsZXRlKHRhZyk7XG5cdFx0XHRcdGVsc2UgeyB0aGlzLnNlbGVjdGVkVGFncy5hZGQodGFnKTsgdGhpcy5leGNsdWRlZFRhZ3MuZGVsZXRlKHRhZyk7IH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmICh0aGlzLnNlbGVjdGVkVGFncy5zaXplID09PSAxICYmIHRoaXMuc2VsZWN0ZWRUYWdzLmhhcyh0YWcpKSB0aGlzLnNlbGVjdGVkVGFncy5jbGVhcigpO1xuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkVGFncy5jbGVhcigpO1xuXHRcdFx0XHRcdHRoaXMuZXhjbHVkZWRUYWdzLmNsZWFyKCk7XG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RlZFRhZ3MuYWRkKHRhZyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKHRoaXMuc2VsZWN0ZWRUYWdzLmhhcyh0YWcpKSB7XG5cdFx0XHRcdHRhZ0VsLmFkZENsYXNzKFwiZmxhdC10YWctc2VsZWN0ZWRcIik7XG5cdFx0XHRcdHRhZ0VsLnJlbW92ZUNsYXNzKFwiZmxhdC10YWctZXhjbHVkZWRcIik7XG5cdFx0XHR9IGVsc2UgaWYgKHRoaXMuZXhjbHVkZWRUYWdzLmhhcyh0YWcpKSB7XG5cdFx0XHRcdHRhZ0VsLmFkZENsYXNzKFwiZmxhdC10YWctZXhjbHVkZWRcIik7XG5cdFx0XHRcdHRhZ0VsLnJlbW92ZUNsYXNzKFwiZmxhdC10YWctc2VsZWN0ZWRcIik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0YWdFbC5yZW1vdmVDbGFzcyhcImZsYXQtdGFnLXNlbGVjdGVkXCIpO1xuXHRcdFx0XHR0YWdFbC5yZW1vdmVDbGFzcyhcImZsYXQtdGFnLWV4Y2x1ZGVkXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLnJlbmRlclRhZ3MoKTtcblx0XHRcdHZvaWQgdGhpcy51cGRhdGVTZWFyY2goKTtcblx0XHR9O1xuXG5cdFx0bGV0IHRvdWNoSGFuZGxlZCA9IGZhbHNlO1xuXHRcdGxldCB0b3VjaFN0YXJ0WCA9IDA7XG5cdFx0bGV0IHRvdWNoU3RhcnRZID0gMDtcblx0XHRsZXQgaXNTd2lwaW5nID0gZmFsc2U7XG5cdFx0bGV0IGxvbmdQcmVzc1RyaWdnZXJlZCA9IGZhbHNlO1xuXG5cdFx0Ly8gU3RhbmRhcmQgTGVmdCBDbGljayAoRmlsdGVyIC8gUGluKVxuXHRcdHRhZ0VsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuXHRcdFx0aWYgKHRvdWNoSGFuZGxlZCkge1xuXHRcdFx0XHR0b3VjaEhhbmRsZWQgPSBmYWxzZTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dm9pZCBoYW5kbGVUYWdJbnRlcmFjdGlvbighIShlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSwgISFlLnNoaWZ0S2V5LCAhIWUuYWx0S2V5KTtcblx0XHR9KTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMCBSZWxpYWJsZSBSaWdodC1DbGljayBmb3IgR2xvYmFsIE11dGUgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0dGFnRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIChlKSA9PiB7XG5cdFx0XHRpZiAoUGxhdGZvcm0uaXNNb2JpbGUpIHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFxuXHRcdFx0Y29uc3QgbWVudSA9IG5ldyBNZW51KCk7XG5cdFx0XHRjb25zdCBpc011dGVkID0gdGFnLnN0YXJ0c1dpdGgoXCIlXCIpO1xuXHRcdFx0Y29uc3QgYWN0aW9uTmFtZSA9IGlzTXV0ZWQgPyBcIkdsb2JhbCBVbi1NdXRlXCIgOiBcIkdsb2JhbCBNdXRlXCI7XG5cdFx0XHRjb25zdCB0YXJnZXRUYWcgPSBpc011dGVkID8gdGFnLnNsaWNlKDEpIDogYCUke3RhZ31gO1xuXHRcdFx0XG5cdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdFx0aXRlbVxuXHRcdFx0XHRcdC5zZXRUaXRsZShgJHthY3Rpb25OYW1lfSB0byAjJHt0YXJnZXRUYWd9YClcblx0XHRcdFx0XHQuc2V0SWNvbihcImFsZXJ0LXRyaWFuZ2xlXCIpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0bmV3IEdsb2JhbE11dGVDb25maXJtTW9kYWwodGhpcy5hcHAsIHRhZywgYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmV4ZWN1dGVHbG9iYWxNdXRlKHRhZyk7XG5cdFx0XHRcdFx0XHR9KS5vcGVuKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0bWVudS5zaG93QXRNb3VzZUV2ZW50KGUpO1xuXHRcdH0pO1xuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG5cdFx0dGFnRWwuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgKGUpID0+IHtcblx0XHRcdGNvbnN0IHRvdWNoID0gZS50b3VjaGVzWzBdO1xuXHRcdFx0dG91Y2hTdGFydFggPSB0b3VjaC5jbGllbnRYO1xuXHRcdFx0dG91Y2hTdGFydFkgPSB0b3VjaC5jbGllbnRZO1xuXHRcdFx0aXNTd2lwaW5nID0gZmFsc2U7XG5cdFx0XHRsb25nUHJlc3NUcmlnZ2VyZWQgPSBmYWxzZTtcblx0XHRcdHRvdWNoSGFuZGxlZCA9IGZhbHNlO1xuXG5cdFx0XHRpZiAodGhpcy50b3VjaFRpbWVyKSB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMudG91Y2hUaW1lcik7XG5cdFx0XHR0aGlzLnRvdWNoVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdHRoaXMudG91Y2hUaW1lciA9IG51bGw7XG5cdFx0XHRcdGlmICghaXNTd2lwaW5nKSB7XG5cdFx0XHRcdFx0bG9uZ1ByZXNzVHJpZ2dlcmVkID0gdHJ1ZTtcblx0XHRcdFx0XHR0b3VjaEhhbmRsZWQgPSB0cnVlOyBcblx0XHRcdFx0XHR2b2lkIGhhbmRsZVRhZ0ludGVyYWN0aW9uKHRydWUsIGZhbHNlLCBmYWxzZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIDUwMCk7XG5cdFx0fSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuXG5cdFx0dGFnRWwuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCAoZSkgPT4ge1xuXHRcdFx0Y29uc3QgdG91Y2ggPSBlLnRvdWNoZXNbMF07XG5cdFx0XHRjb25zdCBkeCA9IHRvdWNoLmNsaWVudFggLSB0b3VjaFN0YXJ0WDtcblx0XHRcdGNvbnN0IGR5ID0gdG91Y2guY2xpZW50WSAtIHRvdWNoU3RhcnRZO1xuXHRcdFx0aWYgKCFpc1N3aXBpbmcpIHtcblx0XHRcdFx0aWYgKE1hdGguYWJzKGR4KSA+IDEwICYmIE1hdGguYWJzKGR4KSA+IE1hdGguYWJzKGR5KSkge1xuXHRcdFx0XHRcdGlmICh0aGlzLnRvdWNoVGltZXIpIHsgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRvdWNoVGltZXIpOyB0aGlzLnRvdWNoVGltZXIgPSBudWxsOyB9XG5cdFx0XHRcdFx0aXNTd2lwaW5nID0gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIGlmIChNYXRoLmFicyhkeSkgPiAxMCkge1xuXHRcdFx0XHRcdGlmICh0aGlzLnRvdWNoVGltZXIpIHsgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRvdWNoVGltZXIpOyB0aGlzLnRvdWNoVGltZXIgPSBudWxsOyB9XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoaXNTd2lwaW5nICYmIGR4IDwgMCkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGNvbnN0IGNhcHBlZCA9IE1hdGgubWF4KGR4LCAtOTApO1xuXHRcdFx0XHR0YWdFbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgke2NhcHBlZH1weClgO1xuXHRcdFx0XHR0YWdFbC5zdHlsZS5vcGFjaXR5ID0gU3RyaW5nKDAuNSArIChNYXRoLmFicyhjYXBwZWQpIC8gOTApICogMC41KTtcblx0XHRcdH1cblx0XHR9LCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuXG5cdFx0dGFnRWwuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIChlKSA9PiB7XG5cdFx0XHRjb25zdCB0b3VjaCA9IGUuY2hhbmdlZFRvdWNoZXNbMF07XG5cdFx0XHRjb25zdCBkeCA9IHRvdWNoLmNsaWVudFggLSB0b3VjaFN0YXJ0WDtcblx0XHRcdHRhZ0VsLnN0eWxlLnRyYW5zaXRpb24gPSBcInRyYW5zZm9ybSAwLjJzIGVhc2UsIG9wYWNpdHkgMC4ycyBlYXNlXCI7XG5cdFx0XHR0YWdFbC5zdHlsZS50cmFuc2Zvcm0gPSBcIlwiO1xuXHRcdFx0dGFnRWwuc3R5bGUub3BhY2l0eSA9IFwiXCI7XG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHsgdGFnRWwuc3R5bGUudHJhbnNpdGlvbiA9IFwiXCI7IH0sIDIyMCk7XG5cblx0XHRcdGlmIChpc1N3aXBpbmcpIHtcblx0XHRcdFx0aXNTd2lwaW5nID0gZmFsc2U7XG5cdFx0XHRcdHRvdWNoSGFuZGxlZCA9IHRydWU7IFxuXHRcdFx0XHRpZiAoZHggPD0gLTYwKSB2b2lkIGhhbmRsZVRhZ0ludGVyYWN0aW9uKGZhbHNlLCBmYWxzZSwgdHJ1ZSk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGxvbmdQcmVzc1RyaWdnZXJlZCkge1xuXHRcdFx0XHRsb25nUHJlc3NUcmlnZ2VyZWQgPSBmYWxzZTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAodGhpcy50b3VjaFRpbWVyKSB7XG5cdFx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50b3VjaFRpbWVyKTtcblx0XHRcdFx0dGhpcy50b3VjaFRpbWVyID0gbnVsbDtcblx0XHRcdH1cblx0XHR9LCB7IHBhc3NpdmU6IHRydWUgfSk7XG5cblx0XHR0YWdFbC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hjYW5jZWxcIiwgKCkgPT4ge1xuXHRcdFx0aXNTd2lwaW5nID0gZmFsc2U7XG5cdFx0XHRsb25nUHJlc3NUcmlnZ2VyZWQgPSBmYWxzZTtcblx0XHRcdHRvdWNoSGFuZGxlZCA9IGZhbHNlO1xuXHRcdFx0aWYgKHRoaXMudG91Y2hUaW1lcikgeyB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMudG91Y2hUaW1lcik7IHRoaXMudG91Y2hUaW1lciA9IG51bGw7IH1cblx0XHRcdHRhZ0VsLnN0eWxlLnRyYW5zaXRpb24gPSBcInRyYW5zZm9ybSAwLjJzIGVhc2UsIG9wYWNpdHkgMC4ycyBlYXNlXCI7XG5cdFx0XHR0YWdFbC5zdHlsZS50cmFuc2Zvcm0gPSBcIlwiO1xuXHRcdFx0dGFnRWwuc3R5bGUub3BhY2l0eSA9IFwiXCI7XG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHsgdGFnRWwuc3R5bGUudHJhbnNpdGlvbiA9IFwiXCI7IH0sIDIyMCk7XG5cdFx0fSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuXHR9XG5cblx0Ly8gXHUyNTAwXHUyNTAwIEV4ZWN1dGUgR2xvYmFsIE11dGUgbG9naWMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdHByaXZhdGUgYXN5bmMgZXhlY3V0ZUdsb2JhbE11dGUodGFnOiBzdHJpbmcpIHtcblx0XHRjb25zdCBpc0N1cnJlbnRseU11dGVkID0gdGFnLnN0YXJ0c1dpdGgoXCIlXCIpO1xuXHRcdFxuXHRcdGNvbnN0IHRhcmdldFRhZ1dvcmQgPSBpc0N1cnJlbnRseU11dGVkID8gdGFnLnNsaWNlKDEpIDogYCUke3RhZ31gO1xuXHRcdFxuXHRcdC8vIENyZWF0ZSBhIHJlZ2V4IHRvIGZpbmQgdGhlIGV4YWN0IHRhZywgcmVzcGVjdGluZyBib3VuZGFyaWVzXG5cdFx0Ly8gSGFuZGxlcyB0YWdzIHdpdGggb3Igd2l0aG91dCAlIHByZWZpeCBzZWN1cmVseVxuXHRcdGNvbnN0IGVzY2FwZWRUYWcgPSB0YWcucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKTtcblx0XHRjb25zdCB0YWdSZWdleCA9IG5ldyBSZWdFeHAoYCMke2VzY2FwZWRUYWd9KD8hW1xcXFxwe0x9XFxcXHB7Tn1fXFxcXC0lXSlgLCAnZ3UnKTtcblxuXHRcdGxldCBmaWxlc01vZGlmaWVkID0gMDtcblx0XHRjb25zdCBmaWxlc1RvUHJvY2Vzczogc3RyaW5nW10gPSBbXTtcblxuXHRcdHRoaXMudGFnc0J5RmlsZS5mb3JFYWNoKCh0YWdzQXJyLCBmaWxlUGF0aCkgPT4ge1xuXHRcdFx0aWYgKHRhZ3NBcnIuaW5jbHVkZXModGFnKSkge1xuXHRcdFx0XHRmaWxlc1RvUHJvY2Vzcy5wdXNoKGZpbGVQYXRoKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdG5ldyBOb3RpY2UoYEdsb2JhbGx5IHJlcGxhY2luZyAjJHt0YWd9Li4uYCk7XG5cblx0XHRmb3IgKGNvbnN0IGZpbGVQYXRoIG9mIGZpbGVzVG9Qcm9jZXNzKSB7XG5cdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQucHJvY2VzcyhmaWxlLCAoZGF0YSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IG5ld0RhdGEgPSBkYXRhLnJlcGxhY2UodGFnUmVnZXgsIGAjJHt0YXJnZXRUYWdXb3JkfWApO1xuXHRcdFx0XHRcdGlmIChkYXRhICE9PSBuZXdEYXRhKSBmaWxlc01vZGlmaWVkKys7XG5cdFx0XHRcdFx0cmV0dXJuIG5ld0RhdGE7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdG5ldyBOb3RpY2UoYFN1Y2Nlc3M6IFJlcGxhY2VkICMke3RhZ30gd2l0aCAjJHt0YXJnZXRUYWdXb3JkfSBpbiAke2ZpbGVzTW9kaWZpZWR9IGZpbGUocykuYCk7XG5cdFx0XG5cdFx0Ly8gQ2xlYXIgc2VsZWN0aW9uIGlmIHdlIGp1c3QgbXV0ZWQgaXQgZ2xvYmFsbHkgc28gVUkgZG9lc24ndCBsb29rIGJyb2tlblxuXHRcdHRoaXMuc2VsZWN0ZWRUYWdzLmRlbGV0ZSh0YWcpO1xuXHRcdHRoaXMuZXhjbHVkZWRUYWdzLmRlbGV0ZSh0YWcpO1xuXHRcdHRoaXMucmVuZGVyVGFncygpO1xuXHRcdHZvaWQgdGhpcy51cGRhdGVTZWFyY2goKTtcblx0fVxuXHQvLyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuXHRwcml2YXRlIGFzeW5jIGdldEZpbHRlcmVkVGFnc0FzeW5jKCk6IFByb21pc2U8TWFwPHN0cmluZywgbnVtYmVyPj4ge1xuXHRcdGxldCBmaWx0ZXJlZCA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG5cblx0XHRpZiAodGhpcy5zZWxlY3RlZFRhZ3Muc2l6ZSA9PT0gMCkge1xuXHRcdFx0ZmlsdGVyZWQgPSBuZXcgTWFwKHRoaXMuYWxsVGFncyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IHNlbGVjdGVkQXJyID0gQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkVGFncyk7XG5cdFx0XHRjb25zdCBtYXRjaGluZ0ZpbGVzOiBzdHJpbmdbXSA9IFtdO1xuXHRcdFx0dGhpcy50YWdzQnlGaWxlLmZvckVhY2goKHRhZ3NBcnIsIGZpbGVQYXRoKSA9PiB7XG5cdFx0XHRcdGlmIChzZWxlY3RlZEFyci5ldmVyeSh0ID0+IHRhZ3NBcnIuaW5jbHVkZXModCkpKSBtYXRjaGluZ0ZpbGVzLnB1c2goZmlsZVBhdGgpO1xuXHRcdFx0fSk7XG5cblx0XHRcdGlmICh0aGlzLnNlYXJjaE1vZGUgPT09IFwibm90ZVwiKSB7XG5cdFx0XHRcdGZvciAoY29uc3QgZmlsZVBhdGggb2YgbWF0Y2hpbmdGaWxlcykge1xuXHRcdFx0XHRcdGNvbnN0IHRhZ3MgPSB0aGlzLnRhZ3NCeUZpbGUuZ2V0KGZpbGVQYXRoKTtcblx0XHRcdFx0XHRpZiAoIXRhZ3MpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdGZvciAoY29uc3QgdCBvZiB0YWdzKSBmaWx0ZXJlZC5zZXQodCwgKGZpbHRlcmVkLmdldCh0KSB8fCAwKSArIDEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKGNvbnN0IGZpbGVQYXRoIG9mIG1hdGNoaW5nRmlsZXMpIHtcblx0XHRcdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblx0XHRcdFx0XHRpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSBjb250aW51ZTtcblx0XHRcdFx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlKTtcblx0XHRcdFx0XHRjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoL1xccj9cXG4vKTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGxvd2VyID0gbGluZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdFx0aWYgKHRoaXMuc2VhcmNoTW9kZSA9PT0gXCJ0YXNrXCIgICAgICAmJiAhbG93ZXIuaW5jbHVkZXMoXCItIFtcIikpICAgY29udGludWU7XG5cdFx0XHRcdFx0XHRpZiAodGhpcy5zZWFyY2hNb2RlID09PSBcInRhc2stdG9kb1wiICYmICFsb3dlci5pbmNsdWRlcyhcIi0gWyBdXCIpKSBjb250aW51ZTtcblx0XHRcdFx0XHRcdGlmICh0aGlzLnNlYXJjaE1vZGUgPT09IFwidGFzay1kb25lXCIgJiYgIWxvd2VyLmluY2x1ZGVzKFwiLSBbeFwiKSkgIGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0Y29uc3QgbGluZVRhZ3MgPSBuZXcgU2V0PHN0cmluZz4oKTtcblx0XHRcdFx0XHRcdGNvbnN0IHRhZ1JlZ2V4ID0gLyMoPyElKShbXlxccyNdKykvZztcblx0XHRcdFx0XHRcdGxldCBtOiBSZWdFeHBFeGVjQXJyYXkgfCBudWxsO1xuXHRcdFx0XHRcdFx0d2hpbGUgKChtID0gdGFnUmVnZXguZXhlYyhsb3dlcikpICE9PSBudWxsKSBsaW5lVGFncy5hZGQobVsxXSk7XG5cdFx0XHRcdFx0XHRjb25zdCBoYXNBbGwgPSBzZWxlY3RlZEFyci5ldmVyeShzZWwgPT5cblx0XHRcdFx0XHRcdFx0QXJyYXkuZnJvbShsaW5lVGFncykuc29tZSh0ID0+IHQudG9Mb3dlckNhc2UoKSA9PT0gc2VsLnRvTG93ZXJDYXNlKCkpXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0aWYgKCFoYXNBbGwpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCB0IG9mIGxpbmVUYWdzKSBmaWx0ZXJlZC5zZXQodCwgKGZpbHRlcmVkLmdldCh0KSB8fCAwKSArIDEpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZvciAoY29uc3QgdCBvZiB0aGlzLnNlbGVjdGVkVGFncykgaWYgKCFmaWx0ZXJlZC5oYXModCkpIGZpbHRlcmVkLnNldCh0LCB0aGlzLmFsbFRhZ3MuZ2V0KHQpIHx8IDApO1xuXHRcdGZvciAoY29uc3QgdCBvZiB0aGlzLmV4Y2x1ZGVkVGFncykgaWYgKCFmaWx0ZXJlZC5oYXModCkpIGZpbHRlcmVkLnNldCh0LCB0aGlzLmFsbFRhZ3MuZ2V0KHQpIHx8IDApO1xuXG5cdFx0Y29uc3QgY3V0b2ZmRW5hYmxlZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZyZXF1ZW5jeUN1dG9mZkVuYWJsZWQgPz8gZmFsc2U7XG5cdFx0Y29uc3QgY3V0b2ZmID0gY3V0b2ZmRW5hYmxlZCA/ICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mcmVxdWVuY3lDdXRvZmYgPz8gMCkgOiAwO1xuXHRcdGNvbnN0IHBpbm5lZCA9IG5ldyBTZXQodGhpcy5wbHVnaW4uc2V0dGluZ3MucGlubmVkVGFncyA/PyBbXSk7XG5cblx0XHRpZiAoY3V0b2ZmID4gMCkge1xuXHRcdFx0Y29uc3QgbmV4dCA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG5cdFx0XHRmaWx0ZXJlZC5mb3JFYWNoKChjb3VudCwgdGFnKSA9PiB7XG5cdFx0XHRcdGlmIChjb3VudCA+PSBjdXRvZmYgfHwgdGhpcy5zZWxlY3RlZFRhZ3MuaGFzKHRhZykgfHwgcGlubmVkLmhhcyh0YWcpKSBuZXh0LnNldCh0YWcsIGNvdW50KTtcblx0XHRcdH0pO1xuXHRcdFx0ZmlsdGVyZWQgPSBuZXh0O1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLnRhZ1NlYXJjaFRleHQpIHtcblx0XHRcdGNvbnN0IHEgPSB0aGlzLnRhZ1NlYXJjaFRleHQudG9Mb3dlckNhc2UoKTtcblx0XHRcdGNvbnN0IG5leHQgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuXHRcdFx0ZmlsdGVyZWQuZm9yRWFjaCgoY291bnQsIHRhZykgPT4ge1xuXHRcdFx0XHRpZiAodGFnLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocSkgfHwgdGhpcy5zZWxlY3RlZFRhZ3MuaGFzKHRhZykgfHwgdGhpcy5leGNsdWRlZFRhZ3MuaGFzKHRhZykpXG5cdFx0XHRcdFx0bmV4dC5zZXQodGFnLCBjb3VudCk7XG5cdFx0XHR9KTtcblx0XHRcdGZpbHRlcmVkID0gbmV4dDtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmlsdGVyZWQ7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHVwZGF0ZVNlYXJjaChvcHRpb25zPzogeyByZXZlYWxTZWFyY2g/OiBib29sZWFuOyBjcmVhdGVJZk1pc3Npbmc/OiBib29sZWFuIH0pIHtcblx0XHRjb25zdCB3b3Jrc3BhY2UgPSB0aGlzLmFwcC53b3Jrc3BhY2U7XG5cdFx0Y29uc3QgcHJldkxlYWYgPSB3b3Jrc3BhY2UuYWN0aXZlTGVhZjtcblxuXHRcdGNvbnN0IGlzVG91Y2hDb250ZXh0ID0gUGxhdGZvcm0uaXNNb2JpbGUgfHwgdGhpcy5sYXN0SW50ZXJhY3Rpb25XYXNUb3VjaDtcblx0XHRjb25zdCByZXZlYWxTZWFyY2ggICAgPSBvcHRpb25zPy5yZXZlYWxTZWFyY2ggICAgPz8gIWlzVG91Y2hDb250ZXh0O1xuXHRcdGNvbnN0IGNyZWF0ZUlmTWlzc2luZyA9IG9wdGlvbnM/LmNyZWF0ZUlmTWlzc2luZyA/PyAhaXNUb3VjaENvbnRleHQ7XG5cblx0XHRsZXQgc2VhcmNoTGVhZiA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXCJzZWFyY2hcIilbMF07XG5cblx0XHRpZiAoIXNlYXJjaExlYWYgJiYgY3JlYXRlSWZNaXNzaW5nKSB7XG5cdFx0XHRjb25zdCByaWdodExlYWYgPSB3b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKHRydWUpO1xuXHRcdFx0aWYgKHJpZ2h0TGVhZikge1xuXHRcdFx0XHRzZWFyY2hMZWFmID0gcmlnaHRMZWFmO1xuXHRcdFx0XHRhd2FpdCBzZWFyY2hMZWFmLnNldFZpZXdTdGF0ZSh7IHR5cGU6IFwic2VhcmNoXCIsIGFjdGl2ZTogZmFsc2UgfSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHNlYXJjaExlYWYgJiYgcmV2ZWFsU2VhcmNoKSB3b3Jrc3BhY2UucmV2ZWFsTGVhZihzZWFyY2hMZWFmKTtcblx0XHRpZiAocHJldkxlYWYpIHdvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKHByZXZMZWFmLCB7IGZvY3VzOiB0cnVlIH0pO1xuXG5cdFx0dGhpcy5sYXN0SW50ZXJhY3Rpb25XYXNUb3VjaCA9IGZhbHNlO1xuXG5cdFx0aWYgKCFzZWFyY2hMZWFmKSByZXR1cm47XG5cblx0XHRjb25zdCBzZWxlY3RlZCA9IEFycmF5LmZyb20odGhpcy5zZWxlY3RlZFRhZ3MpO1xuXHRcdGNvbnN0IGV4Y2x1ZGVkID0gQXJyYXkuZnJvbSh0aGlzLmV4Y2x1ZGVkVGFncyk7XG5cdFx0Y29uc3Qgc2VhcmNoVmlldyA9IHNlYXJjaExlYWYudmlldyBhcyBhbnk7XG5cblx0XHRpZiAoc2VsZWN0ZWQubGVuZ3RoID09PSAwICYmIGV4Y2x1ZGVkLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Y29uc3QgY2xlYXJCdG4gPSBzZWFyY2hWaWV3Py5jb250YWluZXJFbD8ucXVlcnlTZWxlY3RvcihcIi5zZWFyY2gtaW5wdXQtY2xlYXItYnV0dG9uXCIpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcblx0XHRcdGlmIChjbGVhckJ0bikgY2xlYXJCdG4uZGlzcGF0Y2hFdmVudChuZXcgTW91c2VFdmVudChcImNsaWNrXCIsIHsgYnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogZmFsc2UgfSkpO1xuXHRcdFx0ZWxzZSBpZiAodHlwZW9mIHNlYXJjaFZpZXc/LnNldFF1ZXJ5ID09PSBcImZ1bmN0aW9uXCIpIHNlYXJjaFZpZXcuc2V0UXVlcnkoXCJcIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0bGV0IHF1ZXJ5ID0gXCJcIjtcblx0XHRpZiAodGhpcy5zZWFyY2hNb2RlID09PSBcIm5vdGVcIikge1xuXHRcdFx0cXVlcnkgPSBbXG5cdFx0XHRcdC4uLnNlbGVjdGVkLm1hcCh0ID0+IGB0YWc6IyR7dH1gKSxcblx0XHRcdFx0Li4uZXhjbHVkZWQubWFwKHQgPT4gYC10YWc6IyR7dH1gKSxcblx0XHRcdF0uam9pbihcIiBcIik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IHByZWZpeCA9XG5cdFx0XHRcdHRoaXMuc2VhcmNoTW9kZSA9PT0gXCJsaW5lXCIgICAgICA/IFwibGluZTooXCIgICAgICA6XG5cdFx0XHRcdHRoaXMuc2VhcmNoTW9kZSA9PT0gXCJ0YXNrXCIgICAgICA/IFwidGFzazooXCIgICAgICA6XG5cdFx0XHRcdHRoaXMuc2VhcmNoTW9kZSA9PT0gXCJ0YXNrLXRvZG9cIiA/IFwidGFzay10b2RvOihcIiA6XG5cdFx0XHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRhc2stZG9uZTooXCI7XG5cdFx0XHRjb25zdCBib2R5ID0gW1xuXHRcdFx0XHQuLi5zZWxlY3RlZC5tYXAodCA9PiBgIyR7dH1gKSxcblx0XHRcdFx0Li4uZXhjbHVkZWQubWFwKHQgPT4gYC0jJHt0fWApLFxuXHRcdFx0XS5qb2luKFwiIFwiKTtcblx0XHRcdHF1ZXJ5ID0gYCR7cHJlZml4fSR7Ym9keX0pYDtcblx0XHR9XG5cblx0XHRpZiAodHlwZW9mIHNlYXJjaFZpZXc/LnNldFF1ZXJ5ID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdHNlYXJjaFZpZXcuc2V0UXVlcnkocXVlcnkpO1xuXHRcdFx0c2V0VGltZW91dCgoKSA9PiBzZWFyY2hWaWV3LnNldFF1ZXJ5KHF1ZXJ5KSwgMTUwKTtcblx0XHR9XG5cdH1cblxuXHRnZXRGaWxlVGFncyhmaWxlOiBURmlsZSk6IHN0cmluZ1tdIHtcblx0XHRjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuXHRcdGlmICghY2FjaGUpIHJldHVybiBbXTtcblx0XHRjb25zdCB0YWdzOiBzdHJpbmdbXSA9IFtdO1xuXHRcdGlmIChjYWNoZS50YWdzKSBjYWNoZS50YWdzLmZvckVhY2godCA9PiB0YWdzLnB1c2godC50YWcucmVwbGFjZSgvXiMvLCBcIlwiKSkpO1xuXHRcdGNvbnN0IGZtID0gY2FjaGUuZnJvbnRtYXR0ZXI/LnRhZ3M7XG5cdFx0aWYgKHR5cGVvZiBmbSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0Zm0uc3BsaXQoXCIsXCIpLm1hcChzID0+IHMudHJpbSgpKS5maWx0ZXIoQm9vbGVhbikuZm9yRWFjaCh0ID0+IHRhZ3MucHVzaCh0LnJlcGxhY2UoL14jLywgXCJcIikpKTtcblx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZm0pKSB7XG5cdFx0XHRmbS5mb3JFYWNoKHQgPT4geyBpZiAodCkgdGFncy5wdXNoKFN0cmluZyh0KS5yZXBsYWNlKC9eIy8sIFwiXCIpKTsgfSk7XG5cdFx0fVxuXHRcdHJldHVybiBBcnJheS5mcm9tKG5ldyBTZXQodGFncykpO1xuXHR9XG5cblx0cHJpdmF0ZSBzeW5jQ3V0b2ZmQ29udHJvbHNGcm9tU2V0dGluZ3MoKSB7XG5cdFx0Y29uc3QgZW5hYmxlZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZyZXF1ZW5jeUN1dG9mZkVuYWJsZWQgPz8gZmFsc2U7XG5cdFx0Y29uc3QgY3V0b2ZmICA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZyZXF1ZW5jeUN1dG9mZiA/PyAwO1xuXHRcdHRoaXMuY3V0b2ZmSW5wdXQudmFsdWUgPSBTdHJpbmcoY3V0b2ZmKTtcblx0XHR0aGlzLmN1dG9mZklucHV0LmRpc2FibGVkID0gIWVuYWJsZWQ7XG5cdFx0dGhpcy5jdXRvZmZUb2dnbGVCdG4udG9nZ2xlQ2xhc3MoXCJpcy1lbmFibGVkXCIsIGVuYWJsZWQpO1xuXHRcdHRoaXMuY3V0b2ZmVG9nZ2xlQnRuLnRvZ2dsZUNsYXNzKFwiaXMtZGlzYWJsZWRcIiwgIWVuYWJsZWQpO1xuXHRcdHNldEljb24odGhpcy5jdXRvZmZUb2dnbGVCdG4sIGVuYWJsZWQgPyBcImV5ZVwiIDogXCJleWUtb2ZmXCIpO1xuXHR9XG5cblx0cHVibGljIHVwZGF0ZU1vZGVVSShza2lwU2VhcmNoID0gZmFsc2UpIHtcblx0XHR0aGlzLnNvcnRBekJ0bi50b2dnbGVDbGFzcyhcImlzLWFjdGl2ZVwiLCB0aGlzLmN1cnJlbnRTb3J0ID09PSBcImF6XCIpO1xuXHRcdHRoaXMuc29ydENvdW50QnRuLnRvZ2dsZUNsYXNzKFwiaXMtYWN0aXZlXCIsIHRoaXMuY3VycmVudFNvcnQgPT09IFwiY291bnRcIik7XG5cblx0XHR0aGlzLnNjb3BlQnRuLnJlbW92ZUNsYXNzKFwiaXMtYWN0aXZlXCIpO1xuXHRcdHRoaXMudGFza0J0bi5yZW1vdmVDbGFzcyhcImlzLWFjdGl2ZVwiKTtcblxuXHRcdGlmICAgICAgKHRoaXMuc2VhcmNoTW9kZSA9PT0gXCJub3RlXCIpICAgICAgeyB0aGlzLnNjb3BlQnRuLnNldFRleHQoXCJOT1RFXCIpOyAgICAgIHRoaXMuc2NvcGVCdG4uYWRkQ2xhc3MoXCJpcy1hY3RpdmVcIik7IH1cblx0XHRlbHNlIGlmICh0aGlzLnNlYXJjaE1vZGUgPT09IFwibGluZVwiKSAgICAgIHsgdGhpcy5zY29wZUJ0bi5zZXRUZXh0KFwiTElORVwiKTsgICAgICB0aGlzLnNjb3BlQnRuLmFkZENsYXNzKFwiaXMtYWN0aXZlXCIpOyB9XG5cdFx0ZWxzZSBpZiAodGhpcy5zZWFyY2hNb2RlID09PSBcInRhc2tcIikgICAgICB7IHRoaXMudGFza0J0bi5zZXRUZXh0KFwiVEFTSy1BTExcIik7ICAgdGhpcy50YXNrQnRuLmFkZENsYXNzKFwiaXMtYWN0aXZlXCIpOyB9XG5cdFx0ZWxzZSBpZiAodGhpcy5zZWFyY2hNb2RlID09PSBcInRhc2stdG9kb1wiKSB7IHRoaXMudGFza0J0bi5zZXRUZXh0KFwiVEFTSy1UT0RPXCIpOyAgdGhpcy50YXNrQnRuLmFkZENsYXNzKFwiaXMtYWN0aXZlXCIpOyB9XG5cdFx0ZWxzZSBpZiAodGhpcy5zZWFyY2hNb2RlID09PSBcInRhc2stZG9uZVwiKSB7IHRoaXMudGFza0J0bi5zZXRUZXh0KFwiVEFTSy1ET05FXCIpOyAgdGhpcy50YXNrQnRuLmFkZENsYXNzKFwiaXMtYWN0aXZlXCIpOyB9XG5cblx0XHRpZiAoW1wibm90ZVwiLCBcImxpbmVcIl0uaW5jbHVkZXModGhpcy5zZWFyY2hNb2RlKSkge1xuXHRcdFx0aWYgKCFbXCJUQVNLLUFMTFwiLCBcIlRBU0stVE9ET1wiLCBcIlRBU0stRE9ORVwiXS5pbmNsdWRlcyh0aGlzLnRhc2tCdG4uaW5uZXJUZXh0KSkgdGhpcy50YXNrQnRuLnNldFRleHQoXCJUQVNLLUFMTFwiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKCFbXCJOT1RFXCIsIFwiTElORVwiXS5pbmNsdWRlcyh0aGlzLnNjb3BlQnRuLmlubmVyVGV4dCkpIHRoaXMuc2NvcGVCdG4uc2V0VGV4dChcIk5PVEVcIik7XG5cdFx0fVxuXG5cdFx0aWYgKCFza2lwU2VhcmNoKSB2b2lkIHRoaXMudXBkYXRlU2VhcmNoKCk7XG5cdFx0aWYgKHRoaXMudGFnQ29udGFpbmVyKSB0aGlzLnJlbmRlclRhZ3MoKTtcblx0fVxuXG5cdHB1YmxpYyB0b2dnbGVTY29wZU1vZGUoKSB7XG5cdFx0aWYgKFtcIm5vdGVcIiwgXCJsaW5lXCJdLmluY2x1ZGVzKHRoaXMuc2VhcmNoTW9kZSkpIHRoaXMuc2VhcmNoTW9kZSA9IHRoaXMuc2VhcmNoTW9kZSA9PT0gXCJub3RlXCIgPyBcImxpbmVcIiA6IFwibm90ZVwiO1xuXHRcdGVsc2UgdGhpcy5zZWFyY2hNb2RlID0gdGhpcy5zY29wZUJ0bi5pbm5lclRleHQgPT09IFwiTElORVwiID8gXCJsaW5lXCIgOiBcIm5vdGVcIjtcblx0XHR0aGlzLnVwZGF0ZU1vZGVVSSgpO1xuXHR9XG5cblx0cHVibGljIHRvZ2dsZVRhc2tNb2RlKCkge1xuXHRcdGlmICh0aGlzLnNlYXJjaE1vZGUgPT09IFwidGFza1wiKSAgICAgICAgICAgdGhpcy5zZWFyY2hNb2RlID0gXCJ0YXNrLXRvZG9cIjtcblx0XHRlbHNlIGlmICh0aGlzLnNlYXJjaE1vZGUgPT09IFwidGFzay10b2RvXCIpIHRoaXMuc2VhcmNoTW9kZSA9IFwidGFzay1kb25lXCI7XG5cdFx0ZWxzZSBpZiAodGhpcy5zZWFyY2hNb2RlID09PSBcInRhc2stZG9uZVwiKSB0aGlzLnNlYXJjaE1vZGUgPSBcInRhc2tcIjtcblx0XHRlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hNb2RlID0gXCJ0YXNrXCI7XG5cdFx0dGhpcy51cGRhdGVNb2RlVUkoKTtcblx0fVxuXG5cdHB1YmxpYyB0b2dnbGVTb3J0KCkge1xuXHRcdHRoaXMuY3VycmVudFNvcnQgPSB0aGlzLmN1cnJlbnRTb3J0ID09PSBcImF6XCIgPyBcImNvdW50XCIgOiBcImF6XCI7XG5cdFx0dGhpcy51cGRhdGVNb2RlVUkodHJ1ZSk7XG5cdH1cblxuXHRwdWJsaWMgY2xlYXJUYWdTZWxlY3Rpb25zKCkge1xuXHRcdHRoaXMuc2VsZWN0ZWRUYWdzLmNsZWFyKCk7XG5cdFx0dGhpcy5leGNsdWRlZFRhZ3MuY2xlYXIoKTtcblx0XHR0aGlzLnJlbmRlclRhZ3MoKTtcblx0XHR2b2lkIHRoaXMudXBkYXRlU2VhcmNoKHsgcmV2ZWFsU2VhcmNoOiBmYWxzZSwgY3JlYXRlSWZNaXNzaW5nOiBmYWxzZSB9KTtcblx0fVxuXG5cdHB1YmxpYyBjbGVhclNlYXJjaEJveCgpIHtcblx0XHRjb25zdCBzZWFyY2hCb3ggPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKFwiLmZsYXQtdGFnLXNlYXJjaC1pbnB1dFwiKSBhcyBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbDtcblx0XHRpZiAoc2VhcmNoQm94KSBzZWFyY2hCb3gudmFsdWUgPSBcIlwiO1xuXHRcdHRoaXMudGFnU2VhcmNoVGV4dCA9IFwiXCI7XG5cdFx0dGhpcy5yZW5kZXJUYWdzKCk7XG5cdH1cblxuXHRwdWJsaWMgc2VsZWN0U2luZ2xlVGFnKHRhZzogc3RyaW5nKSB7XG5cdFx0dGhpcy5zZWxlY3RlZFRhZ3MuY2xlYXIoKTtcblx0XHR0aGlzLmV4Y2x1ZGVkVGFncy5jbGVhcigpO1xuXHRcdFxuXHRcdGNvbnN0IGNsZWFuVGFnID0gdGFnLnJlcGxhY2UoL14jLywgXCJcIik7XG5cdFx0dGhpcy5zZWxlY3RlZFRhZ3MuYWRkKGNsZWFuVGFnKTtcblx0XHRcblx0XHR0aGlzLnJlbmRlclRhZ3MoKTtcblx0XHR2b2lkIHRoaXMudXBkYXRlU2VhcmNoKHsgcmV2ZWFsU2VhcmNoOiB0cnVlLCBjcmVhdGVJZk1pc3Npbmc6IHRydWUgfSk7XG5cdH1cbn0iLCAiZXhwb3J0IGNvbnN0IGdldFN0eWxlcyA9ICgpOiBzdHJpbmcgPT4ge1xuXHRyZXR1cm4gYFxuLndvcmtzcGFjZS1zcGxpdC5tb2Qtcm9vdCAudmlldy1jb250ZW50LmZsYXQtdGFnLXZpZXcge1xuXHRkaXNwbGF5OiBmbGV4O1xuXHRmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuXHRqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG5cdGFsaWduLWl0ZW1zOiBzdHJldGNoO1xuXHRoZWlnaHQ6IDEwMCU7XG5cdHBhZGRpbmc6IDA7XG5cdG1hcmdpbjogMDtcbn1cblxuLmZsYXQtdGFnLWNvbnRhaW5lciB7XG5cdGRpc3BsYXk6IGZsZXg7XG5cdGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG5cdGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xuXHRqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG5cdHdpZHRoOiAxMDAlO1xuXHRoZWlnaHQ6IDEwMCU7XG5cdGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG5cdHBhZGRpbmc6IDA7XG5cdG1hcmdpbjogMDtcbn1cblxuLmZsYXQtdGFnLXNvcnQtY29udGFpbmVyIHtcblx0ZGlzcGxheTogZmxleDtcblx0anVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuXHRhbGlnbi1pdGVtczogY2VudGVyO1xuXHRmbGV4LXNocmluazogMDtcblx0cGFkZGluZzogOHB4O1xuXHRiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuXHRib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuXHR3aWR0aDogMTAwJTtcblx0ZmxleC13cmFwOiB3cmFwO1xuXHRnYXA6IDhweDtcbn1cblxuLmZsYXQtdGFnLWJ1dHRvbnMtc2VjdGlvbiB7XG5cdGRpc3BsYXk6IGZsZXg7XG5cdGdhcDogNnB4O1xuXHRhbGlnbi1pdGVtczogY2VudGVyO1xuXHRmbGV4LXdyYXA6IHdyYXA7XG59XG5cbi5mbGF0LXRhZy1tb2RlLWJ1dHRvbiB7XG5cdGN1cnNvcjogcG9pbnRlcjtcblx0cGFkZGluZzogNHB4IDEwcHg7XG5cdGZvbnQtc2l6ZTogMC44ZW07XG5cdGZvbnQtd2VpZ2h0OiA1MDA7XG5cdGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1zKTtcblx0Y29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuXHRiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWZvcm0tZmllbGQpO1xuXHRib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG5cdHRyYW5zaXRpb246IGFsbCAwLjE1cyBlYXNlLWluLW91dDtcblx0dXNlci1zZWxlY3Q6IG5vbmU7XG5cdGRpc3BsYXk6IGZsZXg7XG5cdGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cdGp1c3RpZnktY29udGVudDogY2VudGVyO1xuXHRtaW4td2lkdGg6IDY1cHg7XG59XG5cbi5mbGF0LXRhZy1tb2RlLWJ1dHRvbjpob3ZlciB7XG5cdGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG5cdGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuXHRib3JkZXItY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyLWhvdmVyKTtcbn1cblxuLmZsYXQtdGFnLW1vZGUtYnV0dG9uLmlzLWFjdGl2ZSB7XG5cdGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG5cdGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG5cdGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcblx0Ym94LXNoYWRvdzogaW5zZXQgMCAxcHggM3B4IHJnYmEoMCwgMCwgMCwgMC4yKTtcbn1cblxuLmZsYXQtdGFnLW1vZGUtYnV0dG9uLmlzLWFjdGl2ZTpob3ZlciB7XG5cdGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudC1ob3Zlcik7XG5cdGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50LWhvdmVyKTtcbn1cblxuLmZsYXQtdGFnLXNlYXJjaC1zZWN0aW9uIHtcblx0ZGlzcGxheTogZmxleDtcblx0YWxpZ24taXRlbXM6IGNlbnRlcjtcblx0Z2FwOiA0cHg7XG5cdG1hcmdpbi1sZWZ0OiBhdXRvO1xuXHRiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG5cdGJvcmRlci1yYWRpdXM6IDRweDtcblx0cGFkZGluZzogMnB4IDhweDtcblx0ZmxleC1ncm93OiAxO1xuXHRtYXgtd2lkdGg6IDIyMHB4O1xufVxuXG4uZmxhdC10YWctc2VhcmNoLWlucHV0IHtcblx0YmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG5cdGJvcmRlcjogbm9uZTtcblx0Y29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcblx0d2lkdGg6IDEwMCU7XG5cdGhlaWdodDogMjRweDtcblx0Zm9udC1zaXplOiAwLjllbTtcbn1cblxuLmZsYXQtdGFnLXNlYXJjaC1pbnB1dDpmb2N1cyB7XG5cdG91dGxpbmU6IG5vbmU7XG5cdGJveC1zaGFkb3c6IG5vbmU7XG59XG5cbi5mbGF0LXRhZy1zZWFyY2gtY2xlYXItYnV0dG9uIHtcblx0Y3Vyc29yOiBwb2ludGVyO1xuXHRjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG5cdGRpc3BsYXk6IGZsZXg7XG5cdGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cdGp1c3RpZnktY29udGVudDogY2VudGVyO1xuXHRmb250LXNpemU6IDAuOGVtO1xufVxuXG4uZmxhdC10YWctc2VhcmNoLWNsZWFyLWJ1dHRvbjpob3ZlciB7XG5cdGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG59XG5cbi5mbGF0LXRhZy1zb3J0LWJ1dHRvbixcbi5mbGF0LXRhZy1jbGVhci1idXR0b24ge1xuXHRjdXJzb3I6IHBvaW50ZXI7XG5cdHBhZGRpbmc6IDRweDtcblx0Ym9yZGVyLXJhZGl1czogNHB4O1xuXHRkaXNwbGF5OiBmbGV4O1xuXHRhbGlnbi1pdGVtczogY2VudGVyO1xuXHRqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cblxuLmZsYXQtdGFnLXNvcnQtYnV0dG9uOmhvdmVyLFxuLmZsYXQtdGFnLWNsZWFyLWJ1dHRvbjpob3ZlciB7XG5cdGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWhvdmVyKTtcbn1cblxuLmZsYXQtdGFnLXNvcnQtYnV0dG9uLmlzLWFjdGl2ZSB7XG5cdGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG5cdGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG5cdGJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDNweCByZ2JhKDAsIDAsIDAsIDAuMik7XG59XG5cbi5mbGF0LXRhZy1zb3J0LWJ1dHRvbi5pcy1hY3RpdmU6aG92ZXIge1xuXHRiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQtaG92ZXIpO1xufVxuXG4vKiBDdXRvZmYgY29udHJvbHMgKi9cbi5mbGF0LXRhZy1jdXRvZmYtc3BhY2VyIHtcblx0ZmxleDogMCAwIDhweDtcblx0d2lkdGg6IDhweDtcblx0aGVpZ2h0OiAxcHg7XG59XG5cbi5mbGF0LXRhZy1jdXRvZmYtc2VjdGlvbiB7XG5cdGRpc3BsYXk6IGZsZXg7XG5cdGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cdGdhcDogNnB4O1xuXHRwYWRkaW5nOiAycHggOHB4O1xuXHRib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtcyk7XG5cdGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcblx0YmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDE4MGRlZywgdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpIDAlLCB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpIDEwMCUpO1xuXHRib3gtc2hhZG93OiBpbnNldCAwIDFweCAwIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wNCk7XG5cdGhlaWdodDogMjhweDtcbn1cblxuLmZsYXQtdGFnLWN1dG9mZi10b2dnbGUge1xuXHRjdXJzb3I6IHBvaW50ZXI7XG5cdGRpc3BsYXk6IGlubGluZS1mbGV4O1xuXHRhbGlnbi1pdGVtczogY2VudGVyO1xuXHRqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcblx0Y29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuXHRwYWRkaW5nOiAycHg7XG5cdGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1zKTtcbn1cblxuLmZsYXQtdGFnLWN1dG9mZi10b2dnbGU6aG92ZXIge1xuXHRjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuXHRiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbn1cblxuLmZsYXQtdGFnLWN1dG9mZi10b2dnbGUuaXMtZW5hYmxlZCB7XG5cdGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xufVxuXG4uZmxhdC10YWctY3V0b2ZmLXRvZ2dsZS5pcy1kaXNhYmxlZCB7XG5cdG9wYWNpdHk6IDAuNztcbn1cblxuLmZsYXQtdGFnLWN1dG9mZi1pbnB1dCB7XG5cdHdpZHRoOiA1MnB4O1xuXHRoZWlnaHQ6IDIycHg7XG5cdGJvcmRlcjogbm9uZTtcblx0YmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG5cdHBhZGRpbmc6IDA7XG5cdG1hcmdpbjogMDtcblx0dGV4dC1hbGlnbjogY2VudGVyO1xuXHRmb250LXNpemU6IDAuOWVtO1xuXHRjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xufVxuXG4uZmxhdC10YWctY3V0b2ZmLWlucHV0OmZvY3VzIHtcblx0b3V0bGluZTogbm9uZTtcblx0Ym94LXNoYWRvdzogbm9uZTtcbn1cblxuLmZsYXQtdGFnLWN1dG9mZi1pbnB1dDpkaXNhYmxlZCB7XG5cdGNvbG9yOiB2YXIoLS10ZXh0LWZhaW50KTtcblx0Y3Vyc29yOiBub3QtYWxsb3dlZDtcbn1cblxuLmZsYXQtdGFnLWxpc3Qge1xuXHRkaXNwbGF5OiBmbGV4O1xuXHRmbGV4LXdyYXA6IHdyYXA7XG5cdGFsaWduLWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG5cdG92ZXJmbG93LXk6IGF1dG87XG5cdGZsZXg6IDE7XG5cdGxpbmUtaGVpZ2h0OiAxLjVlbTtcblx0cGFkZGluZzogOHB4O1xuXHR3aWR0aDogMTAwJTtcbn1cblxuLmZsYXQtdGFnIHtcblx0ZGlzcGxheTogaW5saW5lLWJsb2NrO1xuXHRwYWRkaW5nOiAycHggNnB4O1xuXHRtYXJnaW46IDJweDtcblx0Ym9yZGVyLXJhZGl1czogNHB4O1xuXHRjdXJzb3I6IHBvaW50ZXI7XG5cdGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRhZy1iYWNrZ3JvdW5kKTtcblx0Y29sb3I6IHZhcigtLXRhZy1jb2xvcik7XG5cdHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4xcztcbn1cblxuLmZsYXQtdGFnOmhvdmVyIHtcblx0YmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGFnLWJhY2tncm91bmQtaG92ZXIpO1xufVxuXG4uZmxhdC10YWctc2VsZWN0ZWQge1xuXHRmb250LXdlaWdodDogYm9sZDtcblx0YmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcblx0Y29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbn1cblxuLmZsYXQtdGFnLWV4Y2x1ZGVkIHtcblx0Zm9udC13ZWlnaHQ6IGJvbGQ7XG5cdGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG5cdGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG59XG5cbi5mbGF0LXRhZy1sZXR0ZXIge1xuXHRkaXNwbGF5OiBpbmxpbmUtZmxleDtcblx0Zm9udC13ZWlnaHQ6IGJvbGQ7XG5cdGZvbnQtc2l6ZTogMS4yZW07XG5cdG1hcmdpbjogMnB4O1xuXHRwYWRkaW5nOiAycHggNnB4O1xuXHRib3JkZXItcmFkaXVzOiA0cHg7XG5cdGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcblx0Y29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcblx0YWxpZ24taXRlbXM6IGNlbnRlcjtcblx0anVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG5cdG1pbi13aWR0aDogMjRweDtcbn1cblxuLmZsYXQtdGFnLXBpbm5lZC1zZWN0aW9uIHtcblx0d2lkdGg6IDEwMCU7XG5cdGRpc3BsYXk6IGZsZXg7XG5cdGZsZXgtd3JhcDogd3JhcDtcblx0YWxpZ24taXRlbXM6IGNlbnRlcjtcblx0YmFja2dyb3VuZC1jb2xvcjogY29sb3ItbWl4KGluIHNyZ2IsIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCkgMTAlLCB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpKTtcblx0Ym9yZGVyOiAxcHggc29saWQgY29sb3ItbWl4KGluIHNyZ2IsIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCkgMjUlLCB0cmFuc3BhcmVudCk7XG5cdHBhZGRpbmc6IDRweDtcblx0Ym9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLXMpO1xuXHRtYXJnaW4tYm90dG9tOiA0cHg7XG59XG5cbi5mbGF0LXRhZy1zZXBhcmF0b3Ige1xuXHR3aWR0aDogMTAwJTtcblx0aGVpZ2h0OiAxcHg7XG5cdGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcblx0bWFyZ2luOiA0cHggMCA4cHggMDtcbn1cblxuLmZsYXQtdGFnLXBpbm5lZCB7XG5cdGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG59XG5cblxuLyogR2xvdyByZW1pbmRlciB3aGVuIGxpc3QgaXMgZmlsdGVyZWQ6XG4gICBpbnB1dCBpcyBub3QgZm9jdXNlZCBhbmQgbm90IGVtcHR5IChwbGFjZWhvbGRlciBub3Qgc2hvd24pLiAqL1xuLmZsYXQtdGFnLXNlYXJjaC1pbnB1dDpub3QoOmZvY3VzKTpub3QoOnBsYWNlaG9sZGVyLXNob3duKSB7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgYm94LXNoYWRvdzpcbiAgICAwIDAgMCAycHggY29sb3ItbWl4KGluIHNyZ2IsIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCkgMzUlLCB0cmFuc3BhcmVudCksXG4gICAgMCAwIDE0cHggY29sb3ItbWl4KGluIHNyZ2IsIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCkgMjUlLCB0cmFuc3BhcmVudCk7XG4gIGFuaW1hdGlvbjogZnR2LXNlYXJjaC1wdWxzZSAyLjJzIGVhc2UtaW4tb3V0IGluZmluaXRlO1xufVxuXG5Aa2V5ZnJhbWVzIGZ0di1zZWFyY2gtcHVsc2Uge1xuICAwJSwgMTAwJSB7XG4gICAgYm94LXNoYWRvdzpcbiAgICAgIDAgMCAwIDJweCBjb2xvci1taXgoaW4gc3JnYiwgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KSAyOCUsIHRyYW5zcGFyZW50KSxcbiAgICAgIDAgMCAxMHB4IGNvbG9yLW1peChpbiBzcmdiLCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpIDE4JSwgdHJhbnNwYXJlbnQpO1xuICB9XG4gIDUwJSB7XG4gICAgYm94LXNoYWRvdzpcbiAgICAgIDAgMCAwIDJweCBjb2xvci1taXgoaW4gc3JnYiwgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KSA0NSUsIHRyYW5zcGFyZW50KSxcbiAgICAgIDAgMCAxOHB4IGNvbG9yLW1peChpbiBzcmdiLCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpIDM1JSwgdHJhbnNwYXJlbnQpO1xuICB9XG59XG5cbi8qIFRoZW1lIHR1bmluZyAqL1xuYm9keS50aGVtZS1saWdodCAuZmxhdC10YWctc2VhcmNoLWlucHV0Om5vdCg6Zm9jdXMpOm5vdCg6cGxhY2Vob2xkZXItc2hvd24pIHtcbiAgYW5pbWF0aW9uLWR1cmF0aW9uOiAyLjZzO1xufVxuXG5ib2R5LnRoZW1lLWRhcmsgLmZsYXQtdGFnLXNlYXJjaC1pbnB1dDpub3QoOmZvY3VzKTpub3QoOnBsYWNlaG9sZGVyLXNob3duKSB7XG4gIGFuaW1hdGlvbi1kdXJhdGlvbjogMi4wcztcbn1cblxuLyogUmVzcGVjdCByZWR1Y2VkIG1vdGlvbiAqL1xuQG1lZGlhIChwcmVmZXJzLXJlZHVjZWQtbW90aW9uOiByZWR1Y2UpIHtcbiAgLmZsYXQtdGFnLXNlYXJjaC1pbnB1dDpub3QoOmZvY3VzKTpub3QoOnBsYWNlaG9sZGVyLXNob3duKSB7XG4gICAgYW5pbWF0aW9uOiBub25lO1xuICB9XG59XG5cbmA7XG59O1xuIiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IEZsYXRUYWdQbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xuXG5leHBvcnQgdHlwZSBBbHRDbGlja1RhZ01vZGUgPSBcInN0YXJ0LWxpbmVcIiB8IFwiaW4tcGxhY2VcIiB8IFwiZW5kLWxpbmVcIjtcblxuZXhwb3J0IGludGVyZmFjZSBGbGF0VGFnUGx1Z2luU2V0dGluZ3Mge1xuXHRwaW5uZWRUYWdzOiBzdHJpbmdbXTtcblx0ZnJlcXVlbmN5Q3V0b2ZmOiBudW1iZXI7XG5cdGZyZXF1ZW5jeUN1dG9mZkVuYWJsZWQ6IGJvb2xlYW47XG5cblx0YWx0Q2xpY2tUYWdNb2RlOiBBbHRDbGlja1RhZ01vZGU7XG5cdFxuXHRzaG93UGxhY2VtZW50SW5TdGF0dXNCYXI6IGJvb2xlYW47XG5cdFxuXHRtb2JpbGVMb25nUHJlc3NFbmFibGVkOiBib29sZWFuO1xuXHRtb2JpbGVMb25nUHJlc3NNczogbnVtYmVyO1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRmxhdFRhZ1BsdWdpblNldHRpbmdzID0ge1xuXHRwaW5uZWRUYWdzOiBbXSxcblx0ZnJlcXVlbmN5Q3V0b2ZmOiAwLFxuXHRmcmVxdWVuY3lDdXRvZmZFbmFibGVkOiBmYWxzZSxcblxuXHRhbHRDbGlja1RhZ01vZGU6IFwic3RhcnQtbGluZVwiLFxuXG5cdHNob3dQbGFjZW1lbnRJblN0YXR1c0JhcjogdHJ1ZSxcblxuXHRtb2JpbGVMb25nUHJlc3NFbmFibGVkOiB0cnVlLFxuXHRtb2JpbGVMb25nUHJlc3NNczogMTAwMCxcbn07XG5cbmV4cG9ydCBjbGFzcyBGbGF0VGFnU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IEZsYXRUYWdQbHVnaW47XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRmxhdFRhZ1BsdWdpbikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkFsdC1jbGljayB0YWcgcGxhY2VtZW50XCIpXG5cdFx0XHQuc2V0RGVzYyhcIldoZW4gY3JlYXRpbmcgYSB0YWcsIHdoZXJlIGl0IHNob3VsZCBnby5cIilcblx0XHRcdC5hZGREcm9wZG93bigoZGQpID0+XG5cdFx0XHRcdGRkXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihcInN0YXJ0LWxpbmVcIiwgXCJQdXQgdGFnIGF0IHN0YXJ0IG9mIGxpbmVcIilcblx0XHRcdFx0XHQuYWRkT3B0aW9uKFwiaW4tcGxhY2VcIiwgXCJUdXJuIHdvcmQgaW50byB0YWcgaW4gcGxhY2VcIilcblx0XHRcdFx0XHQuYWRkT3B0aW9uKFwiZW5kLWxpbmVcIiwgXCJQdXQgdGFnIGF0IGVuZCBvZiBsaW5lXCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFsdENsaWNrVGFnTW9kZSlcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbHRDbGlja1RhZ01vZGUgPSB2YWx1ZSBhcyBBbHRDbGlja1RhZ01vZGU7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiU2hvdyBwbGFjZW1lbnQgb2YgbmV3bHkgY3JlYXRlZCB0YWdzIGluIHN0YXR1cyBiYXJcIilcblx0XHRcdC5zZXREZXNjKFwiRGlzcGxheXMgU09MIC8gSU5QIC8gRU9MIGluIHRoZSBPYnNpZGlhbiBzdGF0dXMgYmFyLlwiKVxuXHRcdFx0LmFkZFRvZ2dsZSh0ID0+IHRcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dQbGFjZW1lbnRJblN0YXR1c0Jhcilcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWwpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93UGxhY2VtZW50SW5TdGF0dXNCYXIgPSB2YWw7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHRcdC8vIFRPRE86IHJlLWVuYWJsZSB3aGVuIG1vYmlsZSB0b3VjaCBoYW5kbGluZyBpcyBzdGFibGVcdFxuXHRcdC8vIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdC8vIFx0LnNldE5hbWUoXCJNb2JpbGUgbG9uZy1wcmVzc1wiKVxuXHRcdC8vIFx0LnNldERlc2MoXCJPbiBtb2JpbGUsIGEgbG9uZy1wcmVzcyBjYW4gdHJpZ2dlciB0aGUgc2FtZSBhY3Rpb24gYXMgQWx0LWNsaWNrICh3b3JrcyBiZXN0IHdoZW4gdGV4dCBpcyBzZWxlY3RlZCkuXCIpXG5cdFx0Ly8gXHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG5cdFx0Ly8gXHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVMb25nUHJlc3NFbmFibGVkKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHQvLyBcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVMb25nUHJlc3NFbmFibGVkID0gdmFsdWU7XG5cdFx0Ly8gXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0Ly8gXHRcdH0pXG5cdFx0Ly8gXHQpO1xuXG5cdFx0Ly8gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0Ly8gXHQuc2V0TmFtZShcIk1vYmlsZSBsb25nLXByZXNzIGR1cmF0aW9uIChtcylcIilcblx0XHQvLyBcdC5zZXREZXNjKFwiUmFuZ2U6IDI1MFx1MjAxMzUwMDAuIERlZmF1bHQ6IDEwMDAuXCIpXG5cdFx0Ly8gXHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHQvLyBcdFx0dGV4dFxuXHRcdC8vIFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIjEwMDBcIilcblx0XHQvLyBcdFx0XHQuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUxvbmdQcmVzc01zID8/IDEwMDApKVxuXHRcdC8vIFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHQvLyBcdFx0XHRcdGNvbnN0IHBhcnNlZCA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG5cdFx0Ly8gXHRcdFx0XHRpZiAoIWlzTmFOKHBhcnNlZCkpIHtcblx0XHQvLyBcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlTG9uZ1ByZXNzTXMgPSBNYXRoLm1heCgyNTAsIE1hdGgubWluKDUwMDAsIHBhcnNlZCkpO1xuXHRcdC8vIFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHQvLyBcdFx0XHRcdH1cblx0XHQvLyBcdFx0XHR9KVxuXHRcdC8vIFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJGcmVxdWVuY3kgY3V0b2ZmXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkhpZGUgdGFncyB0aGF0IGFwcGVhciBmZXdlciB0aW1lcyB0aGFuIHRoaXMgbnVtYmVyIGluIHRoZSB2YXVsdC5cIilcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cblx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZyZXF1ZW5jeUN1dG9mZkVuYWJsZWQpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmZyZXF1ZW5jeUN1dG9mZkVuYWJsZWQgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSlcblx0XHRcdClcblx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiMFwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mcmVxdWVuY3lDdXRvZmYudG9TdHJpbmcoKSlcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBwYXJzZWQgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuXHRcdFx0XHRcdFx0aWYgKCFpc05hTihwYXJzZWQpICYmIHBhcnNlZCA+PSAwKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmZyZXF1ZW5jeUN1dG9mZiA9IHBhcnNlZDtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiQ2xlYXIgcGlubmVkIHRhZ3NcIilcblx0XHRcdC5zZXREZXNjKFwiUmVtb3ZlcyBhbGwgcGlubmVkIHRhZ3MgZnJvbSB0aGUgdG9wIG9mIHRoZSBmbGF0IHRhZyBsaXN0LlwiKVxuXHRcdFx0LmFkZEJ1dHRvbigoYnRuKSA9PlxuXHRcdFx0XHRidG4uc2V0QnV0dG9uVGV4dChcIkNsZWFyIHBpbm5lZFwiKS5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5waW5uZWRUYWdzID0gW107XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHR9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7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O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFB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LFVBQVUsV0FBTSxLQUFLLFNBQVMsTUFBcEIsWUFBMEIsQ0FBQztBQUMzQyxVQUFNLFlBQVk7QUFFbEIsVUFBTSxPQUFPLFVBQVU7QUFFdkIsU0FBSyxXQUFXO0FBQUEsTUFDWixZQUFZLE1BQU0sUUFBUSxVQUFVLFVBQVUsSUFDdkMsVUFBVSxXQUF5QixPQUFPLENBQUMsTUFBbUIsT0FBTyxNQUFNLFFBQVEsSUFDcEYsaUJBQWlCO0FBQUEsTUFFdkIsaUJBQWtCLE9BQU8sVUFBVSxvQkFBb0IsWUFBWSxDQUFDLE1BQU0sVUFBVSxlQUFlLElBQzdGLEtBQUssSUFBSSxHQUFHLEtBQUssTUFBTSxVQUFVLGVBQWUsQ0FBQyxJQUNqRCxpQkFBaUI7QUFBQSxNQUV2Qix3QkFBd0IsT0FBTyxVQUFVLDJCQUEyQixZQUM5RCxVQUFVLHlCQUNWLGlCQUFpQjtBQUFBLE1BRXZCLGlCQUFrQixTQUFTLGdCQUFnQixTQUFTLGNBQWMsU0FBUyxhQUNyRSxPQUNBLGlCQUFpQjtBQUFBLE1BRXZCLHdCQUF3QixPQUFPLFVBQVUsMkJBQTJCLFlBQzlELFVBQVUseUJBQ1YsaUJBQWlCO0FBQUEsTUFFdkIsbUJBQW9CLE9BQU8sVUFBVSxzQkFBc0IsWUFBWSxDQUFDLE1BQU0sVUFBVSxpQkFBaUIsSUFDbkcsS0FBSyxJQUFJLEtBQUssS0FBSyxJQUFJLEtBQU0sS0FBSyxNQUFNLFVBQVUsaUJBQWlCLENBQUMsQ0FBQyxJQUNyRSxpQkFBaUI7QUFBQSxNQUV2QiwwQkFBMEIsT0FBTyxVQUFVLDZCQUE2QixZQUNsRSxVQUFVLDJCQUNWLGlCQUFpQjtBQUFBLElBQzNCO0FBR0EsVUFBTSxLQUFLLFNBQVMsS0FBSyxRQUFRO0FBQUEsRUFDckM7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNqQixVQUFNLEtBQUssU0FBUyxLQUFLLFFBQVE7QUFDakMsU0FBSyxJQUFJLFVBQVUsUUFBUSxnQ0FBZ0M7QUFDM0QsU0FBSyxnQkFBZ0I7QUFBQSxFQUN6QjtBQUFBO0FBQUEsRUFJQSxNQUFNLGVBQWU7QUFDakIsVUFBTSxZQUFZLEtBQUssSUFBSTtBQUMzQixRQUFJLE9BQU8sVUFBVSxnQkFBZ0IsU0FBUyxFQUFFLENBQUM7QUFFakQsUUFBSSxDQUFDLE1BQU07QUFDUCxZQUFNLFlBQVksVUFBVSxhQUFhLEtBQUs7QUFDOUMsVUFBSSxDQUFDO0FBQVc7QUFDaEIsYUFBTztBQUNQLFlBQU0sS0FBSyxhQUFhLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFBQSxJQUMvQztBQUVBLGNBQVUsV0FBVyxJQUFJO0FBQUEsRUFDN0I7QUFBQSxFQUVRLFdBQVc7QUFDZixVQUFNLFVBQVUsU0FBUyxjQUFjLE9BQU87QUFDOUMsWUFBUSxZQUFZLFVBQVU7QUFDOUIsYUFBUyxLQUFLLFlBQVksT0FBTztBQUFBLEVBQ3JDO0FBQ0o7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJpbXBvcnRfb2JzaWRpYW4iLCAibmV4dCIsICJuZXdMaW5lIl0KfQo=
