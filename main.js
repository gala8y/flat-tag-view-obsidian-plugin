/* 
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD 
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => FlatTagPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian2 = require("obsidian");

// flatTagView.ts
var import_obsidian = require("obsidian");

// constants.ts
var VIEW_TYPE = "flat-tag-view";

// flatTagView.ts
var FlatTagView = class extends import_obsidian.ItemView {
  constructor(leaf) {
    super(leaf);
    this.selectedTags = /* @__PURE__ */ new Set();
    this.excludedTags = /* @__PURE__ */ new Set();
    this.allTags = /* @__PURE__ */ new Map();
    this.currentSort = "az";
    this.tagsByFile = /* @__PURE__ */ new Map();
    this.hideSingleUseTags = false;
    this.showAlphabetLetters = false;
    this.tagSearchText = "";
    this.containerEl.addClass("flat-tag-view");
  }
  getViewType() {
    return VIEW_TYPE;
  }
  getDisplayText() {
    return "Flat Tags";
  }
  getIcon() {
    return "tag";
  }
  async onOpen() {
    this.container = this.contentEl.createDiv({ cls: "flat-tag-container" });
    this.sortContainer = this.container.createDiv({ cls: "flat-tag-sort-container" });
    const buttonSection = this.sortContainer.createDiv({ cls: "flat-tag-buttons-section" });
    const sortByAZ = buttonSection.createDiv({ cls: "flat-tag-sort-button", title: "Sort A-Z" });
    (0, import_obsidian.setIcon)(sortByAZ, "lucide-sort-asc");
    sortByAZ.addEventListener("click", () => {
      this.currentSort = "az";
      this.renderTags();
    });
    const sortByCount = buttonSection.createDiv({ cls: "flat-tag-sort-button", title: "Sort by usage" });
    (0, import_obsidian.setIcon)(sortByCount, "lucide-bar-chart-2");
    sortByCount.addEventListener("click", () => {
      this.currentSort = "count";
      this.renderTags();
    });
    const clearButton = buttonSection.createDiv({ cls: "flat-tag-clear-button" });
    (0, import_obsidian.setIcon)(clearButton, "x");
    clearButton.addEventListener("click", () => {
      this.clearTagSelections();
    });
    const toggleSingleUseButton = buttonSection.createDiv({
      cls: "flat-tag-sort-button",
      title: "Toggle single-use tags"
    });
    (0, import_obsidian.setIcon)(toggleSingleUseButton, "eye-off");
    toggleSingleUseButton.addEventListener("click", () => {
      this.toggleSingleUseTags();
      (0, import_obsidian.setIcon)(toggleSingleUseButton, this.hideSingleUseTags ? "eye" : "eye-off");
    });
    const toggleAlphabetButton = buttonSection.createDiv({
      cls: "flat-tag-sort-button",
      title: "Toggle alphabet letters"
    });
    (0, import_obsidian.setIcon)(toggleAlphabetButton, "lucide-brick-wall");
    toggleAlphabetButton.addEventListener("click", () => {
      this.toggleAlphabetLetters();
      (0, import_obsidian.setIcon)(toggleAlphabetButton, this.showAlphabetLetters ? "cuboid" : "lucide-brick-wall");
    });
    const searchSection = this.sortContainer.createDiv({ cls: "flat-tag-search-section" });
    const searchBox = searchSection.createEl("input", {
      cls: "flat-tag-search-input",
      attr: {
        type: "text",
        placeholder: "Search tags..."
      }
    });
    const clearSearchButton = searchSection.createDiv({
      cls: "flat-tag-search-clear-button",
      title: "Clear search"
    });
    (0, import_obsidian.setIcon)(clearSearchButton, "square-x");
    clearSearchButton.addEventListener("click", () => {
      this.clearSearchBox();
    });
    searchBox.addEventListener("input", (e) => {
      const target = e.target;
      this.tagSearchText = target.value;
      this.renderTags();
    });
    this.tagContainer = this.container.createDiv({ cls: "flat-tag-list" });
    await this.loadTags();
    this.registerEvent(
      this.app.metadataCache.on("resolved", () => {
        this.loadTags();
      })
    );
  }
  async loadTags() {
    this.allTags.clear();
    this.tagsByFile.clear();
    const files = this.app.vault.getMarkdownFiles();
    for (const file of files) {
      const fileTags = this.getFileTags(file);
      this.tagsByFile.set(file.path, new Set(fileTags));
      fileTags.forEach((tag) => {
        this.allTags.set(tag, (this.allTags.get(tag) || 0) + 1);
      });
    }
    this.renderTags();
  }
  renderTags() {
    this.tagContainer.empty();
    const filteredTags = this.getFilteredTags();
    let sortedTags;
    if (this.currentSort === "az") {
      sortedTags = Array.from(filteredTags.entries()).sort((a, b) => a[0].localeCompare(b[0], "pl"));
    } else {
      sortedTags = Array.from(filteredTags.entries()).sort((a, b) => b[1] - a[1]);
    }
    if (this.showAlphabetLetters && this.currentSort === "az") {
      const tagsByLetter = /* @__PURE__ */ new Map();
      tagsByLetter.set("other", []);
      for (let charCode = 65; charCode <= 90; charCode++) {
        const letter = String.fromCharCode(charCode);
        tagsByLetter.set(letter, []);
      }
      const polishDiacritics = ["\u0104", "\u0106", "\u0118", "\u0141", "\u0143", "\xD3", "\u015A", "\u0179", "\u017B"];
      polishDiacritics.forEach((letter) => tagsByLetter.set(letter, []));
      sortedTags.forEach((tagItem) => {
        const [tag, count] = tagItem;
        const firstChar = tag.charAt(0).toUpperCase();
        if (firstChar.match(/[A-Z]/)) {
          const letterTags = tagsByLetter.get(firstChar) || [];
          letterTags.push(tagItem);
          tagsByLetter.set(firstChar, letterTags);
        } else if (polishDiacritics.includes(firstChar)) {
          const letterTags = tagsByLetter.get(firstChar) || [];
          letterTags.push(tagItem);
          tagsByLetter.set(firstChar, letterTags);
        } else {
          const otherTags = tagsByLetter.get("other") || [];
          otherTags.push(tagItem);
          tagsByLetter.set("other", otherTags);
        }
      });
      tagsByLetter.forEach((letterTags, letter) => {
        if (letterTags.length > 0) {
          if (letter !== "other") {
            const letterEl = this.tagContainer.createSpan({ cls: "flat-tag-letter" });
            letterEl.setText(letter);
          }
          letterTags.forEach(([tag, count]) => {
            this.createTagElement(tag, count);
          });
        }
      });
    } else {
      sortedTags.forEach(([tag, count]) => {
        this.createTagElement(tag, count);
      });
    }
  }
  createTagElement(tag, count) {
    const tagEl = this.tagContainer.createSpan({ cls: "flat-tag" });
    if (this.selectedTags.has(tag)) {
      tagEl.addClass("flat-tag-selected");
    } else if (this.excludedTags.has(tag)) {
      tagEl.addClass("flat-tag-excluded");
    }
    tagEl.setText(`#${tag} (${count})`);
    tagEl.addEventListener("click", (e) => {
      const isMultiSelect = e.ctrlKey || e.metaKey;
      const isExclude = e.shiftKey && isMultiSelect;
      if (isExclude) {
        if (this.excludedTags.has(tag)) {
          this.excludedTags.delete(tag);
        } else {
          this.excludedTags.add(tag);
          this.selectedTags.delete(tag);
        }
      } else if (isMultiSelect) {
        if (this.selectedTags.has(tag)) {
          this.selectedTags.delete(tag);
        } else {
          this.selectedTags.add(tag);
          this.excludedTags.delete(tag);
        }
      } else {
        if (this.selectedTags.size === 1 && this.selectedTags.has(tag)) {
          this.selectedTags.clear();
        } else {
          this.selectedTags.clear();
          this.excludedTags.clear();
          this.selectedTags.add(tag);
        }
      }
      this.renderTags();
      this.updateSearch();
    });
  }
  getFilteredTags() {
    let filteredTags = /* @__PURE__ */ new Map();
    if (this.selectedTags.size === 0) {
      filteredTags = new Map(this.allTags);
    } else {
      const selectedTagsArray = Array.from(this.selectedTags);
      const matchingFiles = [];
      this.tagsByFile.forEach((tags, filePath) => {
        if (selectedTagsArray.every((tag) => tags.has(tag))) {
          matchingFiles.push(filePath);
        }
      });
      matchingFiles.forEach((filePath) => {
        const fileTags = this.tagsByFile.get(filePath);
        if (fileTags) {
          fileTags.forEach((tag) => {
            filteredTags.set(tag, (filteredTags.get(tag) || 0) + 1);
          });
        }
      });
      selectedTagsArray.forEach((tag) => {
        if (!filteredTags.has(tag)) {
          filteredTags.set(tag, this.allTags.get(tag) || 0);
        }
      });
    }
    if (this.hideSingleUseTags) {
      const result = /* @__PURE__ */ new Map();
      filteredTags.forEach((count, tag) => {
        if (count > 1 || this.selectedTags.has(tag)) {
          result.set(tag, count);
        }
      });
      filteredTags = result;
    }
    if (this.tagSearchText) {
      const searchText = this.tagSearchText.toLowerCase();
      const result = /* @__PURE__ */ new Map();
      filteredTags.forEach((count, tag) => {
        if (tag.toLowerCase().includes(searchText) || this.selectedTags.has(tag) || this.excludedTags.has(tag)) {
          result.set(tag, count);
        }
      });
      return result;
    }
    return filteredTags;
  }
  updateSearch() {
    if (this.selectedTags.size === 0 && this.excludedTags.size === 0) {
      this.app.workspace.getLeavesOfType("search").forEach((leaf) => {
        const searchView = leaf.view;
        if (searchView && typeof searchView.clearSearch === "function") {
          searchView.clearSearch();
        }
      });
      return;
    }
    const tagQuery = [
      ...Array.from(this.selectedTags).map((tag) => `tag:#${tag}`),
      ...Array.from(this.excludedTags).map((tag) => `-tag:#${tag}`)
    ].join(" ");
    let searchLeaf = this.app.workspace.getLeavesOfType("search")[0];
    if (!searchLeaf) {
      const rightLeaf = this.app.workspace.getRightLeaf(false);
      if (rightLeaf) {
        searchLeaf = rightLeaf;
        searchLeaf.setViewState({ type: "search" });
      }
    }
    if (searchLeaf) {
      const searchView = searchLeaf.view;
      if (searchView && typeof searchView.setQuery === "function") {
        searchView.setQuery(tagQuery);
        searchView.search();
      }
      this.app.workspace.revealLeaf(searchLeaf);
    }
  }
  getFileTags(file) {
    const cache = this.app.metadataCache.getFileCache(file);
    if (!cache)
      return [];
    const tags = /* @__PURE__ */ new Set();
    if (cache.tags) {
      cache.tags.forEach((tagObj) => {
        const tag = tagObj.tag.replace(/^#/, "");
        tags.add(tag);
      });
    }
    if (cache.frontmatter && cache.frontmatter.tags) {
      const fmTags = cache.frontmatter.tags;
      if (typeof fmTags === "string") {
        fmTags.split(/[,\s]+/).filter(Boolean).forEach((tag) => {
          tags.add(tag);
        });
      } else if (Array.isArray(fmTags)) {
        fmTags.forEach((tag) => {
          if (tag)
            tags.add(String(tag));
        });
      }
    }
    return Array.from(tags);
  }
  // Methods for hotkey functionality
  toggleSort() {
    this.currentSort = this.currentSort === "az" ? "count" : "az";
    this.renderTags();
  }
  clearTagSelections() {
    this.selectedTags.clear();
    this.excludedTags.clear();
    this.renderTags();
    this.updateSearch();
  }
  toggleSingleUseTags() {
    this.hideSingleUseTags = !this.hideSingleUseTags;
    this.renderTags();
  }
  toggleAlphabetLetters() {
    this.showAlphabetLetters = !this.showAlphabetLetters;
    this.renderTags();
  }
  clearSearchBox() {
    const searchBox = this.contentEl.querySelector(".flat-tag-search-input");
    if (searchBox) {
      searchBox.value = "";
      this.tagSearchText = "";
      this.renderTags();
    }
  }
};

// styles.ts
var getStyles = () => {
  return `
    .workspace-split.mod-root .view-content.flat-tag-view {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: stretch;
      height: 100%;
      padding: 0;
      margin: 0;
    }

    .flat-tag-container {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: flex-start;
      width: 100%;
      height: 100%;
      box-sizing: border-box;
      padding: 0;
      margin: 0;
    }

    .flat-tag-sort-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-shrink: 0;
      padding: 8px;
      background-color: var(--background-primary);
      border-bottom: 1px solid var(--background-modifier-border);
      width: 100%;
    }
    
    .flat-tag-buttons-section {
      display: flex;
      gap: 8px;
    }
    
    .flat-tag-search-section {
      display: flex;
      align-items: center;
      gap: 4px;
      margin-left: auto;
      background-color: var(--background-secondary);
      border-radius: 4px;
      padding: 2px 8px;
    }
    
    .flat-tag-search-input {
      background: transparent;
      border: none;
      color: var(--text-normal);
      width: 150px;
      height: 24px;
      font-size: 0.9em;
    }
    
    .flat-tag-search-input:focus {
      outline: none;
      box-shadow: none;
    }
    
    .flat-tag-search-icon {
      color: var(--text-muted);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .flat-tag-search-clear-button {
      cursor: pointer;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8em;
    }

    .flat-tag-search-clear-button:hover {
      color: var(--text-normal);
    }

    .flat-tag-sort-button, .flat-tag-clear-button {
      cursor: pointer;
      padding: 4px;
      border-radius: 4px;
    }

    .flat-tag-sort-button:hover, .flat-tag-clear-button:hover {
      background-color: var(--interactive-hover);
    }

    .flat-tag-list {
      display: flex;
      flex-wrap: wrap;
      align-content: flex-start;
      overflow-y: auto;
      flex: 1;
      line-height: 1.5em;
      padding: 8px;
      width: 100%;
    }

    .flat-tag {
      display: inline-block;
      padding: 2px 6px;
      margin: 2px;
      border-radius: 4px;
      cursor: pointer;
      background-color: var(--tag-background);
      color: var(--tag-color);
    }

    .flat-tag:hover {
      background-color: var(--tag-background-hover);
    }

    .flat-tag-selected {
      font-weight: bold;
      background-color: var(--interactive-accent);
      color: var(--text-on-accent);
    }

    .flat-tag-excluded {
      font-weight: bold;
      background-color: var(--color-red);
      color: var(--text-on-accent);
    }
    
    .flat-tag-letter {
      display: inline-block;
      font-weight: bold;
      font-size: 1.2em;
      margin: 2px;
      padding: 2px 6px;
      border-radius: 4px;
      background-color: var(--background-secondary);
      color: var(--text-normal);
      vertical-align: middle;
    }
  `;
};

// main.ts
var FlatTagPlugin = class extends import_obsidian2.Plugin {
  async onload() {
    this.registerView(
      VIEW_TYPE,
      (leaf) => new FlatTagView(leaf)
    );
    this.addRibbonIcon("tag", "Open Flat Tags", () => {
      this.activateView();
    });
    this.addCommand({
      id: "open-flat-tags",
      name: "Open Flat Tags",
      callback: () => {
        this.activateView();
      }
    });
    this.addCommand({
      id: "toggle-flat-tag-sort",
      name: "Toggle Flat Tag Sort (A-Z/Usage)",
      callback: () => {
        var _a;
        const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0]) == null ? void 0 : _a.view;
        if (view)
          view.toggleSort();
      }
    });
    this.addCommand({
      id: "clear-flat-tag-selections",
      name: "Clear Flat Tag Selections",
      callback: () => {
        var _a;
        const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0]) == null ? void 0 : _a.view;
        if (view)
          view.clearTagSelections();
      }
    });
    this.addCommand({
      id: "toggle-flat-tag-single-use",
      name: "Toggle Flat Tag Single Use",
      callback: () => {
        var _a;
        const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0]) == null ? void 0 : _a.view;
        if (view)
          view.toggleSingleUseTags();
      }
    });
    this.addCommand({
      id: "toggle-flat-tag-alphabet",
      name: "Toggle Flat Tag Alphabet Letters",
      callback: () => {
        var _a;
        const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0]) == null ? void 0 : _a.view;
        if (view)
          view.toggleAlphabetLetters();
      }
    });
    this.addCommand({
      id: "clear-flat-tag-search",
      name: "Clear Flat Tag Search Box",
      callback: () => {
        var _a;
        const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0]) == null ? void 0 : _a.view;
        if (view)
          view.clearSearchBox();
      }
    });
    this.addStyle();
  }
  async onunload() {
    this.app.workspace.detachLeavesOfType(VIEW_TYPE);
  }
  async activateView() {
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType(VIEW_TYPE)[0];
    if (!leaf) {
      const rightLeaf = workspace.getRightLeaf(false);
      if (rightLeaf) {
        leaf = rightLeaf;
        await leaf.setViewState({ type: VIEW_TYPE });
      }
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  addStyle() {
    const styleEl = document.createElement("style");
    styleEl.innerHTML = getStyles();
    document.head.appendChild(styleEl);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJmbGF0VGFnVmlldy50cyIsICJjb25zdGFudHMudHMiLCAic3R5bGVzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4sIFdvcmtzcGFjZUxlYWYgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEZsYXRUYWdWaWV3IH0gZnJvbSBcIi4vZmxhdFRhZ1ZpZXdcIjtcbmltcG9ydCB7IFZJRVdfVFlQRSB9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZ2V0U3R5bGVzIH0gZnJvbSBcIi4vc3R5bGVzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZsYXRUYWdQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgdGhpcy5yZWdpc3RlclZpZXcoXG4gICAgICBWSUVXX1RZUEUsXG4gICAgICAobGVhZjogV29ya3NwYWNlTGVhZikgPT4gbmV3IEZsYXRUYWdWaWV3KGxlYWYpXG4gICAgKTtcblxuICAgIHRoaXMuYWRkUmliYm9uSWNvbihcInRhZ1wiLCBcIk9wZW4gRmxhdCBUYWdzXCIsICgpID0+IHtcbiAgICAgIHRoaXMuYWN0aXZhdGVWaWV3KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IFwib3Blbi1mbGF0LXRhZ3NcIixcbiAgICAgIG5hbWU6IFwiT3BlbiBGbGF0IFRhZ3NcIixcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuYWN0aXZhdGVWaWV3KCk7XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gQWRkIGNvbW1hbmRzIGZvciBob3RrZXlzXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiBcInRvZ2dsZS1mbGF0LXRhZy1zb3J0XCIsXG4gICAgICBuYW1lOiBcIlRvZ2dsZSBGbGF0IFRhZyBTb3J0IChBLVovVXNhZ2UpXCIsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEUpWzBdPy52aWV3IGFzIEZsYXRUYWdWaWV3O1xuICAgICAgICBpZiAodmlldykgdmlldy50b2dnbGVTb3J0KCk7XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiBcImNsZWFyLWZsYXQtdGFnLXNlbGVjdGlvbnNcIixcbiAgICAgIG5hbWU6IFwiQ2xlYXIgRmxhdCBUYWcgU2VsZWN0aW9uc1wiLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgY29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFKVswXT8udmlldyBhcyBGbGF0VGFnVmlldztcbiAgICAgICAgaWYgKHZpZXcpIHZpZXcuY2xlYXJUYWdTZWxlY3Rpb25zKCk7XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiBcInRvZ2dsZS1mbGF0LXRhZy1zaW5nbGUtdXNlXCIsXG4gICAgICBuYW1lOiBcIlRvZ2dsZSBGbGF0IFRhZyBTaW5nbGUgVXNlXCIsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEUpWzBdPy52aWV3IGFzIEZsYXRUYWdWaWV3O1xuICAgICAgICBpZiAodmlldykgdmlldy50b2dnbGVTaW5nbGVVc2VUYWdzKCk7XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiBcInRvZ2dsZS1mbGF0LXRhZy1hbHBoYWJldFwiLFxuICAgICAgbmFtZTogXCJUb2dnbGUgRmxhdCBUYWcgQWxwaGFiZXQgTGV0dGVyc1wiLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgY29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFKVswXT8udmlldyBhcyBGbGF0VGFnVmlldztcbiAgICAgICAgaWYgKHZpZXcpIHZpZXcudG9nZ2xlQWxwaGFiZXRMZXR0ZXJzKCk7XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiBcImNsZWFyLWZsYXQtdGFnLXNlYXJjaFwiLFxuICAgICAgbmFtZTogXCJDbGVhciBGbGF0IFRhZyBTZWFyY2ggQm94XCIsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEUpWzBdPy52aWV3IGFzIEZsYXRUYWdWaWV3O1xuICAgICAgICBpZiAodmlldykgdmlldy5jbGVhclNlYXJjaEJveCgpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkU3R5bGUoKTtcbiAgfVxuXG4gIGFzeW5jIG9udW5sb2FkKCkge1xuICAgIHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoVklFV19UWVBFKTtcbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlVmlldygpIHtcbiAgICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG4gICAgXG4gICAgbGV0IGxlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRSlbMF07XG4gICAgXG4gICAgaWYgKCFsZWFmKSB7XG4gICAgICBjb25zdCByaWdodExlYWYgPSB3b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcbiAgICAgIGlmIChyaWdodExlYWYpIHtcbiAgICAgICAgbGVhZiA9IHJpZ2h0TGVhZjtcbiAgICAgICAgYXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoeyB0eXBlOiBWSUVXX1RZUEUgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChsZWFmKSB7XG4gICAgICB3b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcbiAgICB9XG4gIH1cblxuICBhZGRTdHlsZSgpIHtcbiAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICAgIHN0eWxlRWwuaW5uZXJIVE1MID0gZ2V0U3R5bGVzKCk7XG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfVxufVxuXG4iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGaWxlLCBzZXRJY29uIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBWSUVXX1RZUEUgfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcblxuZXhwb3J0IGNsYXNzIEZsYXRUYWdWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgdGFnQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBzb3J0Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBzZWxlY3RlZFRhZ3M6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIGV4Y2x1ZGVkVGFnczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XG4gIHByaXZhdGUgYWxsVGFnczogTWFwPHN0cmluZywgbnVtYmVyPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBjdXJyZW50U29ydDogXCJhelwiIHwgXCJjb3VudFwiID0gXCJhelwiO1xuICBwcml2YXRlIHRhZ3NCeUZpbGU6IE1hcDxzdHJpbmcsIFNldDxzdHJpbmc+PiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBoaWRlU2luZ2xlVXNlVGFnczogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIHNob3dBbHBoYWJldExldHRlcnM6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSB0YWdTZWFyY2hUZXh0OiBzdHJpbmcgPSBcIlwiO1xuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYpIHtcbiAgICBzdXBlcihsZWFmKTtcbiAgICB0aGlzLmNvbnRhaW5lckVsLmFkZENsYXNzKFwiZmxhdC10YWctdmlld1wiKTtcbiAgfVxuXG4gIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFZJRVdfVFlQRTtcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiRmxhdCBUYWdzXCI7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwidGFnXCI7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgLy8gQ3JlYXRlIGNvbnRhaW5lciBhbmQgc29ydCBjb250YWluZXJcbiAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJmbGF0LXRhZy1jb250YWluZXJcIiB9KTtcbiAgICB0aGlzLnNvcnRDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwiZmxhdC10YWctc29ydC1jb250YWluZXJcIiB9KTtcbiAgXG4gICAgLy8gQ3JlYXRlIGxlZnQgc2VjdGlvbiBmb3IgYnV0dG9uc1xuICAgIGNvbnN0IGJ1dHRvblNlY3Rpb24gPSB0aGlzLnNvcnRDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcImZsYXQtdGFnLWJ1dHRvbnMtc2VjdGlvblwiIH0pO1xuICBcbiAgICAvLyBBZGQgZXhpc3RpbmcgYnV0dG9ucyB0byB0aGUgYnV0dG9uIHNlY3Rpb25cbiAgICBjb25zdCBzb3J0QnlBWiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiBcImZsYXQtdGFnLXNvcnQtYnV0dG9uXCIsIHRpdGxlOiBcIlNvcnQgQS1aXCIgfSk7XG4gICAgc2V0SWNvbihzb3J0QnlBWiwgXCJsdWNpZGUtc29ydC1hc2NcIik7XG4gICAgc29ydEJ5QVouYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY3VycmVudFNvcnQgPSBcImF6XCI7XG4gICAgICB0aGlzLnJlbmRlclRhZ3MoKTtcbiAgICB9KTtcbiAgXG4gICAgY29uc3Qgc29ydEJ5Q291bnQgPSBidXR0b25TZWN0aW9uLmNyZWF0ZURpdih7IGNsczogXCJmbGF0LXRhZy1zb3J0LWJ1dHRvblwiLCB0aXRsZTogXCJTb3J0IGJ5IHVzYWdlXCIgfSk7XG4gICAgc2V0SWNvbihzb3J0QnlDb3VudCwgXCJsdWNpZGUtYmFyLWNoYXJ0LTJcIik7XG4gICAgc29ydEJ5Q291bnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY3VycmVudFNvcnQgPSBcImNvdW50XCI7XG4gICAgICB0aGlzLnJlbmRlclRhZ3MoKTtcbiAgICB9KTtcbiAgXG4gICAgY29uc3QgY2xlYXJCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZURpdih7IGNsczogXCJmbGF0LXRhZy1jbGVhci1idXR0b25cIiB9KTtcbiAgICBzZXRJY29uKGNsZWFyQnV0dG9uLCBcInhcIik7XG4gICAgY2xlYXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xlYXJUYWdTZWxlY3Rpb25zKCk7XG4gICAgfSk7XG4gIFxuICAgIGNvbnN0IHRvZ2dsZVNpbmdsZVVzZUJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRGl2KHsgXG4gICAgICBjbHM6IFwiZmxhdC10YWctc29ydC1idXR0b25cIiwgXG4gICAgICB0aXRsZTogXCJUb2dnbGUgc2luZ2xlLXVzZSB0YWdzXCIgXG4gICAgfSk7XG4gICAgc2V0SWNvbih0b2dnbGVTaW5nbGVVc2VCdXR0b24sIFwiZXllLW9mZlwiKTtcbiAgICB0b2dnbGVTaW5nbGVVc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMudG9nZ2xlU2luZ2xlVXNlVGFncygpO1xuICAgICAgc2V0SWNvbih0b2dnbGVTaW5nbGVVc2VCdXR0b24sIHRoaXMuaGlkZVNpbmdsZVVzZVRhZ3MgPyBcImV5ZVwiIDogXCJleWUtb2ZmXCIpO1xuICAgIH0pO1xuICBcbiAgICBjb25zdCB0b2dnbGVBbHBoYWJldEJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRGl2KHsgXG4gICAgICBjbHM6IFwiZmxhdC10YWctc29ydC1idXR0b25cIiwgXG4gICAgICB0aXRsZTogXCJUb2dnbGUgYWxwaGFiZXQgbGV0dGVyc1wiIFxuICAgIH0pO1xuICAgIHNldEljb24odG9nZ2xlQWxwaGFiZXRCdXR0b24sIFwibHVjaWRlLWJyaWNrLXdhbGxcIik7XG4gICAgdG9nZ2xlQWxwaGFiZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMudG9nZ2xlQWxwaGFiZXRMZXR0ZXJzKCk7XG4gICAgICBzZXRJY29uKHRvZ2dsZUFscGhhYmV0QnV0dG9uLCB0aGlzLnNob3dBbHBoYWJldExldHRlcnMgPyBcImN1Ym9pZFwiIDogXCJsdWNpZGUtYnJpY2std2FsbFwiKTtcbiAgICB9KTtcbiAgXG4gICAgLy8gQ3JlYXRlIHNlYXJjaCBzZWN0aW9uIG9uIHRoZSByaWdodFxuICAgIGNvbnN0IHNlYXJjaFNlY3Rpb24gPSB0aGlzLnNvcnRDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcImZsYXQtdGFnLXNlYXJjaC1zZWN0aW9uXCIgfSk7XG4gICAgXG4gICAgLy8gQWRkIHNlYXJjaCBib3hcbiAgICBjb25zdCBzZWFyY2hCb3ggPSBzZWFyY2hTZWN0aW9uLmNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuICAgICAgY2xzOiBcImZsYXQtdGFnLXNlYXJjaC1pbnB1dFwiLFxuICAgICAgYXR0cjogeyBcbiAgICAgICAgdHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICBwbGFjZWhvbGRlcjogXCJTZWFyY2ggdGFncy4uLlwiLFxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIEFkZCBjbGVhciBzZWFyY2ggYnV0dG9uXG4gICAgY29uc3QgY2xlYXJTZWFyY2hCdXR0b24gPSBzZWFyY2hTZWN0aW9uLmNyZWF0ZURpdih7IFxuICAgICAgY2xzOiBcImZsYXQtdGFnLXNlYXJjaC1jbGVhci1idXR0b25cIixcbiAgICAgIHRpdGxlOiBcIkNsZWFyIHNlYXJjaFwiIFxuICAgIH0pO1xuICAgIHNldEljb24oY2xlYXJTZWFyY2hCdXR0b24sIFwic3F1YXJlLXhcIik7XG4gICAgY2xlYXJTZWFyY2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xlYXJTZWFyY2hCb3goKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBBZGQgZXZlbnQgbGlzdGVuZXIgZm9yIHNlYXJjaCBpbnB1dFxuICAgIHNlYXJjaEJveC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICB0aGlzLnRhZ1NlYXJjaFRleHQgPSB0YXJnZXQudmFsdWU7XG4gICAgICB0aGlzLnJlbmRlclRhZ3MoKTtcbiAgICB9KTtcbiAgICBcbiAgICB0aGlzLnRhZ0NvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJmbGF0LXRhZy1saXN0XCIgfSk7XG4gIFxuICAgIGF3YWl0IHRoaXMubG9hZFRhZ3MoKTtcbiAgXG4gICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5vbihcInJlc29sdmVkXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5sb2FkVGFncygpO1xuICAgICAgfSlcbiAgICApO1xuICB9XG4gIFxuICBhc3luYyBsb2FkVGFncygpIHtcbiAgICB0aGlzLmFsbFRhZ3MuY2xlYXIoKTtcbiAgICB0aGlzLnRhZ3NCeUZpbGUuY2xlYXIoKTtcbiAgICBcbiAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgIGNvbnN0IGZpbGVUYWdzID0gdGhpcy5nZXRGaWxlVGFncyhmaWxlKTtcbiAgICAgIFxuICAgICAgLy8gU3RvcmUgdGFncyBieSBmaWxlIGZvciBmaWx0ZXJpbmdcbiAgICAgIHRoaXMudGFnc0J5RmlsZS5zZXQoZmlsZS5wYXRoLCBuZXcgU2V0KGZpbGVUYWdzKSk7XG4gICAgICBcbiAgICAgIGZpbGVUYWdzLmZvckVhY2godGFnID0+IHtcbiAgICAgICAgdGhpcy5hbGxUYWdzLnNldCh0YWcsICh0aGlzLmFsbFRhZ3MuZ2V0KHRhZykgfHwgMCkgKyAxKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnJlbmRlclRhZ3MoKTtcbiAgfVxuXG4gIHJlbmRlclRhZ3MoKSB7XG4gICAgdGhpcy50YWdDb250YWluZXIuZW1wdHkoKTtcbiAgICBcbiAgICBjb25zdCBmaWx0ZXJlZFRhZ3MgPSB0aGlzLmdldEZpbHRlcmVkVGFncygpO1xuICAgIFxuICAgIGxldCBzb3J0ZWRUYWdzOiBbc3RyaW5nLCBudW1iZXJdW107XG4gICAgXG4gICAgaWYgKHRoaXMuY3VycmVudFNvcnQgPT09IFwiYXpcIikge1xuICAgICAgc29ydGVkVGFncyA9IEFycmF5LmZyb20oZmlsdGVyZWRUYWdzLmVudHJpZXMoKSkuc29ydCgoYSwgYikgPT4gYVswXS5sb2NhbGVDb21wYXJlKGJbMF0sICdwbCcpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc29ydGVkVGFncyA9IEFycmF5LmZyb20oZmlsdGVyZWRUYWdzLmVudHJpZXMoKSkuc29ydCgoYSwgYikgPT4gYlsxXSAtIGFbMV0pO1xuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5zaG93QWxwaGFiZXRMZXR0ZXJzICYmIHRoaXMuY3VycmVudFNvcnQgPT09IFwiYXpcIikge1xuICAgICAgY29uc3QgdGFnc0J5TGV0dGVyID0gbmV3IE1hcDxzdHJpbmcsIEFycmF5PFtzdHJpbmcsIG51bWJlcl0+PigpO1xuICAgICAgXG4gICAgICAvLyBJbml0aWFsaXplIHdpdGggXCJvdGhlclwiIGdyb3VwIGZpcnN0LCB0aGVuIEEtWiwgdGhlbiBQb2xpc2ggZGlhY3JpdGljc1xuICAgICAgdGFnc0J5TGV0dGVyLnNldChcIm90aGVyXCIsIFtdKTtcbiAgICAgIGZvciAobGV0IGNoYXJDb2RlID0gNjU7IGNoYXJDb2RlIDw9IDkwOyBjaGFyQ29kZSsrKSB7XG4gICAgICAgIGNvbnN0IGxldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpO1xuICAgICAgICB0YWdzQnlMZXR0ZXIuc2V0KGxldHRlciwgW10pO1xuICAgICAgfVxuICAgICAgY29uc3QgcG9saXNoRGlhY3JpdGljcyA9IFsnXHUwMTA0JywgJ1x1MDEwNicsICdcdTAxMTgnLCAnXHUwMTQxJywgJ1x1MDE0MycsICdcdTAwRDMnLCAnXHUwMTVBJywgJ1x1MDE3OScsICdcdTAxN0InXTtcbiAgICAgIHBvbGlzaERpYWNyaXRpY3MuZm9yRWFjaChsZXR0ZXIgPT4gdGFnc0J5TGV0dGVyLnNldChsZXR0ZXIsIFtdKSk7XG4gICAgICBcbiAgICAgIHNvcnRlZFRhZ3MuZm9yRWFjaCh0YWdJdGVtID0+IHtcbiAgICAgICAgY29uc3QgW3RhZywgY291bnRdID0gdGFnSXRlbTtcbiAgICAgICAgY29uc3QgZmlyc3RDaGFyID0gdGFnLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGZpcnN0Q2hhci5tYXRjaCgvW0EtWl0vKSkge1xuICAgICAgICAgIGNvbnN0IGxldHRlclRhZ3MgPSB0YWdzQnlMZXR0ZXIuZ2V0KGZpcnN0Q2hhcikgfHwgW107XG4gICAgICAgICAgbGV0dGVyVGFncy5wdXNoKHRhZ0l0ZW0pO1xuICAgICAgICAgIHRhZ3NCeUxldHRlci5zZXQoZmlyc3RDaGFyLCBsZXR0ZXJUYWdzKTtcbiAgICAgICAgfSBlbHNlIGlmIChwb2xpc2hEaWFjcml0aWNzLmluY2x1ZGVzKGZpcnN0Q2hhcikpIHtcbiAgICAgICAgICBjb25zdCBsZXR0ZXJUYWdzID0gdGFnc0J5TGV0dGVyLmdldChmaXJzdENoYXIpIHx8IFtdO1xuICAgICAgICAgIGxldHRlclRhZ3MucHVzaCh0YWdJdGVtKTtcbiAgICAgICAgICB0YWdzQnlMZXR0ZXIuc2V0KGZpcnN0Q2hhciwgbGV0dGVyVGFncyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgb3RoZXJUYWdzID0gdGFnc0J5TGV0dGVyLmdldChcIm90aGVyXCIpIHx8IFtdO1xuICAgICAgICAgIG90aGVyVGFncy5wdXNoKHRhZ0l0ZW0pO1xuICAgICAgICAgIHRhZ3NCeUxldHRlci5zZXQoXCJvdGhlclwiLCBvdGhlclRhZ3MpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgdGFnc0J5TGV0dGVyLmZvckVhY2goKGxldHRlclRhZ3MsIGxldHRlcikgPT4ge1xuICAgICAgICBpZiAobGV0dGVyVGFncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgaWYgKGxldHRlciAhPT0gXCJvdGhlclwiKSB7XG4gICAgICAgICAgICBjb25zdCBsZXR0ZXJFbCA9IHRoaXMudGFnQ29udGFpbmVyLmNyZWF0ZVNwYW4oeyBjbHM6IFwiZmxhdC10YWctbGV0dGVyXCIgfSk7XG4gICAgICAgICAgICBsZXR0ZXJFbC5zZXRUZXh0KGxldHRlcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGxldHRlclRhZ3MuZm9yRWFjaCgoW3RhZywgY291bnRdKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVRhZ0VsZW1lbnQodGFnLCBjb3VudCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzb3J0ZWRUYWdzLmZvckVhY2goKFt0YWcsIGNvdW50XSkgPT4ge1xuICAgICAgICB0aGlzLmNyZWF0ZVRhZ0VsZW1lbnQodGFnLCBjb3VudCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgXG4gIHByaXZhdGUgY3JlYXRlVGFnRWxlbWVudCh0YWc6IHN0cmluZywgY291bnQ6IG51bWJlcikge1xuICAgIGNvbnN0IHRhZ0VsID0gdGhpcy50YWdDb250YWluZXIuY3JlYXRlU3Bhbih7IGNsczogXCJmbGF0LXRhZ1wiIH0pO1xuICAgIFxuICAgIGlmICh0aGlzLnNlbGVjdGVkVGFncy5oYXModGFnKSkge1xuICAgICAgdGFnRWwuYWRkQ2xhc3MoXCJmbGF0LXRhZy1zZWxlY3RlZFwiKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZXhjbHVkZWRUYWdzLmhhcyh0YWcpKSB7XG4gICAgICB0YWdFbC5hZGRDbGFzcyhcImZsYXQtdGFnLWV4Y2x1ZGVkXCIpO1xuICAgIH1cbiAgICBcbiAgICB0YWdFbC5zZXRUZXh0KGAjJHt0YWd9ICgke2NvdW50fSlgKTtcbiAgICBcbiAgICB0YWdFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGNvbnN0IGlzTXVsdGlTZWxlY3QgPSBlLmN0cmxLZXkgfHwgZS5tZXRhS2V5O1xuICAgICAgY29uc3QgaXNFeGNsdWRlID0gZS5zaGlmdEtleSAmJiBpc011bHRpU2VsZWN0O1xuICAgICAgXG4gICAgICBpZiAoaXNFeGNsdWRlKSB7XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVkVGFncy5oYXModGFnKSkge1xuICAgICAgICAgIHRoaXMuZXhjbHVkZWRUYWdzLmRlbGV0ZSh0YWcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZXhjbHVkZWRUYWdzLmFkZCh0YWcpO1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUYWdzLmRlbGV0ZSh0YWcpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzTXVsdGlTZWxlY3QpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRUYWdzLmhhcyh0YWcpKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFRhZ3MuZGVsZXRlKHRhZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFRhZ3MuYWRkKHRhZyk7XG4gICAgICAgICAgdGhpcy5leGNsdWRlZFRhZ3MuZGVsZXRlKHRhZyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVGFncy5zaXplID09PSAxICYmIHRoaXMuc2VsZWN0ZWRUYWdzLmhhcyh0YWcpKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFRhZ3MuY2xlYXIoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkVGFncy5jbGVhcigpO1xuICAgICAgICAgIHRoaXMuZXhjbHVkZWRUYWdzLmNsZWFyKCk7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFRhZ3MuYWRkKHRhZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhpcy5yZW5kZXJUYWdzKCk7XG4gICAgICB0aGlzLnVwZGF0ZVNlYXJjaCgpO1xuICAgIH0pO1xuICB9XG4gICAgXG4gIGdldEZpbHRlcmVkVGFncygpOiBNYXA8c3RyaW5nLCBudW1iZXI+IHtcbiAgICAvLyBHZXQgdGFncyBiYXNlZCBvbiBjdXJyZW50IHNlbGVjdGlvblxuICAgIGxldCBmaWx0ZXJlZFRhZ3MgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuICAgIFxuICAgIC8vIElmIG5vIHRhZ3Mgc2VsZWN0ZWQsIHNob3cgYWxsIHRhZ3NcbiAgICBpZiAodGhpcy5zZWxlY3RlZFRhZ3Muc2l6ZSA9PT0gMCkge1xuICAgICAgZmlsdGVyZWRUYWdzID0gbmV3IE1hcCh0aGlzLmFsbFRhZ3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGaW5kIGZpbGVzIHRoYXQgY29udGFpbiBBTEwgc2VsZWN0ZWQgdGFnc1xuICAgICAgY29uc3Qgc2VsZWN0ZWRUYWdzQXJyYXkgPSBBcnJheS5mcm9tKHRoaXMuc2VsZWN0ZWRUYWdzKTtcbiAgICAgIGNvbnN0IG1hdGNoaW5nRmlsZXM6IHN0cmluZ1tdID0gW107XG4gICAgICBcbiAgICAgIHRoaXMudGFnc0J5RmlsZS5mb3JFYWNoKCh0YWdzLCBmaWxlUGF0aCkgPT4ge1xuICAgICAgICBpZiAoc2VsZWN0ZWRUYWdzQXJyYXkuZXZlcnkodGFnID0+IHRhZ3MuaGFzKHRhZykpKSB7XG4gICAgICAgICAgbWF0Y2hpbmdGaWxlcy5wdXNoKGZpbGVQYXRoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIEFkZCBhbGwgY28tb2NjdXJyaW5nIHRhZ3NcbiAgICAgIG1hdGNoaW5nRmlsZXMuZm9yRWFjaChmaWxlUGF0aCA9PiB7XG4gICAgICAgIGNvbnN0IGZpbGVUYWdzID0gdGhpcy50YWdzQnlGaWxlLmdldChmaWxlUGF0aCk7XG4gICAgICAgIGlmIChmaWxlVGFncykge1xuICAgICAgICAgIGZpbGVUYWdzLmZvckVhY2godGFnID0+IHtcbiAgICAgICAgICAgIGZpbHRlcmVkVGFncy5zZXQodGFnLCAoZmlsdGVyZWRUYWdzLmdldCh0YWcpIHx8IDApICsgMSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBFbnN1cmUgc2VsZWN0ZWQgdGFncyBhcmUgaW5jbHVkZWRcbiAgICAgIHNlbGVjdGVkVGFnc0FycmF5LmZvckVhY2godGFnID0+IHtcbiAgICAgICAgaWYgKCFmaWx0ZXJlZFRhZ3MuaGFzKHRhZykpIHtcbiAgICAgICAgICBmaWx0ZXJlZFRhZ3Muc2V0KHRhZywgdGhpcy5hbGxUYWdzLmdldCh0YWcpIHx8IDApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gRmlsdGVyIG91dCBzaW5nbGUtdXNlIHRhZ3MgaWYgb3B0aW9uIGlzIGVuYWJsZWRcbiAgICBpZiAodGhpcy5oaWRlU2luZ2xlVXNlVGFncykge1xuICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcbiAgICAgIGZpbHRlcmVkVGFncy5mb3JFYWNoKChjb3VudCwgdGFnKSA9PiB7XG4gICAgICAgIGlmIChjb3VudCA+IDEgfHwgdGhpcy5zZWxlY3RlZFRhZ3MuaGFzKHRhZykpIHtcbiAgICAgICAgICByZXN1bHQuc2V0KHRhZywgY291bnQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGZpbHRlcmVkVGFncyA9IHJlc3VsdDtcbiAgICB9XG4gICAgXG4gICAgLy8gRmlsdGVyIGJ5IHNlYXJjaCB0ZXh0IGJ1dCBrZWVwIHNlbGVjdGVkL2V4Y2x1ZGVkIHRhZ3MgdmlzaWJsZVxuICAgIGlmICh0aGlzLnRhZ1NlYXJjaFRleHQpIHtcbiAgICAgIGNvbnN0IHNlYXJjaFRleHQgPSB0aGlzLnRhZ1NlYXJjaFRleHQudG9Mb3dlckNhc2UoKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gICAgICBcbiAgICAgIGZpbHRlcmVkVGFncy5mb3JFYWNoKChjb3VudCwgdGFnKSA9PiB7XG4gICAgICAgIGlmICh0YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXh0KSB8fCBcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUYWdzLmhhcyh0YWcpIHx8IFxuICAgICAgICAgICAgdGhpcy5leGNsdWRlZFRhZ3MuaGFzKHRhZykpIHtcbiAgICAgICAgICByZXN1bHQuc2V0KHRhZywgY291bnQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZpbHRlcmVkVGFncztcbiAgfVxuICBcbiAgdXBkYXRlU2VhcmNoKCkge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkVGFncy5zaXplID09PSAwICYmIHRoaXMuZXhjbHVkZWRUYWdzLnNpemUgPT09IDApIHtcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXCJzZWFyY2hcIikuZm9yRWFjaChsZWFmID0+IHtcbiAgICAgICAgY29uc3Qgc2VhcmNoVmlldyA9IGxlYWYudmlldyBhcyBhbnk7XG4gICAgICAgIGlmIChzZWFyY2hWaWV3ICYmIHR5cGVvZiBzZWFyY2hWaWV3LmNsZWFyU2VhcmNoID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBzZWFyY2hWaWV3LmNsZWFyU2VhcmNoKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB0YWdRdWVyeSA9IFtcbiAgICAgIC4uLkFycmF5LmZyb20odGhpcy5zZWxlY3RlZFRhZ3MpLm1hcCh0YWcgPT4gYHRhZzojJHt0YWd9YCksXG4gICAgICAuLi5BcnJheS5mcm9tKHRoaXMuZXhjbHVkZWRUYWdzKS5tYXAodGFnID0+IGAtdGFnOiMke3RhZ31gKVxuICAgIF0uam9pbihcIiBcIik7XG4gICAgXG4gICAgbGV0IHNlYXJjaExlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFwic2VhcmNoXCIpWzBdO1xuICAgIFxuICAgIGlmICghc2VhcmNoTGVhZikge1xuICAgICAgY29uc3QgcmlnaHRMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG4gICAgICBpZiAocmlnaHRMZWFmKSB7XG4gICAgICAgIHNlYXJjaExlYWYgPSByaWdodExlYWY7XG4gICAgICAgIHNlYXJjaExlYWYuc2V0Vmlld1N0YXRlKHsgdHlwZTogXCJzZWFyY2hcIiB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKHNlYXJjaExlYWYpIHtcbiAgICAgIGNvbnN0IHNlYXJjaFZpZXcgPSBzZWFyY2hMZWFmLnZpZXcgYXMgYW55O1xuICAgICAgaWYgKHNlYXJjaFZpZXcgJiYgdHlwZW9mIHNlYXJjaFZpZXcuc2V0UXVlcnkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBzZWFyY2hWaWV3LnNldFF1ZXJ5KHRhZ1F1ZXJ5KTtcbiAgICAgICAgc2VhcmNoVmlldy5zZWFyY2goKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYoc2VhcmNoTGVhZik7XG4gICAgfVxuICB9XG4gIFxuICBnZXRGaWxlVGFncyhmaWxlOiBURmlsZSk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgIGlmICghY2FjaGUpIHJldHVybiBbXTtcbiAgICBcbiAgICBjb25zdCB0YWdzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgXG4gICAgaWYgKGNhY2hlLnRhZ3MpIHtcbiAgICAgIGNhY2hlLnRhZ3MuZm9yRWFjaCh0YWdPYmogPT4ge1xuICAgICAgICBjb25zdCB0YWcgPSB0YWdPYmoudGFnLnJlcGxhY2UoL14jLywgXCJcIik7XG4gICAgICAgIHRhZ3MuYWRkKHRhZyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGNhY2hlLmZyb250bWF0dGVyICYmIGNhY2hlLmZyb250bWF0dGVyLnRhZ3MpIHtcbiAgICAgIGNvbnN0IGZtVGFncyA9IGNhY2hlLmZyb250bWF0dGVyLnRhZ3M7XG4gICAgICBpZiAodHlwZW9mIGZtVGFncyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZm1UYWdzLnNwbGl0KC9bLFxcc10rLykuZmlsdGVyKEJvb2xlYW4pLmZvckVhY2godGFnID0+IHtcbiAgICAgICAgICB0YWdzLmFkZCh0YWcpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShmbVRhZ3MpKSB7XG4gICAgICAgIGZtVGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgICAgaWYgKHRhZykgdGFncy5hZGQoU3RyaW5nKHRhZykpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIEFycmF5LmZyb20odGFncyk7XG4gIH1cblxuICAvLyBNZXRob2RzIGZvciBob3RrZXkgZnVuY3Rpb25hbGl0eVxuICB0b2dnbGVTb3J0KCkge1xuICAgIHRoaXMuY3VycmVudFNvcnQgPSB0aGlzLmN1cnJlbnRTb3J0ID09PSBcImF6XCIgPyBcImNvdW50XCIgOiBcImF6XCI7XG4gICAgdGhpcy5yZW5kZXJUYWdzKCk7XG4gIH1cblxuICBjbGVhclRhZ1NlbGVjdGlvbnMoKSB7XG4gICAgdGhpcy5zZWxlY3RlZFRhZ3MuY2xlYXIoKTtcbiAgICB0aGlzLmV4Y2x1ZGVkVGFncy5jbGVhcigpO1xuICAgIHRoaXMucmVuZGVyVGFncygpO1xuICAgIHRoaXMudXBkYXRlU2VhcmNoKCk7XG4gIH1cblxuICB0b2dnbGVTaW5nbGVVc2VUYWdzKCkge1xuICAgIHRoaXMuaGlkZVNpbmdsZVVzZVRhZ3MgPSAhdGhpcy5oaWRlU2luZ2xlVXNlVGFncztcbiAgICB0aGlzLnJlbmRlclRhZ3MoKTtcbiAgfVxuXG4gIHRvZ2dsZUFscGhhYmV0TGV0dGVycygpIHtcbiAgICB0aGlzLnNob3dBbHBoYWJldExldHRlcnMgPSAhdGhpcy5zaG93QWxwaGFiZXRMZXR0ZXJzO1xuICAgIHRoaXMucmVuZGVyVGFncygpO1xuICB9XG5cbiAgY2xlYXJTZWFyY2hCb3goKSB7XG4gICAgY29uc3Qgc2VhcmNoQm94ID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcihcIi5mbGF0LXRhZy1zZWFyY2gtaW5wdXRcIikgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBpZiAoc2VhcmNoQm94KSB7XG4gICAgICBzZWFyY2hCb3gudmFsdWUgPSBcIlwiO1xuICAgICAgdGhpcy50YWdTZWFyY2hUZXh0ID0gXCJcIjtcbiAgICAgIHRoaXMucmVuZGVyVGFncygpO1xuICAgIH1cbiAgfVxufVxuXG4iLCAiZXhwb3J0IGNvbnN0IFZJRVdfVFlQRSA9IFwiZmxhdC10YWctdmlld1wiO1xuXG4iLCAiZXhwb3J0IGNvbnN0IGdldFN0eWxlcyA9ICgpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gYFxuICAgIC53b3Jrc3BhY2Utc3BsaXQubW9kLXJvb3QgLnZpZXctY29udGVudC5mbGF0LXRhZy12aWV3IHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xuICAgICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XG4gICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICBwYWRkaW5nOiAwO1xuICAgICAgbWFyZ2luOiAwO1xuICAgIH1cblxuICAgIC5mbGF0LXRhZy1jb250YWluZXIge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgIHBhZGRpbmc6IDA7XG4gICAgICBtYXJnaW46IDA7XG4gICAgfVxuXG4gICAgLmZsYXQtdGFnLXNvcnQtY29udGFpbmVyIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgIH1cbiAgICBcbiAgICAuZmxhdC10YWctYnV0dG9ucy1zZWN0aW9uIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBnYXA6IDhweDtcbiAgICB9XG4gICAgXG4gICAgLmZsYXQtdGFnLXNlYXJjaC1zZWN0aW9uIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgZ2FwOiA0cHg7XG4gICAgICBtYXJnaW4tbGVmdDogYXV0bztcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIHBhZGRpbmc6IDJweCA4cHg7XG4gICAgfVxuICAgIFxuICAgIC5mbGF0LXRhZy1zZWFyY2gtaW5wdXQge1xuICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICBib3JkZXI6IG5vbmU7XG4gICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgd2lkdGg6IDE1MHB4O1xuICAgICAgaGVpZ2h0OiAyNHB4O1xuICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICB9XG4gICAgXG4gICAgLmZsYXQtdGFnLXNlYXJjaC1pbnB1dDpmb2N1cyB7XG4gICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgYm94LXNoYWRvdzogbm9uZTtcbiAgICB9XG4gICAgXG4gICAgLmZsYXQtdGFnLXNlYXJjaC1pY29uIHtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgfVxuXG4gICAgLmZsYXQtdGFnLXNlYXJjaC1jbGVhci1idXR0b24ge1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgIGZvbnQtc2l6ZTogMC44ZW07XG4gICAgfVxuXG4gICAgLmZsYXQtdGFnLXNlYXJjaC1jbGVhci1idXR0b246aG92ZXIge1xuICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICB9XG5cbiAgICAuZmxhdC10YWctc29ydC1idXR0b24sIC5mbGF0LXRhZy1jbGVhci1idXR0b24ge1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgcGFkZGluZzogNHB4O1xuICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIH1cblxuICAgIC5mbGF0LXRhZy1zb3J0LWJ1dHRvbjpob3ZlciwgLmZsYXQtdGFnLWNsZWFyLWJ1dHRvbjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1ob3Zlcik7XG4gICAgfVxuXG4gICAgLmZsYXQtdGFnLWxpc3Qge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgIGFsaWduLWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG4gICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgZmxleDogMTtcbiAgICAgIGxpbmUtaGVpZ2h0OiAxLjVlbTtcbiAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgIH1cblxuICAgIC5mbGF0LXRhZyB7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBwYWRkaW5nOiAycHggNnB4O1xuICAgICAgbWFyZ2luOiAycHg7XG4gICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10YWctYmFja2dyb3VuZCk7XG4gICAgICBjb2xvcjogdmFyKC0tdGFnLWNvbG9yKTtcbiAgICB9XG5cbiAgICAuZmxhdC10YWc6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGFnLWJhY2tncm91bmQtaG92ZXIpO1xuICAgIH1cblxuICAgIC5mbGF0LXRhZy1zZWxlY3RlZCB7XG4gICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgIH1cblxuICAgIC5mbGF0LXRhZy1leGNsdWRlZCB7XG4gICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgIH1cbiAgICBcbiAgICAuZmxhdC10YWctbGV0dGVyIHtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgZm9udC1zaXplOiAxLjJlbTtcbiAgICAgIG1hcmdpbjogMnB4O1xuICAgICAgcGFkZGluZzogMnB4IDZweDtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICAgIH1cbiAgYDtcbn07XG5cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG1CQUFzQzs7O0FDQXRDLHNCQUF3RDs7O0FDQWpELElBQU0sWUFBWTs7O0FER2xCLElBQU0sY0FBTixjQUEwQix5QkFBUztBQUFBLEVBYXhDLFlBQVksTUFBcUI7QUFDL0IsVUFBTSxJQUFJO0FBVlosU0FBUSxlQUE0QixvQkFBSSxJQUFJO0FBQzVDLFNBQVEsZUFBNEIsb0JBQUksSUFBSTtBQUM1QyxTQUFRLFVBQStCLG9CQUFJLElBQUk7QUFDL0MsU0FBUSxjQUE4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O0FBQy9ELFlBQUk7QUFBTSxlQUFLLG1CQUFtQjtBQUFBLE1BQ3BDO0FBQUEsSUFDRixDQUFDO0FBRUQsU0FBSyxXQUFXO0FBQUEsTUFDZCxJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLE1BQU07QUE5Q3RCO0FBK0NRLGNBQU0sUUFBTyxVQUFLLElBQUksVUFBVSxnQkFBZ0IsU0FBUyxFQUFFLENBQUMsTUFBL0MsbUJBQWtEO0FBQy9ELFlBQUk7QUFBTSxlQUFLLG9CQUFvQjtBQUFBLE1BQ3JDO0FBQUEsSUFDRixDQUFDO0FBRUQsU0FBSyxXQUFXO0FBQUEsTUFDZCxJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLE1BQU07QUF2RHRCO0FBd0RRLGNBQU0sUUFBTyxVQUFLLElBQUksVUFBVSxnQkFBZ0IsU0FBUyxFQUFFLENBQUMsTUFBL0MsbUJBQWtEO0FBQy9ELFlBQUk7QUFBTSxlQUFLLHNCQUFzQjtBQUFBLE1BQ3ZDO0FBQUEsSUFDRixDQUFDO0FBRUQsU0FBSyxXQUFXO0FBQUEsTUFDZCxJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLE1BQU07QUFoRXRCO0FBaUVRLGNBQU0sUUFBTyxVQUFLLElBQUksVUFBVSxnQkFBZ0IsU0FBUyxFQUFFLENBQUMsTUFBL0MsbUJBQWtEO0FBQy9ELFlBQUk7QUFBTSxlQUFLLGVBQWU7QUFBQSxNQUNoQztBQUFBLElBQ0YsQ0FBQztBQUVELFNBQUssU0FBUztBQUFBLEVBQ2hCO0FBQUEsRUFFQSxNQUFNLFdBQVc7QUFDZixTQUFLLElBQUksVUFBVSxtQkFBbUIsU0FBUztBQUFBLEVBQ2pEO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDbkIsVUFBTSxFQUFFLFVBQVUsSUFBSSxLQUFLO0FBRTNCLFFBQUksT0FBTyxVQUFVLGdCQUFnQixTQUFTLEVBQUUsQ0FBQztBQUVqRCxRQUFJLENBQUMsTUFBTTtBQUNULFlBQU0sWUFBWSxVQUFVLGFBQWEsS0FBSztBQUM5QyxVQUFJLFdBQVc7QUFDYixlQUFPO0FBQ1AsY0FBTSxLQUFLLGFBQWEsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUFBLE1BQzdDO0FBQUEsSUFDRjtBQUVBLFFBQUksTUFBTTtBQUNSLGdCQUFVLFdBQVcsSUFBSTtBQUFBLElBQzNCO0FBQUEsRUFDRjtBQUFBLEVBRUEsV0FBVztBQUNULFVBQU0sVUFBVSxTQUFTLGNBQWMsT0FBTztBQUM5QyxZQUFRLFlBQVksVUFBVTtBQUM5QixhQUFTLEtBQUssWUFBWSxPQUFPO0FBQUEsRUFDbkM7QUFDRjsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIl0KfQo=
