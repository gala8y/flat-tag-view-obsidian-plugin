/* 
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD 
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => FlatTagPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// flatTagView.ts
var import_obsidian = require("obsidian");

// constants.ts
var VIEW_TYPE = "flat-tag-view";

// flatTagView.ts
var FlatTagView = class extends import_obsidian.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.selectedTags = /* @__PURE__ */ new Set();
    this.excludedTags = /* @__PURE__ */ new Set();
    this.allTags = /* @__PURE__ */ new Map();
    this.currentSort = "az";
    this.tagsByFile = /* @__PURE__ */ new Map();
    this.hideSingleUseTags = false;
    this.tagSearchText = "";
    // UNIFIED MODE STATE FOR TASK AND LINE MODES
    this.searchMode = "note";
    this.plugin = plugin;
    this.containerEl.addClass("flat-tag-view");
  }
  getViewType() {
    return VIEW_TYPE;
  }
  getDisplayText() {
    return "Flat Tags";
  }
  getIcon() {
    return "tag";
  }
  async onOpen() {
    this.container = this.contentEl.createDiv({ cls: "flat-tag-container" });
    this.sortContainer = this.container.createDiv({ cls: "flat-tag-sort-container" });
    const buttonSection = this.sortContainer.createDiv({ cls: "flat-tag-buttons-section" });
    const sortByAZ = buttonSection.createDiv({ cls: "flat-tag-sort-button", title: "Sort A-Z" });
    (0, import_obsidian.setIcon)(sortByAZ, "lucide-sort-asc");
    sortByAZ.addEventListener("click", () => {
      this.currentSort = "az";
      this.renderTags();
    });
    const sortByCount = buttonSection.createDiv({ cls: "flat-tag-sort-button", title: "Sort by usage" });
    (0, import_obsidian.setIcon)(sortByCount, "lucide-bar-chart-2");
    sortByCount.addEventListener("click", () => {
      this.currentSort = "count";
      this.renderTags();
    });
    const clearButton = buttonSection.createDiv({ cls: "flat-tag-clear-button", title: "Clear tag selections" });
    (0, import_obsidian.setIcon)(clearButton, "x");
    clearButton.addEventListener("click", () => {
      this.clearTagSelections();
    });
    const toggleSingleUseButton = buttonSection.createDiv({
      cls: "flat-tag-sort-button",
      title: "Toggle single-use tags"
    });
    (0, import_obsidian.setIcon)(toggleSingleUseButton, "eye-off");
    toggleSingleUseButton.addEventListener("click", () => {
      this.toggleSingleUseTags();
      (0, import_obsidian.setIcon)(toggleSingleUseButton, this.hideSingleUseTags ? "eye" : "eye-off");
    });
    const scopeBtn = buttonSection.createDiv({
      cls: "flat-tag-mode-button",
      text: "NOTE",
      title: "Click to cycle: Note -> Line"
    });
    const taskBtn = buttonSection.createDiv({
      cls: "flat-tag-mode-button",
      text: "TASK-ALL",
      title: "Click to cycle: All -> Todo -> Done"
    });
    const updateModeUI = () => {
      scopeBtn.removeClass("is-active");
      taskBtn.removeClass("is-active");
      if (this.searchMode === "note") {
        scopeBtn.setText("NOTE");
        scopeBtn.addClass("is-active");
      } else if (this.searchMode === "line") {
        scopeBtn.setText("LINE");
        scopeBtn.addClass("is-active");
      } else if (this.searchMode === "task") {
        taskBtn.setText("TASK-ALL");
        taskBtn.addClass("is-active");
      } else if (this.searchMode === "task-todo") {
        taskBtn.setText("TASK-TODO");
        taskBtn.addClass("is-active");
      } else if (this.searchMode === "task-done") {
        taskBtn.setText("TASK-DONE");
        taskBtn.addClass("is-active");
      }
      if (["note", "line"].includes(this.searchMode)) {
        if (!["TASK-ALL", "TASK-TODO", "TASK-DONE"].includes(taskBtn.innerText)) {
          taskBtn.setText("TASK-ALL");
        }
      } else {
        if (!["NOTE", "LINE"].includes(scopeBtn.innerText)) {
          scopeBtn.setText("NOTE");
        }
      }
      this.updateSearch();
      if (this.tagContainer) {
        this.renderTags();
      }
    };
    scopeBtn.addEventListener("click", () => {
      if (["note", "line"].includes(this.searchMode)) {
        this.searchMode = this.searchMode === "note" ? "line" : "note";
      } else {
        this.searchMode = scopeBtn.innerText === "LINE" ? "line" : "note";
      }
      updateModeUI();
    });
    taskBtn.addEventListener("click", () => {
      if (["task", "task-todo", "task-done"].includes(this.searchMode)) {
        if (this.searchMode === "task")
          this.searchMode = "task-todo";
        else if (this.searchMode === "task-todo")
          this.searchMode = "task-done";
        else
          this.searchMode = "task";
      } else {
        if (taskBtn.innerText === "TASK-TODO")
          this.searchMode = "task-todo";
        else if (taskBtn.innerText === "TASK-DONE")
          this.searchMode = "task-done";
        else
          this.searchMode = "task";
      }
      updateModeUI();
    });
    updateModeUI();
    const searchSection = this.sortContainer.createDiv({ cls: "flat-tag-search-section" });
    const searchBox = searchSection.createEl("input", {
      cls: "flat-tag-search-input",
      attr: {
        type: "text",
        placeholder: "Search tags..."
      }
    });
    const clearSearchButton = searchSection.createDiv({
      cls: "flat-tag-search-clear-button",
      title: "Clear search"
    });
    (0, import_obsidian.setIcon)(clearSearchButton, "square-x");
    clearSearchButton.addEventListener("click", () => {
      this.clearSearchBox();
    });
    searchBox.addEventListener("input", (e) => {
      const target = e.target;
      this.tagSearchText = target.value;
      this.renderTags();
    });
    this.tagContainer = this.container.createDiv({ cls: "flat-tag-list" });
    await this.loadTags();
    this.registerEvent(
      this.app.metadataCache.on("changed", (file) => {
        this.updateFileTags(file);
      })
    );
    this.registerEvent(
      this.app.vault.on("delete", (file) => {
        if (file instanceof import_obsidian.TFile && file.extension === "md") {
          this.removeFileTags(file.path);
          this.renderTags();
        }
      })
    );
    this.registerEvent(
      this.app.vault.on("rename", (file, oldPath) => {
        if (file instanceof import_obsidian.TFile && file.extension === "md") {
          const tags = this.tagsByFile.get(oldPath);
          if (tags) {
            this.tagsByFile.set(file.path, tags);
            this.tagsByFile.delete(oldPath);
          }
        }
      })
    );
  }
  async loadTags() {
    this.allTags.clear();
    this.tagsByFile.clear();
    const files = this.app.vault.getMarkdownFiles();
    for (const file of files) {
      const fileTags = this.getFileTags(file);
      this.tagsByFile.set(file.path, new Set(fileTags));
      fileTags.forEach((tag) => {
        this.allTags.set(tag, (this.allTags.get(tag) || 0) + 1);
      });
    }
    this.renderTags();
  }
  updateFileTags(file) {
    const oldTags = this.tagsByFile.get(file.path) || /* @__PURE__ */ new Set();
    const newTagsArr = this.getFileTags(file);
    const newTags = new Set(newTagsArr);
    let hasChanges = false;
    oldTags.forEach((tag) => {
      if (!newTags.has(tag)) {
        hasChanges = true;
        const count = (this.allTags.get(tag) || 0) - 1;
        if (count <= 0)
          this.allTags.delete(tag);
        else
          this.allTags.set(tag, count);
      }
    });
    newTags.forEach((tag) => {
      if (!oldTags.has(tag)) {
        hasChanges = true;
        this.allTags.set(tag, (this.allTags.get(tag) || 0) + 1);
      }
    });
    if (hasChanges) {
      this.tagsByFile.set(file.path, newTags);
      this.renderTags();
    }
  }
  removeFileTags(filePath) {
    const oldTags = this.tagsByFile.get(filePath);
    if (!oldTags)
      return;
    oldTags.forEach((tag) => {
      const count = (this.allTags.get(tag) || 0) - 1;
      if (count <= 0)
        this.allTags.delete(tag);
      else
        this.allTags.set(tag, count);
    });
    this.tagsByFile.delete(filePath);
  }
  async renderTags() {
    this.tagContainer.empty();
    const filteredTags = await this.getFilteredTagsAsync();
    let sortedTags;
    if (this.currentSort === "az") {
      sortedTags = Array.from(filteredTags.entries()).sort((a, b) => a[0].localeCompare(b[0], "pl"));
    } else {
      sortedTags = Array.from(filteredTags.entries()).sort((a, b) => b[1] - a[1]);
    }
    if (this.currentSort === "az") {
      const tagsByLetter = /* @__PURE__ */ new Map();
      tagsByLetter.set("other", []);
      for (let charCode = 65; charCode <= 90; charCode++) {
        tagsByLetter.set(String.fromCharCode(charCode), []);
      }
      const polishDiacritics = ["\u0104", "\u0106", "\u0118", "\u0141", "\u0143", "\xD3", "\u015A", "\u0179", "\u017B"];
      polishDiacritics.forEach((letter) => tagsByLetter.set(letter, []));
      sortedTags.forEach((tagItem) => {
        var _a, _b, _c;
        const [tag] = tagItem;
        const firstChar = tag.charAt(0).toUpperCase();
        if (firstChar.match(/[A-Z]/)) {
          (_a = tagsByLetter.get(firstChar)) == null ? void 0 : _a.push(tagItem);
        } else if (polishDiacritics.includes(firstChar)) {
          (_b = tagsByLetter.get(firstChar)) == null ? void 0 : _b.push(tagItem);
        } else {
          (_c = tagsByLetter.get("other")) == null ? void 0 : _c.push(tagItem);
        }
      });
      tagsByLetter.forEach((letterTags, letter) => {
        if (letterTags.length > 0) {
          if (letter !== "other") {
            const letterEl = this.tagContainer.createSpan({ cls: "flat-tag-letter" });
            letterEl.setText(letter);
          }
          letterTags.forEach(([tag, count]) => {
            this.createTagElement(tag, count);
          });
        }
      });
    } else {
      sortedTags.forEach(([tag, count]) => {
        this.createTagElement(tag, count);
      });
    }
  }
  createTagElement(tag, count) {
    const tagEl = this.tagContainer.createSpan({ cls: "flat-tag" });
    if (this.selectedTags.has(tag)) {
      tagEl.addClass("flat-tag-selected");
    } else if (this.excludedTags.has(tag)) {
      tagEl.addClass("flat-tag-excluded");
    }
    tagEl.setText(`#${tag} (${count})`);
    tagEl.addEventListener("click", (e) => {
      const isMultiSelect = e.ctrlKey || e.metaKey;
      const isExclude = e.shiftKey;
      if (isExclude) {
        if (this.excludedTags.has(tag)) {
          this.excludedTags.delete(tag);
        } else {
          this.excludedTags.add(tag);
          this.selectedTags.delete(tag);
        }
      } else if (isMultiSelect) {
        if (this.selectedTags.has(tag)) {
          this.selectedTags.delete(tag);
        } else {
          this.selectedTags.add(tag);
          this.excludedTags.delete(tag);
        }
      } else {
        if (this.selectedTags.size === 1 && this.selectedTags.has(tag)) {
          this.selectedTags.clear();
        } else {
          this.selectedTags.clear();
          this.excludedTags.clear();
          this.selectedTags.add(tag);
        }
      }
      this.renderTags();
      this.updateSearch();
    });
  }
  async getFilteredTagsAsync() {
    let filteredTags = /* @__PURE__ */ new Map();
    if (this.selectedTags.size === 0) {
      filteredTags = new Map(this.allTags);
    } else {
      const selectedTagsArray = Array.from(this.selectedTags);
      const matchingFiles = [];
      this.tagsByFile.forEach((tags, filePath) => {
        if (selectedTagsArray.every((tag) => tags.has(tag))) {
          matchingFiles.push(filePath);
        }
      });
      if (this.searchMode === "note") {
        matchingFiles.forEach((filePath) => {
          const fileTags = this.tagsByFile.get(filePath);
          if (fileTags) {
            fileTags.forEach((tag) => {
              filteredTags.set(tag, (filteredTags.get(tag) || 0) + 1);
            });
          }
        });
      } else {
        for (const filePath of matchingFiles) {
          const file = this.app.vault.getAbstractFileByPath(filePath);
          if (file instanceof import_obsidian.TFile) {
            const content = await this.app.vault.cachedRead(file);
            const lines = content.split("\n");
            for (const line of lines) {
              const lowerLine = line.toLowerCase();
              if (this.searchMode === "task" && !lowerLine.includes("- ["))
                continue;
              if (this.searchMode === "task-todo" && !lowerLine.includes("- [ ]"))
                continue;
              if (this.searchMode === "task-done" && !lowerLine.includes("- [x]"))
                continue;
              const lineTags = /* @__PURE__ */ new Set();
              const tagRegex = /#([^\s#]+)/g;
              let match;
              while ((match = tagRegex.exec(line)) !== null) {
                lineTags.add(match[1]);
              }
              if (selectedTagsArray.every((selectedTag) => {
                return Array.from(lineTags).some((t) => t.toLowerCase() === selectedTag.toLowerCase());
              })) {
                lineTags.forEach((tag) => {
                  filteredTags.set(tag, (filteredTags.get(tag) || 0) + 1);
                });
              }
            }
          }
        }
      }
      selectedTagsArray.forEach((tag) => {
        if (!filteredTags.has(tag)) {
          filteredTags.set(tag, this.allTags.get(tag) || 0);
        }
      });
    }
    if (this.hideSingleUseTags) {
      const result = /* @__PURE__ */ new Map();
      filteredTags.forEach((count, tag) => {
        if (count > 1 || this.selectedTags.has(tag)) {
          result.set(tag, count);
        }
      });
      filteredTags = result;
    }
    if (this.tagSearchText) {
      const searchText = this.tagSearchText.toLowerCase();
      const result = /* @__PURE__ */ new Map();
      filteredTags.forEach((count, tag) => {
        if (tag.toLowerCase().includes(searchText) || this.selectedTags.has(tag) || this.excludedTags.has(tag)) {
          result.set(tag, count);
        }
      });
      return result;
    }
    return filteredTags;
  }
  updateSearch() {
    let searchLeaf = this.app.workspace.getLeavesOfType("search")[0];
    if (!searchLeaf) {
      const rightLeaf = this.app.workspace.getRightLeaf(false);
      if (rightLeaf) {
        searchLeaf = rightLeaf;
        searchLeaf.setViewState({ type: "search" });
      }
    }
    if (this.selectedTags.size === 0 && this.excludedTags.size === 0) {
      if (searchLeaf) {
        const searchView = searchLeaf.view;
        if (searchView && typeof searchView.setQuery === "function") {
          searchView.setQuery("");
        }
      }
      return;
    }
    let tagQuery = "";
    const selected = Array.from(this.selectedTags);
    const excluded = Array.from(this.excludedTags);
    if (this.searchMode === "note") {
      tagQuery = [
        ...selected.map((tag) => `tag:#${tag}`),
        ...excluded.map((tag) => `-tag:#${tag}`)
      ].join(" ");
    } else {
      let prefix = "line:(";
      if (this.searchMode === "task")
        prefix = "task:(";
      else if (this.searchMode === "task-todo")
        prefix = "task-todo:(";
      else if (this.searchMode === "task-done")
        prefix = "task-done:(";
      const blockContents = [
        ...selected.map((tag) => `#${tag}`),
        ...excluded.map((tag) => `-#${tag}`)
      ].join(" ");
      tagQuery = `${prefix} ${blockContents} )`;
    }
    if (searchLeaf) {
      const searchView = searchLeaf.view;
      if (searchView && typeof searchView.setQuery === "function") {
        searchView.setQuery(tagQuery);
      }
      this.app.workspace.revealLeaf(searchLeaf);
    }
  }
  getFileTags(file) {
    const cache = this.app.metadataCache.getFileCache(file);
    if (!cache)
      return [];
    const tags = /* @__PURE__ */ new Set();
    if (cache.tags) {
      cache.tags.forEach((tagObj) => {
        const tag = tagObj.tag.replace(/^#/, "");
        tags.add(tag);
      });
    }
    if (cache.frontmatter && cache.frontmatter.tags) {
      const fmTags = cache.frontmatter.tags;
      if (typeof fmTags === "string") {
        fmTags.split(/[\s,]+/).filter(Boolean).forEach((tag) => {
          tags.add(tag);
        });
      } else if (Array.isArray(fmTags)) {
        fmTags.forEach((tag) => {
          if (tag)
            tags.add(String(tag));
        });
      }
    }
    return Array.from(tags);
  }
  toggleSort() {
    this.currentSort = this.currentSort === "az" ? "count" : "az";
    this.renderTags();
  }
  clearTagSelections() {
    this.selectedTags.clear();
    this.excludedTags.clear();
    this.renderTags();
    this.updateSearch();
  }
  toggleSingleUseTags() {
    this.hideSingleUseTags = !this.hideSingleUseTags;
    this.renderTags();
  }
  clearSearchBox() {
    const searchBox = this.contentEl.querySelector(".flat-tag-search-input");
    if (searchBox) {
      searchBox.value = "";
      this.tagSearchText = "";
      this.renderTags();
    }
  }
};

// styles.ts
var getStyles = () => {
  return `
    .workspace-split.mod-root .view-content.flat-tag-view {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: stretch;
      height: 100%;
      padding: 0;
      margin: 0;
    }

    .flat-tag-container {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: flex-start;
      width: 100%;
      height: 100%;
      box-sizing: border-box;
      padding: 0;
      margin: 0;
    }

    .flat-tag-sort-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-shrink: 0;
      padding: 8px;
      background-color: var(--background-primary);
      border-bottom: 1px solid var(--background-modifier-border);
      width: 100%;
      flex-wrap: wrap; /* Allows searching to wrap nicely on narrow panes */
      gap: 8px;
    }
    
    .flat-tag-buttons-section {
      display: flex;
      gap: 6px;
      align-items: center;
      flex-wrap: wrap;
    }
    
    /* Base styling for our Note/Line and Task toggle buttons */
    .flat-tag-mode-button {
      cursor: pointer;
      padding: 4px 10px;
      font-size: 0.8em;
      font-weight: 500;
      border-radius: var(--radius-s);
      color: var(--text-muted);
      background-color: var(--background-modifier-form-field);
      border: 1px solid var(--background-modifier-border);
      transition: all 0.15s ease-in-out;
      user-select: none;
      display: flex;
      align-items: center;
      justify-content: center;
      min-width: 65px;
    }

    /* Hover effect for inactive state */
    .flat-tag-mode-button:hover {
      color: var(--text-normal);
      background-color: var(--background-modifier-hover);
      border-color: var(--background-modifier-border-hover);
    }

    /* Highly visible active (pressed) state */
    .flat-tag-mode-button.is-active {
      background-color: var(--interactive-accent);
      color: var(--text-on-accent);
      border-color: var(--interactive-accent);
      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
    }

    /* Hover effect when active */
    .flat-tag-mode-button.is-active:hover {
      background-color: var(--interactive-accent-hover);
      border-color: var(--interactive-accent-hover);
    }
    
    .flat-tag-search-section {
      display: flex;
      align-items: center;
      gap: 4px;
      margin-left: auto;
      background-color: var(--background-secondary);
      border-radius: 4px;
      padding: 2px 8px;
      flex-grow: 1;
      max-width: 200px;
    }
    
    .flat-tag-search-input {
      background: transparent;
      border: none;
      color: var(--text-normal);
      width: 100%;
      height: 24px;
      font-size: 0.9em;
    }
    
    .flat-tag-search-input:focus {
      outline: none;
      box-shadow: none;
    }
    
    .flat-tag-search-icon {
      color: var(--text-muted);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .flat-tag-search-clear-button {
      cursor: pointer;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8em;
    }

    .flat-tag-search-clear-button:hover {
      color: var(--text-normal);
    }

    .flat-tag-sort-button, .flat-tag-clear-button {
      cursor: pointer;
      padding: 4px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .flat-tag-sort-button:hover, .flat-tag-clear-button:hover {
      background-color: var(--interactive-hover);
    }

    .flat-tag-list {
      display: flex;
      flex-wrap: wrap;
      align-content: flex-start;
      overflow-y: auto;
      flex: 1;
      line-height: 1.5em;
      padding: 8px;
      width: 100%;
    }

    .flat-tag {
      display: inline-block;
      padding: 2px 6px;
      margin: 2px;
      border-radius: 4px;
      cursor: pointer;
      background-color: var(--tag-background);
      color: var(--tag-color);
      transition: background-color 0.1s;
    }

    .flat-tag:hover {
      background-color: var(--tag-background-hover);
    }

    .flat-tag-selected {
      font-weight: bold;
      background-color: var(--interactive-accent);
      color: var(--text-on-accent);
    }

    .flat-tag-excluded {
      font-weight: bold;
      background-color: var(--color-red);
      color: var(--text-on-accent);
    }
    
    .flat-tag-letter {
      display: inline-flex;
      font-weight: bold;
      font-size: 1.2em;
      margin: 2px;
      padding: 2px 6px;
      border-radius: 4px;
      background-color: var(--background-secondary);
      color: var(--text-normal);
      align-items: center;
      justify-content: center;
      min-width: 24px;
    }
        .flat-tag-pinned-section {
      width: 100%;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      background-color: var(--background-secondary-alt);
      padding: 4px;
      border-radius: var(--radius-s);
      margin-bottom: 4px;
    }

    .flat-tag-separator {
      width: 100%;
      height: 1px;
      background-color: var(--background-modifier-border);
      margin: 4px 0 8px 0;
    }
    
    .flat-tag-pinned {
      border: 1px solid var(--interactive-accent);
    }

  `;
};

// settings.ts
var import_obsidian2 = require("obsidian");
var DEFAULT_SETTINGS = {
  pinnedTags: [],
  frequencyCutoff: 0
  // 0 means show all tags
};
var FlatTagSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian2.Setting(containerEl).setName("Frequency Cutoff").setDesc("Hide tags that appear fewer times than this number in the vault. 0 means show all tags.").addText(
      (text) => text.setPlaceholder("0").setValue(this.plugin.settings.frequencyCutoff.toString()).onChange(async (value) => {
        const parsed = parseInt(value, 10);
        if (!isNaN(parsed) && parsed >= 0) {
          this.plugin.settings.frequencyCutoff = parsed;
          await this.plugin.saveSettings();
        }
      })
    );
    new import_obsidian2.Setting(containerEl).setName("Clear Pinned Tags").setDesc("Removes all pinned tags from the top of the flat tag list.").addButton(
      (btn) => btn.setButtonText("Clear Pinned").onClick(async () => {
        this.plugin.settings.pinnedTags = [];
        await this.plugin.saveSettings();
      })
    );
  }
};

// main.ts
var FlatTagPlugin = class extends import_obsidian3.Plugin {
  async onload() {
    await this.loadSettings();
    this.registerView(
      VIEW_TYPE,
      // Pass 'this' so the view can access settings and save data
      (leaf) => new FlatTagView(leaf, this)
    );
    this.addRibbonIcon("tag", "Open Flat Tags", () => {
      this.activateView();
    });
    this.addSettingTab(new FlatTagSettingTab(this.app, this));
    this.addCommand({
      id: "open-flat-tags",
      name: "Open Flat Tags",
      callback: () => {
        this.activateView();
      }
    });
    this.addCommand({
      id: "toggle-flat-tag-sort",
      name: "Toggle Flat Tag Sort (A-Z/Usage)",
      callback: () => {
        var _a;
        const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0]) == null ? void 0 : _a.view;
        if (view)
          view.toggleSort();
      }
    });
    this.addCommand({
      id: "clear-flat-tag-selections",
      name: "Clear Flat Tag Selections",
      callback: () => {
        var _a;
        const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0]) == null ? void 0 : _a.view;
        if (view)
          view.clearTagSelections();
      }
    });
    this.addCommand({
      id: "toggle-flat-tag-single-use",
      name: "Toggle Flat Tag Single Use",
      callback: () => {
        var _a;
        const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0]) == null ? void 0 : _a.view;
        if (view)
          view.toggleSingleUseTags();
      }
    });
    this.addCommand({
      id: "toggle-flat-tag-alphabet",
      name: "Toggle Flat Tag Alphabet Letters",
      callback: () => {
        var _a;
        const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0]) == null ? void 0 : _a.view;
        if (view)
          view.toggleAlphabetLetters();
      }
    });
    this.addCommand({
      id: "clear-flat-tag-search",
      name: "Clear Flat Tag Search Box",
      callback: () => {
        var _a;
        const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE)[0]) == null ? void 0 : _a.view;
        if (view)
          view.clearSearchBox();
      }
    });
    this.addStyle();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.app.workspace.trigger("flat-tag-view:settings-updated");
  }
  async onunload() {
    this.app.workspace.detachLeavesOfType(VIEW_TYPE);
  }
  async activateView() {
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType(VIEW_TYPE)[0];
    if (!leaf) {
      const rightLeaf = workspace.getRightLeaf(false);
      if (rightLeaf) {
        leaf = rightLeaf;
        await leaf.setViewState({ type: VIEW_TYPE });
      }
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  addStyle() {
    const styleEl = document.createElement("style");
    styleEl.innerHTML = getStyles();
    document.head.appendChild(styleEl);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJmbGF0VGFnVmlldy50cyIsICJjb25zdGFudHMudHMiLCAic3R5bGVzLnRzIiwgInNldHRpbmdzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4sIFdvcmtzcGFjZUxlYWYgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEZsYXRUYWdWaWV3IH0gZnJvbSBcIi4vZmxhdFRhZ1ZpZXdcIjtcbmltcG9ydCB7IFZJRVdfVFlQRSB9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZ2V0U3R5bGVzIH0gZnJvbSBcIi4vc3R5bGVzXCI7XG5pbXBvcnQgeyBGbGF0VGFnUGx1Z2luU2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MsIEZsYXRUYWdTZXR0aW5nVGFiIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmxhdFRhZ1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHNldHRpbmdzOiBGbGF0VGFnUGx1Z2luU2V0dGluZ3M7XG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFZJRVdfVFlQRSxcbiAgICAgIC8vIFBhc3MgJ3RoaXMnIHNvIHRoZSB2aWV3IGNhbiBhY2Nlc3Mgc2V0dGluZ3MgYW5kIHNhdmUgZGF0YVxuICAgICAgKGxlYWY6IFdvcmtzcGFjZUxlYWYpID0+IG5ldyBGbGF0VGFnVmlldyhsZWFmLCB0aGlzKVxuICAgICk7XG5cbiAgICB0aGlzLmFkZFJpYmJvbkljb24oXCJ0YWdcIiwgXCJPcGVuIEZsYXQgVGFnc1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmFjdGl2YXRlVmlldygpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBGbGF0VGFnU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiBcIm9wZW4tZmxhdC10YWdzXCIsXG4gICAgICBuYW1lOiBcIk9wZW4gRmxhdCBUYWdzXCIsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICB0aGlzLmFjdGl2YXRlVmlldygpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIEFkZCBjb21tYW5kcyBmb3IgaG90a2V5c1xuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogXCJ0b2dnbGUtZmxhdC10YWctc29ydFwiLFxuICAgICAgbmFtZTogXCJUb2dnbGUgRmxhdCBUYWcgU29ydCAoQS1aL1VzYWdlKVwiLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgY29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFKVswXT8udmlldyBhcyBGbGF0VGFnVmlldztcbiAgICAgICAgaWYgKHZpZXcpIHZpZXcudG9nZ2xlU29ydCgpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogXCJjbGVhci1mbGF0LXRhZy1zZWxlY3Rpb25zXCIsXG4gICAgICBuYW1lOiBcIkNsZWFyIEZsYXQgVGFnIFNlbGVjdGlvbnNcIixcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRSlbMF0/LnZpZXcgYXMgRmxhdFRhZ1ZpZXc7XG4gICAgICAgIGlmICh2aWV3KSB2aWV3LmNsZWFyVGFnU2VsZWN0aW9ucygpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogXCJ0b2dnbGUtZmxhdC10YWctc2luZ2xlLXVzZVwiLFxuICAgICAgbmFtZTogXCJUb2dnbGUgRmxhdCBUYWcgU2luZ2xlIFVzZVwiLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgY29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFKVswXT8udmlldyBhcyBGbGF0VGFnVmlldztcbiAgICAgICAgaWYgKHZpZXcpIHZpZXcudG9nZ2xlU2luZ2xlVXNlVGFncygpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogXCJ0b2dnbGUtZmxhdC10YWctYWxwaGFiZXRcIixcbiAgICAgIG5hbWU6IFwiVG9nZ2xlIEZsYXQgVGFnIEFscGhhYmV0IExldHRlcnNcIixcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRSlbMF0/LnZpZXcgYXMgRmxhdFRhZ1ZpZXc7XG4gICAgICAgIGlmICh2aWV3KSB2aWV3LnRvZ2dsZUFscGhhYmV0TGV0dGVycygpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogXCJjbGVhci1mbGF0LXRhZy1zZWFyY2hcIixcbiAgICAgIG5hbWU6IFwiQ2xlYXIgRmxhdCBUYWcgU2VhcmNoIEJveFwiLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgY29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFKVswXT8udmlldyBhcyBGbGF0VGFnVmlldztcbiAgICAgICAgaWYgKHZpZXcpIHZpZXcuY2xlYXJTZWFyY2hCb3goKTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZFN0eWxlKCk7XG4gIH1cblxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gIH1cblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgICAvLyBOb3RpZnkgdGhlIHZpZXcgdGhhdCBzZXR0aW5ncyBoYXZlIGNoYW5nZWQgc28gaXQgY2FuIHJlLXJlbmRlclxuICAgIHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKFwiZmxhdC10YWctdmlldzpzZXR0aW5ncy11cGRhdGVkXCIpO1xuICB9XG5cbiAgYXN5bmMgb251bmxvYWQoKSB7XG4gICAgdGhpcy5hcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShWSUVXX1RZUEUpO1xuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVWaWV3KCkge1xuICAgIGNvbnN0IHsgd29ya3NwYWNlIH0gPSB0aGlzLmFwcDtcbiAgICBcbiAgICBsZXQgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFKVswXTtcbiAgICBcbiAgICBpZiAoIWxlYWYpIHtcbiAgICAgIGNvbnN0IHJpZ2h0TGVhZiA9IHdvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xuICAgICAgaWYgKHJpZ2h0TGVhZikge1xuICAgICAgICBsZWFmID0gcmlnaHRMZWFmO1xuICAgICAgICBhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7IHR5cGU6IFZJRVdfVFlQRSB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKGxlYWYpIHtcbiAgICAgIHdvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuICAgIH1cbiAgfVxuXG4gIGFkZFN0eWxlKCkge1xuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgc3R5bGVFbC5pbm5lckhUTUwgPSBnZXRTdHlsZXMoKTtcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGaWxlLCBzZXRJY29uIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBWSUVXX1RZUEUgfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcbmltcG9ydCBGbGF0VGFnUGx1Z2luIGZyb20gXCIuL21haW5cIjtcblxuZXhwb3J0IGNsYXNzIEZsYXRUYWdWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwdWJsaWMgcGx1Z2luOiBGbGF0VGFnUGx1Z2luO1xuICBwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgdGFnQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBzb3J0Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgXG4gIHByaXZhdGUgc2VsZWN0ZWRUYWdzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcbiAgcHJpdmF0ZSBleGNsdWRlZFRhZ3M6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIGFsbFRhZ3M6IE1hcDxzdHJpbmcsIG51bWJlcj4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgY3VycmVudFNvcnQ6IFwiYXpcIiB8IFwiY291bnRcIiA9IFwiYXpcIjtcbiAgcHJpdmF0ZSB0YWdzQnlGaWxlOiBNYXA8c3RyaW5nLCBTZXQ8c3RyaW5nPj4gPSBuZXcgTWFwKCk7XG4gIFxuICBwcml2YXRlIGhpZGVTaW5nbGVVc2VUYWdzOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgdGFnU2VhcmNoVGV4dDogc3RyaW5nID0gXCJcIjtcbiAgXG4gIC8vIFVOSUZJRUQgTU9ERSBTVEFURSBGT1IgVEFTSyBBTkQgTElORSBNT0RFU1xuICBwcml2YXRlIHNlYXJjaE1vZGU6IFwibm90ZVwiIHwgXCJsaW5lXCIgfCBcInRhc2tcIiB8IFwidGFzay10b2RvXCIgfCBcInRhc2stZG9uZVwiID0gXCJub3RlXCI7XG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBGbGF0VGFnUGx1Z2luKSB7XG4gICAgc3VwZXIobGVhZik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy5jb250YWluZXJFbC5hZGRDbGFzcyhcImZsYXQtdGFnLXZpZXdcIik7XG4gIH1cblxuICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBWSUVXX1RZUEU7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIkZsYXQgVGFnc1wiO1xuICB9XG5cbiAgZ2V0SWNvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiBcInRhZ1wiO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuICAgIHRoaXMuY29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcImZsYXQtdGFnLWNvbnRhaW5lclwiIH0pO1xuICAgIHRoaXMuc29ydENvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJmbGF0LXRhZy1zb3J0LWNvbnRhaW5lclwiIH0pO1xuICBcbiAgICBjb25zdCBidXR0b25TZWN0aW9uID0gdGhpcy5zb3J0Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJmbGF0LXRhZy1idXR0b25zLXNlY3Rpb25cIiB9KTtcbiAgXG4gICAgY29uc3Qgc29ydEJ5QVogPSBidXR0b25TZWN0aW9uLmNyZWF0ZURpdih7IGNsczogXCJmbGF0LXRhZy1zb3J0LWJ1dHRvblwiLCB0aXRsZTogXCJTb3J0IEEtWlwiIH0pO1xuICAgIHNldEljb24oc29ydEJ5QVosIFwibHVjaWRlLXNvcnQtYXNjXCIpO1xuICAgIHNvcnRCeUFaLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmN1cnJlbnRTb3J0ID0gXCJhelwiO1xuICAgICAgdGhpcy5yZW5kZXJUYWdzKCk7XG4gICAgfSk7XG4gIFxuICAgIGNvbnN0IHNvcnRCeUNvdW50ID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6IFwiZmxhdC10YWctc29ydC1idXR0b25cIiwgdGl0bGU6IFwiU29ydCBieSB1c2FnZVwiIH0pO1xuICAgIHNldEljb24oc29ydEJ5Q291bnQsIFwibHVjaWRlLWJhci1jaGFydC0yXCIpO1xuICAgIHNvcnRCeUNvdW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmN1cnJlbnRTb3J0ID0gXCJjb3VudFwiO1xuICAgICAgdGhpcy5yZW5kZXJUYWdzKCk7XG4gICAgfSk7XG4gIFxuICAgIGNvbnN0IGNsZWFyQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6IFwiZmxhdC10YWctY2xlYXItYnV0dG9uXCIsIHRpdGxlOiBcIkNsZWFyIHRhZyBzZWxlY3Rpb25zXCIgfSk7XG4gICAgc2V0SWNvbihjbGVhckJ1dHRvbiwgXCJ4XCIpO1xuICAgIGNsZWFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsZWFyVGFnU2VsZWN0aW9ucygpO1xuICAgIH0pO1xuICBcbiAgICBjb25zdCB0b2dnbGVTaW5nbGVVc2VCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZURpdih7IFxuICAgICAgY2xzOiBcImZsYXQtdGFnLXNvcnQtYnV0dG9uXCIsIFxuICAgICAgdGl0bGU6IFwiVG9nZ2xlIHNpbmdsZS11c2UgdGFnc1wiIFxuICAgIH0pO1xuICAgIHNldEljb24odG9nZ2xlU2luZ2xlVXNlQnV0dG9uLCBcImV5ZS1vZmZcIik7XG4gICAgdG9nZ2xlU2luZ2xlVXNlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLnRvZ2dsZVNpbmdsZVVzZVRhZ3MoKTtcbiAgICAgIHNldEljb24odG9nZ2xlU2luZ2xlVXNlQnV0dG9uLCB0aGlzLmhpZGVTaW5nbGVVc2VUYWdzID8gXCJleWVcIiA6IFwiZXllLW9mZlwiKTtcbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSBTY29wZSBCdXR0b24gKE5vdGUgLyBMaW5lKVxuICAgIGNvbnN0IHNjb3BlQnRuID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVEaXYoeyBcbiAgICAgIGNsczogXCJmbGF0LXRhZy1tb2RlLWJ1dHRvblwiLCBcbiAgICAgIHRleHQ6IFwiTk9URVwiLFxuICAgICAgdGl0bGU6IFwiQ2xpY2sgdG8gY3ljbGU6IE5vdGUgLT4gTGluZVwiIFxuICAgIH0pO1xuXG4gICAgLy8gQ3JlYXRlIFRhc2sgQnV0dG9uIChUYXNrIC8gVG9kbyAvIERvbmUpXG4gICAgY29uc3QgdGFza0J0biA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRGl2KHsgXG4gICAgICBjbHM6IFwiZmxhdC10YWctbW9kZS1idXR0b25cIiwgXG4gICAgICB0ZXh0OiBcIlRBU0stQUxMXCIsXG4gICAgICB0aXRsZTogXCJDbGljayB0byBjeWNsZTogQWxsIC0+IFRvZG8gLT4gRG9uZVwiXG4gICAgfSk7XG5cbiAgICBjb25zdCB1cGRhdGVNb2RlVUkgPSAoKSA9PiB7XG4gICAgICAvLyBSZW1vdmUgYWN0aXZlIHN0YXRlc1xuICAgICAgc2NvcGVCdG4ucmVtb3ZlQ2xhc3MoXCJpcy1hY3RpdmVcIik7XG4gICAgICB0YXNrQnRuLnJlbW92ZUNsYXNzKFwiaXMtYWN0aXZlXCIpO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgdGV4dCBhbmQgYWN0aXZlIHN0YXRlIGJhc2VkIG9uIGN1cnJlbnQgbW9kZVxuICAgICAgaWYgKHRoaXMuc2VhcmNoTW9kZSA9PT0gXCJub3RlXCIpIHtcbiAgICAgICAgc2NvcGVCdG4uc2V0VGV4dChcIk5PVEVcIik7XG4gICAgICAgIHNjb3BlQnRuLmFkZENsYXNzKFwiaXMtYWN0aXZlXCIpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnNlYXJjaE1vZGUgPT09IFwibGluZVwiKSB7XG4gICAgICAgIHNjb3BlQnRuLnNldFRleHQoXCJMSU5FXCIpO1xuICAgICAgICBzY29wZUJ0bi5hZGRDbGFzcyhcImlzLWFjdGl2ZVwiKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWFyY2hNb2RlID09PSBcInRhc2tcIikge1xuICAgICAgICB0YXNrQnRuLnNldFRleHQoXCJUQVNLLUFMTFwiKTtcbiAgICAgICAgdGFza0J0bi5hZGRDbGFzcyhcImlzLWFjdGl2ZVwiKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWFyY2hNb2RlID09PSBcInRhc2stdG9kb1wiKSB7XG4gICAgICAgIHRhc2tCdG4uc2V0VGV4dChcIlRBU0stVE9ET1wiKTtcbiAgICAgICAgdGFza0J0bi5hZGRDbGFzcyhcImlzLWFjdGl2ZVwiKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWFyY2hNb2RlID09PSBcInRhc2stZG9uZVwiKSB7XG4gICAgICAgIHRhc2tCdG4uc2V0VGV4dChcIlRBU0stRE9ORVwiKTtcbiAgICAgICAgdGFza0J0bi5hZGRDbGFzcyhcImlzLWFjdGl2ZVwiKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gTWFpbnRhaW4gdGhlIGNvcnJlY3QgdGV4dCBvbiB0aGUgaW5hY3RpdmUgYnV0dG9uXG4gICAgICBpZiAoW1wibm90ZVwiLCBcImxpbmVcIl0uaW5jbHVkZXModGhpcy5zZWFyY2hNb2RlKSkge1xuICAgICAgICBpZiAoIVtcIlRBU0stQUxMXCIsIFwiVEFTSy1UT0RPXCIsIFwiVEFTSy1ET05FXCJdLmluY2x1ZGVzKHRhc2tCdG4uaW5uZXJUZXh0KSkge1xuICAgICAgICAgIHRhc2tCdG4uc2V0VGV4dChcIlRBU0stQUxMXCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIVtcIk5PVEVcIiwgXCJMSU5FXCJdLmluY2x1ZGVzKHNjb3BlQnRuLmlubmVyVGV4dCkpIHtcbiAgICAgICAgICBzY29wZUJ0bi5zZXRUZXh0KFwiTk9URVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLnVwZGF0ZVNlYXJjaCgpOyBcbiAgICAgIC8vIE9ubHkgcmVuZGVyIHRhZ3MgaWYgdGhlIGNvbnRhaW5lciBoYXMgYWN0dWFsbHkgYmVlbiBjcmVhdGVkIVxuICAgICAgaWYgKHRoaXMudGFnQ29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMucmVuZGVyVGFncygpOyBcbiAgICAgIH1cbiAgICB9O1xuXG5cbiAgICAvLyBDeWNsZSBTY29wZSBCdXR0b24gTG9naWNcbiAgICBzY29wZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgaWYgKFtcIm5vdGVcIiwgXCJsaW5lXCJdLmluY2x1ZGVzKHRoaXMuc2VhcmNoTW9kZSkpIHtcbiAgICAgICAgdGhpcy5zZWFyY2hNb2RlID0gdGhpcy5zZWFyY2hNb2RlID09PSBcIm5vdGVcIiA/IFwibGluZVwiIDogXCJub3RlXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNlYXJjaE1vZGUgPSBzY29wZUJ0bi5pbm5lclRleHQgPT09IFwiTElORVwiID8gXCJsaW5lXCIgOiBcIm5vdGVcIjtcbiAgICAgIH1cbiAgICAgIHVwZGF0ZU1vZGVVSSgpO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIEN5Y2xlIFRhc2sgQnV0dG9uIExvZ2ljXG4gICAgdGFza0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgaWYgKFtcInRhc2tcIiwgXCJ0YXNrLXRvZG9cIiwgXCJ0YXNrLWRvbmVcIl0uaW5jbHVkZXModGhpcy5zZWFyY2hNb2RlKSkge1xuICAgICAgICBpZiAodGhpcy5zZWFyY2hNb2RlID09PSBcInRhc2tcIikgdGhpcy5zZWFyY2hNb2RlID0gXCJ0YXNrLXRvZG9cIjtcbiAgICAgICAgZWxzZSBpZiAodGhpcy5zZWFyY2hNb2RlID09PSBcInRhc2stdG9kb1wiKSB0aGlzLnNlYXJjaE1vZGUgPSBcInRhc2stZG9uZVwiO1xuICAgICAgICBlbHNlIHRoaXMuc2VhcmNoTW9kZSA9IFwidGFza1wiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRhc2tCdG4uaW5uZXJUZXh0ID09PSBcIlRBU0stVE9ET1wiKSB0aGlzLnNlYXJjaE1vZGUgPSBcInRhc2stdG9kb1wiO1xuICAgICAgICBlbHNlIGlmICh0YXNrQnRuLmlubmVyVGV4dCA9PT0gXCJUQVNLLURPTkVcIikgdGhpcy5zZWFyY2hNb2RlID0gXCJ0YXNrLWRvbmVcIjtcbiAgICAgICAgZWxzZSB0aGlzLnNlYXJjaE1vZGUgPSBcInRhc2tcIjtcbiAgICAgIH1cbiAgICAgIHVwZGF0ZU1vZGVVSSgpO1xuICAgIH0pO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBVSVxuICAgIHVwZGF0ZU1vZGVVSSgpO1xuICBcbiAgICBjb25zdCBzZWFyY2hTZWN0aW9uID0gdGhpcy5zb3J0Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJmbGF0LXRhZy1zZWFyY2gtc2VjdGlvblwiIH0pO1xuICAgIFxuICAgIGNvbnN0IHNlYXJjaEJveCA9IHNlYXJjaFNlY3Rpb24uY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG4gICAgICBjbHM6IFwiZmxhdC10YWctc2VhcmNoLWlucHV0XCIsXG4gICAgICBhdHRyOiB7IFxuICAgICAgICB0eXBlOiBcInRleHRcIiwgXG4gICAgICAgIHBsYWNlaG9sZGVyOiBcIlNlYXJjaCB0YWdzLi4uXCIsXG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgY2xlYXJTZWFyY2hCdXR0b24gPSBzZWFyY2hTZWN0aW9uLmNyZWF0ZURpdih7IFxuICAgICAgY2xzOiBcImZsYXQtdGFnLXNlYXJjaC1jbGVhci1idXR0b25cIixcbiAgICAgIHRpdGxlOiBcIkNsZWFyIHNlYXJjaFwiIFxuICAgIH0pO1xuICAgIHNldEljb24oY2xlYXJTZWFyY2hCdXR0b24sIFwic3F1YXJlLXhcIik7XG4gICAgY2xlYXJTZWFyY2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xlYXJTZWFyY2hCb3goKTtcbiAgICB9KTtcbiAgICBcbiAgICBzZWFyY2hCb3guYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgdGhpcy50YWdTZWFyY2hUZXh0ID0gdGFyZ2V0LnZhbHVlO1xuICAgICAgdGhpcy5yZW5kZXJUYWdzKCk7XG4gICAgfSk7XG4gICAgXG4gICAgdGhpcy50YWdDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwiZmxhdC10YWctbGlzdFwiIH0pO1xuICBcbiAgICBhd2FpdCB0aGlzLmxvYWRUYWdzKCk7XG4gIFxuICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgIHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUub24oXCJjaGFuZ2VkXCIsIChmaWxlOiBURmlsZSkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZUZpbGVUYWdzKGZpbGUpO1xuICAgICAgfSlcbiAgICApO1xuXG4gICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgdGhpcy5hcHAudmF1bHQub24oXCJkZWxldGVcIiwgKGZpbGUpID0+IHtcbiAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gXCJtZFwiKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVGaWxlVGFncyhmaWxlLnBhdGgpO1xuICAgICAgICAgIHRoaXMucmVuZGVyVGFncygpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICk7XG4gICAgXG4gICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgdGhpcy5hcHAudmF1bHQub24oXCJyZW5hbWVcIiwgKGZpbGUsIG9sZFBhdGgpID0+IHtcbiAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gXCJtZFwiKSB7XG4gICAgICAgICAgY29uc3QgdGFncyA9IHRoaXMudGFnc0J5RmlsZS5nZXQob2xkUGF0aCk7XG4gICAgICAgICAgaWYgKHRhZ3MpIHtcbiAgICAgICAgICAgIHRoaXMudGFnc0J5RmlsZS5zZXQoZmlsZS5wYXRoLCB0YWdzKTtcbiAgICAgICAgICAgIHRoaXMudGFnc0J5RmlsZS5kZWxldGUob2xkUGF0aCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBhc3luYyBsb2FkVGFncygpIHtcbiAgICB0aGlzLmFsbFRhZ3MuY2xlYXIoKTtcbiAgICB0aGlzLnRhZ3NCeUZpbGUuY2xlYXIoKTtcbiAgICBcbiAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgIGNvbnN0IGZpbGVUYWdzID0gdGhpcy5nZXRGaWxlVGFncyhmaWxlKTtcbiAgICAgIHRoaXMudGFnc0J5RmlsZS5zZXQoZmlsZS5wYXRoLCBuZXcgU2V0KGZpbGVUYWdzKSk7XG4gICAgICBmaWxlVGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgIHRoaXMuYWxsVGFncy5zZXQodGFnLCAodGhpcy5hbGxUYWdzLmdldCh0YWcpIHx8IDApICsgMSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5yZW5kZXJUYWdzKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUZpbGVUYWdzKGZpbGU6IFRGaWxlKSB7XG4gICAgY29uc3Qgb2xkVGFncyA9IHRoaXMudGFnc0J5RmlsZS5nZXQoZmlsZS5wYXRoKSB8fCBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBjb25zdCBuZXdUYWdzQXJyID0gdGhpcy5nZXRGaWxlVGFncyhmaWxlKTtcbiAgICBjb25zdCBuZXdUYWdzID0gbmV3IFNldChuZXdUYWdzQXJyKTtcbiAgICBcbiAgICBsZXQgaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgIFxuICAgIG9sZFRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgaWYgKCFuZXdUYWdzLmhhcyh0YWcpKSB7XG4gICAgICAgIGhhc0NoYW5nZXMgPSB0cnVlO1xuICAgICAgICBjb25zdCBjb3VudCA9ICh0aGlzLmFsbFRhZ3MuZ2V0KHRhZykgfHwgMCkgLSAxO1xuICAgICAgICBpZiAoY291bnQgPD0gMCkgdGhpcy5hbGxUYWdzLmRlbGV0ZSh0YWcpO1xuICAgICAgICBlbHNlIHRoaXMuYWxsVGFncy5zZXQodGFnLCBjb3VudCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgbmV3VGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICBpZiAoIW9sZFRhZ3MuaGFzKHRhZykpIHtcbiAgICAgICAgaGFzQ2hhbmdlcyA9IHRydWU7XG4gICAgICAgIHRoaXMuYWxsVGFncy5zZXQodGFnLCAodGhpcy5hbGxUYWdzLmdldCh0YWcpIHx8IDApICsgMSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKGhhc0NoYW5nZXMpIHtcbiAgICAgIHRoaXMudGFnc0J5RmlsZS5zZXQoZmlsZS5wYXRoLCBuZXdUYWdzKTtcbiAgICAgIHRoaXMucmVuZGVyVGFncygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlRmlsZVRhZ3MoZmlsZVBhdGg6IHN0cmluZykge1xuICAgIGNvbnN0IG9sZFRhZ3MgPSB0aGlzLnRhZ3NCeUZpbGUuZ2V0KGZpbGVQYXRoKTtcbiAgICBpZiAoIW9sZFRhZ3MpIHJldHVybjtcbiAgICBcbiAgICBvbGRUYWdzLmZvckVhY2godGFnID0+IHtcbiAgICAgIGNvbnN0IGNvdW50ID0gKHRoaXMuYWxsVGFncy5nZXQodGFnKSB8fCAwKSAtIDE7XG4gICAgICBpZiAoY291bnQgPD0gMCkgdGhpcy5hbGxUYWdzLmRlbGV0ZSh0YWcpO1xuICAgICAgZWxzZSB0aGlzLmFsbFRhZ3Muc2V0KHRhZywgY291bnQpO1xuICAgIH0pO1xuICAgIFxuICAgIHRoaXMudGFnc0J5RmlsZS5kZWxldGUoZmlsZVBhdGgpO1xuICB9XG5cbiAgYXN5bmMgcmVuZGVyVGFncygpIHtcbiAgICB0aGlzLnRhZ0NvbnRhaW5lci5lbXB0eSgpO1xuICAgIFxuICAgIGNvbnN0IGZpbHRlcmVkVGFncyA9IGF3YWl0IHRoaXMuZ2V0RmlsdGVyZWRUYWdzQXN5bmMoKTtcbiAgICBsZXQgc29ydGVkVGFnczogW3N0cmluZywgbnVtYmVyXVtdO1xuICAgIFxuICAgIGlmICh0aGlzLmN1cnJlbnRTb3J0ID09PSBcImF6XCIpIHtcbiAgICAgIHNvcnRlZFRhZ3MgPSBBcnJheS5mcm9tKGZpbHRlcmVkVGFncy5lbnRyaWVzKCkpLnNvcnQoKGEsIGIpID0+IGFbMF0ubG9jYWxlQ29tcGFyZShiWzBdLCAncGwnKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNvcnRlZFRhZ3MgPSBBcnJheS5mcm9tKGZpbHRlcmVkVGFncy5lbnRyaWVzKCkpLnNvcnQoKGEsIGIpID0+IGJbMV0gLSBhWzFdKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuY3VycmVudFNvcnQgPT09IFwiYXpcIikge1xuICAgICAgY29uc3QgdGFnc0J5TGV0dGVyID0gbmV3IE1hcDxzdHJpbmcsIEFycmF5PFtzdHJpbmcsIG51bWJlcl0+PigpO1xuICAgICAgdGFnc0J5TGV0dGVyLnNldChcIm90aGVyXCIsIFtdKTtcbiAgICAgIFxuICAgICAgZm9yIChsZXQgY2hhckNvZGUgPSA2NTsgY2hhckNvZGUgPD0gOTA7IGNoYXJDb2RlKyspIHtcbiAgICAgICAgdGFnc0J5TGV0dGVyLnNldChTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXJDb2RlKSwgW10pO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBwb2xpc2hEaWFjcml0aWNzID0gWydcdTAxMDQnLCAnXHUwMTA2JywgJ1x1MDExOCcsICdcdTAxNDEnLCAnXHUwMTQzJywgJ1x1MDBEMycsICdcdTAxNUEnLCAnXHUwMTc5JywgJ1x1MDE3QiddO1xuICAgICAgcG9saXNoRGlhY3JpdGljcy5mb3JFYWNoKGxldHRlciA9PiB0YWdzQnlMZXR0ZXIuc2V0KGxldHRlciwgW10pKTtcbiAgICAgIFxuICAgICAgc29ydGVkVGFncy5mb3JFYWNoKHRhZ0l0ZW0gPT4ge1xuICAgICAgICBjb25zdCBbdGFnXSA9IHRhZ0l0ZW07XG4gICAgICAgIGNvbnN0IGZpcnN0Q2hhciA9IHRhZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChmaXJzdENoYXIubWF0Y2goL1tBLVpdLykpIHtcbiAgICAgICAgICB0YWdzQnlMZXR0ZXIuZ2V0KGZpcnN0Q2hhcik/LnB1c2godGFnSXRlbSk7XG4gICAgICAgIH0gZWxzZSBpZiAocG9saXNoRGlhY3JpdGljcy5pbmNsdWRlcyhmaXJzdENoYXIpKSB7XG4gICAgICAgICAgdGFnc0J5TGV0dGVyLmdldChmaXJzdENoYXIpPy5wdXNoKHRhZ0l0ZW0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRhZ3NCeUxldHRlci5nZXQoXCJvdGhlclwiKT8ucHVzaCh0YWdJdGVtKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHRhZ3NCeUxldHRlci5mb3JFYWNoKChsZXR0ZXJUYWdzLCBsZXR0ZXIpID0+IHtcbiAgICAgICAgaWYgKGxldHRlclRhZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGlmIChsZXR0ZXIgIT09IFwib3RoZXJcIikge1xuICAgICAgICAgICAgY29uc3QgbGV0dGVyRWwgPSB0aGlzLnRhZ0NvbnRhaW5lci5jcmVhdGVTcGFuKHsgY2xzOiBcImZsYXQtdGFnLWxldHRlclwiIH0pO1xuICAgICAgICAgICAgbGV0dGVyRWwuc2V0VGV4dChsZXR0ZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBsZXR0ZXJUYWdzLmZvckVhY2goKFt0YWcsIGNvdW50XSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVUYWdFbGVtZW50KHRhZywgY291bnQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgc29ydGVkVGFncy5mb3JFYWNoKChbdGFnLCBjb3VudF0pID0+IHtcbiAgICAgICAgdGhpcy5jcmVhdGVUYWdFbGVtZW50KHRhZywgY291bnQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVUYWdFbGVtZW50KHRhZzogc3RyaW5nLCBjb3VudDogbnVtYmVyKSB7XG4gICAgY29uc3QgdGFnRWwgPSB0aGlzLnRhZ0NvbnRhaW5lci5jcmVhdGVTcGFuKHsgY2xzOiBcImZsYXQtdGFnXCIgfSk7XG4gICAgXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRUYWdzLmhhcyh0YWcpKSB7XG4gICAgICB0YWdFbC5hZGRDbGFzcyhcImZsYXQtdGFnLXNlbGVjdGVkXCIpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5leGNsdWRlZFRhZ3MuaGFzKHRhZykpIHtcbiAgICAgIHRhZ0VsLmFkZENsYXNzKFwiZmxhdC10YWctZXhjbHVkZWRcIik7XG4gICAgfVxuICAgIFxuICAgIHRhZ0VsLnNldFRleHQoYCMke3RhZ30gKCR7Y291bnR9KWApO1xuICAgIFxuICAgIHRhZ0VsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgY29uc3QgaXNNdWx0aVNlbGVjdCA9IGUuY3RybEtleSB8fCBlLm1ldGFLZXk7XG4gICAgICBjb25zdCBpc0V4Y2x1ZGUgPSBlLnNoaWZ0S2V5O1xuICAgICAgXG4gICAgICBpZiAoaXNFeGNsdWRlKSB7XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVkVGFncy5oYXModGFnKSkge1xuICAgICAgICAgIHRoaXMuZXhjbHVkZWRUYWdzLmRlbGV0ZSh0YWcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZXhjbHVkZWRUYWdzLmFkZCh0YWcpO1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUYWdzLmRlbGV0ZSh0YWcpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzTXVsdGlTZWxlY3QpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRUYWdzLmhhcyh0YWcpKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFRhZ3MuZGVsZXRlKHRhZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFRhZ3MuYWRkKHRhZyk7XG4gICAgICAgICAgdGhpcy5leGNsdWRlZFRhZ3MuZGVsZXRlKHRhZyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVGFncy5zaXplID09PSAxICYmIHRoaXMuc2VsZWN0ZWRUYWdzLmhhcyh0YWcpKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFRhZ3MuY2xlYXIoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkVGFncy5jbGVhcigpO1xuICAgICAgICAgIHRoaXMuZXhjbHVkZWRUYWdzLmNsZWFyKCk7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFRhZ3MuYWRkKHRhZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhpcy5yZW5kZXJUYWdzKCk7XG4gICAgICB0aGlzLnVwZGF0ZVNlYXJjaCgpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRGaWx0ZXJlZFRhZ3NBc3luYygpOiBQcm9taXNlPE1hcDxzdHJpbmcsIG51bWJlcj4+IHtcbiAgICBsZXQgZmlsdGVyZWRUYWdzID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcbiAgICBcbiAgICBpZiAodGhpcy5zZWxlY3RlZFRhZ3Muc2l6ZSA9PT0gMCkge1xuICAgICAgZmlsdGVyZWRUYWdzID0gbmV3IE1hcCh0aGlzLmFsbFRhZ3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzZWxlY3RlZFRhZ3NBcnJheSA9IEFycmF5LmZyb20odGhpcy5zZWxlY3RlZFRhZ3MpO1xuICAgICAgY29uc3QgbWF0Y2hpbmdGaWxlczogc3RyaW5nW10gPSBbXTtcbiAgICAgIFxuICAgICAgdGhpcy50YWdzQnlGaWxlLmZvckVhY2goKHRhZ3MsIGZpbGVQYXRoKSA9PiB7XG4gICAgICAgIGlmIChzZWxlY3RlZFRhZ3NBcnJheS5ldmVyeSh0YWcgPT4gdGFncy5oYXModGFnKSkpIHtcbiAgICAgICAgICBtYXRjaGluZ0ZpbGVzLnB1c2goZmlsZVBhdGgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuc2VhcmNoTW9kZSA9PT0gXCJub3RlXCIpIHtcbiAgICAgICAgbWF0Y2hpbmdGaWxlcy5mb3JFYWNoKGZpbGVQYXRoID0+IHtcbiAgICAgICAgICBjb25zdCBmaWxlVGFncyA9IHRoaXMudGFnc0J5RmlsZS5nZXQoZmlsZVBhdGgpO1xuICAgICAgICAgIGlmIChmaWxlVGFncykge1xuICAgICAgICAgICAgZmlsZVRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICAgICAgICBmaWx0ZXJlZFRhZ3Muc2V0KHRhZywgKGZpbHRlcmVkVGFncy5nZXQodGFnKSB8fCAwKSArIDEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoY29uc3QgZmlsZVBhdGggb2YgbWF0Y2hpbmdGaWxlcykge1xuICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpO1xuICAgICAgICAgICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxvd2VyTGluZSA9IGxpbmUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoTW9kZSA9PT0gXCJ0YXNrXCIgJiYgIWxvd2VyTGluZS5pbmNsdWRlcyhcIi0gW1wiKSkgY29udGludWU7XG4gICAgICAgICAgICAgIGlmICh0aGlzLnNlYXJjaE1vZGUgPT09IFwidGFzay10b2RvXCIgJiYgIWxvd2VyTGluZS5pbmNsdWRlcyhcIi0gWyBdXCIpKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoTW9kZSA9PT0gXCJ0YXNrLWRvbmVcIiAmJiAhbG93ZXJMaW5lLmluY2x1ZGVzKFwiLSBbeF1cIikpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgY29uc3QgbGluZVRhZ3MgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICAgICAgICAgICAgY29uc3QgdGFnUmVnZXggPSAvIyhbXlxccyNdKykvZztcbiAgICAgICAgICAgICAgbGV0IG1hdGNoO1xuICAgICAgICAgICAgICB3aGlsZSAoKG1hdGNoID0gdGFnUmVnZXguZXhlYyhsaW5lKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBsaW5lVGFncy5hZGQobWF0Y2hbMV0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRUYWdzQXJyYXkuZXZlcnkoc2VsZWN0ZWRUYWcgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKGxpbmVUYWdzKS5zb21lKHQgPT4gdC50b0xvd2VyQ2FzZSgpID09PSBzZWxlY3RlZFRhZy50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgICBsaW5lVGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgICAgICAgICAgICBmaWx0ZXJlZFRhZ3Muc2V0KHRhZywgKGZpbHRlcmVkVGFncy5nZXQodGFnKSB8fCAwKSArIDEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHNlbGVjdGVkVGFnc0FycmF5LmZvckVhY2godGFnID0+IHtcbiAgICAgICAgaWYgKCFmaWx0ZXJlZFRhZ3MuaGFzKHRhZykpIHtcbiAgICAgICAgICBmaWx0ZXJlZFRhZ3Muc2V0KHRhZywgdGhpcy5hbGxUYWdzLmdldCh0YWcpIHx8IDApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuaGlkZVNpbmdsZVVzZVRhZ3MpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gICAgICBmaWx0ZXJlZFRhZ3MuZm9yRWFjaCgoY291bnQsIHRhZykgPT4ge1xuICAgICAgICBpZiAoY291bnQgPiAxIHx8IHRoaXMuc2VsZWN0ZWRUYWdzLmhhcyh0YWcpKSB7XG4gICAgICAgICAgcmVzdWx0LnNldCh0YWcsIGNvdW50KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBmaWx0ZXJlZFRhZ3MgPSByZXN1bHQ7XG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLnRhZ1NlYXJjaFRleHQpIHtcbiAgICAgIGNvbnN0IHNlYXJjaFRleHQgPSB0aGlzLnRhZ1NlYXJjaFRleHQudG9Mb3dlckNhc2UoKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gICAgICBcbiAgICAgIGZpbHRlcmVkVGFncy5mb3JFYWNoKChjb3VudCwgdGFnKSA9PiB7XG4gICAgICAgIGlmICh0YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXh0KSB8fCB0aGlzLnNlbGVjdGVkVGFncy5oYXModGFnKSB8fCB0aGlzLmV4Y2x1ZGVkVGFncy5oYXModGFnKSkge1xuICAgICAgICAgIHJlc3VsdC5zZXQodGFnLCBjb3VudCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZpbHRlcmVkVGFncztcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU2VhcmNoKCkge1xuICAgIGxldCBzZWFyY2hMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShcInNlYXJjaFwiKVswXTtcbiAgICBcbiAgICBpZiAoIXNlYXJjaExlYWYpIHtcbiAgICAgIGNvbnN0IHJpZ2h0TGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xuICAgICAgaWYgKHJpZ2h0TGVhZikge1xuICAgICAgICBzZWFyY2hMZWFmID0gcmlnaHRMZWFmO1xuICAgICAgICBzZWFyY2hMZWFmLnNldFZpZXdTdGF0ZSh7IHR5cGU6IFwic2VhcmNoXCIgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRUYWdzLnNpemUgPT09IDAgJiYgdGhpcy5leGNsdWRlZFRhZ3Muc2l6ZSA9PT0gMCkge1xuICAgICAgaWYgKHNlYXJjaExlYWYpIHtcbiAgICAgICAgY29uc3Qgc2VhcmNoVmlldyA9IHNlYXJjaExlYWYudmlldyBhcyBhbnk7XG4gICAgICAgIGlmIChzZWFyY2hWaWV3ICYmIHR5cGVvZiBzZWFyY2hWaWV3LnNldFF1ZXJ5ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBzZWFyY2hWaWV3LnNldFF1ZXJ5KFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGxldCB0YWdRdWVyeSA9IFwiXCI7XG4gICAgY29uc3Qgc2VsZWN0ZWQgPSBBcnJheS5mcm9tKHRoaXMuc2VsZWN0ZWRUYWdzKTtcbiAgICBjb25zdCBleGNsdWRlZCA9IEFycmF5LmZyb20odGhpcy5leGNsdWRlZFRhZ3MpO1xuXG4gICAgaWYgKHRoaXMuc2VhcmNoTW9kZSA9PT0gXCJub3RlXCIpIHtcbiAgICAgIHRhZ1F1ZXJ5ID0gW1xuICAgICAgICAuLi5zZWxlY3RlZC5tYXAodGFnID0+IGB0YWc6IyR7dGFnfWApLFxuICAgICAgICAuLi5leGNsdWRlZC5tYXAodGFnID0+IGAtdGFnOiMke3RhZ31gKVxuICAgICAgXS5qb2luKFwiIFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHByZWZpeCA9IFwibGluZTooXCI7XG4gICAgICBpZiAodGhpcy5zZWFyY2hNb2RlID09PSBcInRhc2tcIikgcHJlZml4ID0gXCJ0YXNrOihcIjtcbiAgICAgIGVsc2UgaWYgKHRoaXMuc2VhcmNoTW9kZSA9PT0gXCJ0YXNrLXRvZG9cIikgcHJlZml4ID0gXCJ0YXNrLXRvZG86KFwiO1xuICAgICAgZWxzZSBpZiAodGhpcy5zZWFyY2hNb2RlID09PSBcInRhc2stZG9uZVwiKSBwcmVmaXggPSBcInRhc2stZG9uZTooXCI7XG4gICAgICBcbiAgICAgIGNvbnN0IGJsb2NrQ29udGVudHMgPSBbXG4gICAgICAgIC4uLnNlbGVjdGVkLm1hcCh0YWcgPT4gYCMke3RhZ31gKSxcbiAgICAgICAgLi4uZXhjbHVkZWQubWFwKHRhZyA9PiBgLSMke3RhZ31gKVxuICAgICAgXS5qb2luKFwiIFwiKTtcblxuICAgICAgdGFnUXVlcnkgPSBgJHtwcmVmaXh9ICR7YmxvY2tDb250ZW50c30gKWA7XG4gICAgfVxuICAgIFxuICAgIGlmIChzZWFyY2hMZWFmKSB7XG4gICAgICBjb25zdCBzZWFyY2hWaWV3ID0gc2VhcmNoTGVhZi52aWV3IGFzIGFueTtcbiAgICAgIGlmIChzZWFyY2hWaWV3ICYmIHR5cGVvZiBzZWFyY2hWaWV3LnNldFF1ZXJ5ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgc2VhcmNoVmlldy5zZXRRdWVyeSh0YWdRdWVyeSk7XG4gICAgICB9XG4gICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihzZWFyY2hMZWFmKTtcbiAgICB9XG4gIH1cblxuICBnZXRGaWxlVGFncyhmaWxlOiBURmlsZSk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgIGlmICghY2FjaGUpIHJldHVybiBbXTtcbiAgICBcbiAgICBjb25zdCB0YWdzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgXG4gICAgaWYgKGNhY2hlLnRhZ3MpIHtcbiAgICAgIGNhY2hlLnRhZ3MuZm9yRWFjaCh0YWdPYmogPT4ge1xuICAgICAgICBjb25zdCB0YWcgPSB0YWdPYmoudGFnLnJlcGxhY2UoL14jLywgXCJcIik7XG4gICAgICAgIHRhZ3MuYWRkKHRhZyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGNhY2hlLmZyb250bWF0dGVyICYmIGNhY2hlLmZyb250bWF0dGVyLnRhZ3MpIHtcbiAgICAgIGNvbnN0IGZtVGFncyA9IGNhY2hlLmZyb250bWF0dGVyLnRhZ3M7XG4gICAgICBpZiAodHlwZW9mIGZtVGFncyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZm1UYWdzLnNwbGl0KC9bXFxzLF0rLykuZmlsdGVyKEJvb2xlYW4pLmZvckVhY2godGFnID0+IHtcbiAgICAgICAgICB0YWdzLmFkZCh0YWcpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShmbVRhZ3MpKSB7XG4gICAgICAgIGZtVGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgICAgaWYgKHRhZykgdGFncy5hZGQoU3RyaW5nKHRhZykpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIEFycmF5LmZyb20odGFncyk7XG4gIH1cblxuICBwdWJsaWMgdG9nZ2xlU29ydCgpIHtcbiAgICB0aGlzLmN1cnJlbnRTb3J0ID0gdGhpcy5jdXJyZW50U29ydCA9PT0gXCJhelwiID8gXCJjb3VudFwiIDogXCJhelwiO1xuICAgIHRoaXMucmVuZGVyVGFncygpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyVGFnU2VsZWN0aW9ucygpIHtcbiAgICB0aGlzLnNlbGVjdGVkVGFncy5jbGVhcigpO1xuICAgIHRoaXMuZXhjbHVkZWRUYWdzLmNsZWFyKCk7XG4gICAgdGhpcy5yZW5kZXJUYWdzKCk7XG4gICAgdGhpcy51cGRhdGVTZWFyY2goKTtcbiAgfVxuXG4gIHB1YmxpYyB0b2dnbGVTaW5nbGVVc2VUYWdzKCkge1xuICAgIHRoaXMuaGlkZVNpbmdsZVVzZVRhZ3MgPSAhdGhpcy5oaWRlU2luZ2xlVXNlVGFncztcbiAgICB0aGlzLnJlbmRlclRhZ3MoKTtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhclNlYXJjaEJveCgpIHtcbiAgICBjb25zdCBzZWFyY2hCb3ggPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcuZmxhdC10YWctc2VhcmNoLWlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBpZiAoc2VhcmNoQm94KSB7XG4gICAgICBzZWFyY2hCb3gudmFsdWUgPSBcIlwiO1xuICAgICAgdGhpcy50YWdTZWFyY2hUZXh0ID0gXCJcIjtcbiAgICAgIHRoaXMucmVuZGVyVGFncygpO1xuICAgIH1cbiAgfVxufVxuIiwgImV4cG9ydCBjb25zdCBWSUVXX1RZUEUgPSBcImZsYXQtdGFnLXZpZXdcIjtcblxuIiwgImV4cG9ydCBjb25zdCBnZXRTdHlsZXMgPSAoKTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIGBcbiAgICAud29ya3NwYWNlLXNwbGl0Lm1vZC1yb290IC52aWV3LWNvbnRlbnQuZmxhdC10YWctdmlldyB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcbiAgICAgIGFsaWduLWl0ZW1zOiBzdHJldGNoO1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgcGFkZGluZzogMDtcbiAgICAgIG1hcmdpbjogMDtcbiAgICB9XG5cbiAgICAuZmxhdC10YWctY29udGFpbmVyIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICBwYWRkaW5nOiAwO1xuICAgICAgbWFyZ2luOiAwO1xuICAgIH1cblxuICAgIC5mbGF0LXRhZy1zb3J0LWNvbnRhaW5lciB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGZsZXgtd3JhcDogd3JhcDsgLyogQWxsb3dzIHNlYXJjaGluZyB0byB3cmFwIG5pY2VseSBvbiBuYXJyb3cgcGFuZXMgKi9cbiAgICAgIGdhcDogOHB4O1xuICAgIH1cbiAgICBcbiAgICAuZmxhdC10YWctYnV0dG9ucy1zZWN0aW9uIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBnYXA6IDZweDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgfVxuICAgIFxuICAgIC8qIEJhc2Ugc3R5bGluZyBmb3Igb3VyIE5vdGUvTGluZSBhbmQgVGFzayB0b2dnbGUgYnV0dG9ucyAqL1xuICAgIC5mbGF0LXRhZy1tb2RlLWJ1dHRvbiB7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBwYWRkaW5nOiA0cHggMTBweDtcbiAgICAgIGZvbnQtc2l6ZTogMC44ZW07XG4gICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLXMpO1xuICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1mb3JtLWZpZWxkKTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgIHRyYW5zaXRpb246IGFsbCAwLjE1cyBlYXNlLWluLW91dDtcbiAgICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgIG1pbi13aWR0aDogNjVweDtcbiAgICB9XG5cbiAgICAvKiBIb3ZlciBlZmZlY3QgZm9yIGluYWN0aXZlIHN0YXRlICovXG4gICAgLmZsYXQtdGFnLW1vZGUtYnV0dG9uOmhvdmVyIHtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXItaG92ZXIpO1xuICAgIH1cblxuICAgIC8qIEhpZ2hseSB2aXNpYmxlIGFjdGl2ZSAocHJlc3NlZCkgc3RhdGUgKi9cbiAgICAuZmxhdC10YWctbW9kZS1idXR0b24uaXMtYWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAxcHggM3B4IHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgICB9XG5cbiAgICAvKiBIb3ZlciBlZmZlY3Qgd2hlbiBhY3RpdmUgKi9cbiAgICAuZmxhdC10YWctbW9kZS1idXR0b24uaXMtYWN0aXZlOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudC1ob3Zlcik7XG4gICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudC1ob3Zlcik7XG4gICAgfVxuICAgIFxuICAgIC5mbGF0LXRhZy1zZWFyY2gtc2VjdGlvbiB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGdhcDogNHB4O1xuICAgICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICBwYWRkaW5nOiAycHggOHB4O1xuICAgICAgZmxleC1ncm93OiAxO1xuICAgICAgbWF4LXdpZHRoOiAyMDBweDtcbiAgICB9XG4gICAgXG4gICAgLmZsYXQtdGFnLXNlYXJjaC1pbnB1dCB7XG4gICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGhlaWdodDogMjRweDtcbiAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgfVxuICAgIFxuICAgIC5mbGF0LXRhZy1zZWFyY2gtaW5wdXQ6Zm9jdXMge1xuICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgIGJveC1zaGFkb3c6IG5vbmU7XG4gICAgfVxuICAgIFxuICAgIC5mbGF0LXRhZy1zZWFyY2gtaWNvbiB7XG4gICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIH1cblxuICAgIC5mbGF0LXRhZy1zZWFyY2gtY2xlYXItYnV0dG9uIHtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICBmb250LXNpemU6IDAuOGVtO1xuICAgIH1cblxuICAgIC5mbGF0LXRhZy1zZWFyY2gtY2xlYXItYnV0dG9uOmhvdmVyIHtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgfVxuXG4gICAgLmZsYXQtdGFnLXNvcnQtYnV0dG9uLCAuZmxhdC10YWctY2xlYXItYnV0dG9uIHtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIHBhZGRpbmc6IDRweDtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgfVxuXG4gICAgLmZsYXQtdGFnLXNvcnQtYnV0dG9uOmhvdmVyLCAuZmxhdC10YWctY2xlYXItYnV0dG9uOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWhvdmVyKTtcbiAgICB9XG5cbiAgICAuZmxhdC10YWctbGlzdCB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgYWxpZ24tY29udGVudDogZmxleC1zdGFydDtcbiAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICBmbGV4OiAxO1xuICAgICAgbGluZS1oZWlnaHQ6IDEuNWVtO1xuICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgfVxuXG4gICAgLmZsYXQtdGFnIHtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIHBhZGRpbmc6IDJweCA2cHg7XG4gICAgICBtYXJnaW46IDJweDtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRhZy1iYWNrZ3JvdW5kKTtcbiAgICAgIGNvbG9yOiB2YXIoLS10YWctY29sb3IpO1xuICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjFzO1xuICAgIH1cblxuICAgIC5mbGF0LXRhZzpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10YWctYmFja2dyb3VuZC1ob3Zlcik7XG4gICAgfVxuXG4gICAgLmZsYXQtdGFnLXNlbGVjdGVkIHtcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgfVxuXG4gICAgLmZsYXQtdGFnLWV4Y2x1ZGVkIHtcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgfVxuICAgIFxuICAgIC5mbGF0LXRhZy1sZXR0ZXIge1xuICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgIGZvbnQtc2l6ZTogMS4yZW07XG4gICAgICBtYXJnaW46IDJweDtcbiAgICAgIHBhZGRpbmc6IDJweCA2cHg7XG4gICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgbWluLXdpZHRoOiAyNHB4O1xuICAgIH1cbiAgICAgICAgLmZsYXQtdGFnLXBpbm5lZC1zZWN0aW9uIHtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeS1hbHQpO1xuICAgICAgcGFkZGluZzogNHB4O1xuICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLXMpO1xuICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgIH1cblxuICAgIC5mbGF0LXRhZy1zZXBhcmF0b3Ige1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBoZWlnaHQ6IDFweDtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgIG1hcmdpbjogNHB4IDAgOHB4IDA7XG4gICAgfVxuICAgIFxuICAgIC5mbGF0LXRhZy1waW5uZWQge1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICB9XG5cbiAgYDtcbn07XG4iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgRmxhdFRhZ1BsdWdpbiBmcm9tIFwiLi9tYWluXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxhdFRhZ1BsdWdpblNldHRpbmdzIHtcbiAgcGlubmVkVGFnczogc3RyaW5nW107XG4gIGZyZXF1ZW5jeUN1dG9mZjogbnVtYmVyO1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRmxhdFRhZ1BsdWdpblNldHRpbmdzID0ge1xuICBwaW5uZWRUYWdzOiBbXSxcbiAgZnJlcXVlbmN5Q3V0b2ZmOiAwLCAvLyAwIG1lYW5zIHNob3cgYWxsIHRhZ3Ncbn07XG5cbmV4cG9ydCBjbGFzcyBGbGF0VGFnU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICBwbHVnaW46IEZsYXRUYWdQbHVnaW47XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRmxhdFRhZ1BsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIkZyZXF1ZW5jeSBDdXRvZmZcIilcbiAgICAgIC5zZXREZXNjKFwiSGlkZSB0YWdzIHRoYXQgYXBwZWFyIGZld2VyIHRpbWVzIHRoYW4gdGhpcyBudW1iZXIgaW4gdGhlIHZhdWx0LiAwIG1lYW5zIHNob3cgYWxsIHRhZ3MuXCIpXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIjBcIilcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZnJlcXVlbmN5Q3V0b2ZmLnRvU3RyaW5nKCkpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VkKSAmJiBwYXJzZWQgPj0gMCkge1xuICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mcmVxdWVuY3lDdXRvZmYgPSBwYXJzZWQ7XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIkNsZWFyIFBpbm5lZCBUYWdzXCIpXG4gICAgICAuc2V0RGVzYyhcIlJlbW92ZXMgYWxsIHBpbm5lZCB0YWdzIGZyb20gdGhlIHRvcCBvZiB0aGUgZmxhdCB0YWcgbGlzdC5cIilcbiAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgYnRuXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDbGVhciBQaW5uZWRcIilcbiAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5waW5uZWRUYWdzID0gW107XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcbiAgfVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQXNDOzs7QUNBdEMsc0JBQXdEOzs7QUNBakQsSUFBTSxZQUFZOzs7QURJbEIsSUFBTSxjQUFOLGNBQTBCLHlCQUFTO0FBQUEsRUFrQnhDLFlBQVksTUFBcUIsUUFBdUI7QUFDdEQsVUFBTSxJQUFJO0FBYlosU0FBUSxlQUE0QixvQkFBSSxJQUFJO0FBQzVDLFNBQVEsZUFBNEIsb0JBQUksSUFBSTtBQUM1QyxTQUFRLFVBQStCLG9CQUFJLElBQUk7QUFDL0MsU0FBUSxjQUE4QjtBQUN0QyxTQUFRLGFBQXVDLG9CQUFJLElBQUk7QUFFdkQsU0FBUSxvQkFBNkI7QUFDckMsU0FBUSxnQkFBd0I7QUFHaEM7QUFBQSxTQUFRLGFBQW1FO0FBSXpFLFNBQUssU0FBUztBQUNkLFNBQUss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Q25CLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUVqQyxTQUFLLElBQUksVUFBVSxRQUFRLGdDQUFnQztBQUFBLEVBQzdEO0FBQUEsRUFFQSxNQUFNLFdBQVc7QUFDZixTQUFLLElBQUksVUFBVSxtQkFBbUIsU0FBUztBQUFBLEVBQ2pEO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDbkIsVUFBTSxFQUFFLFVBQVUsSUFBSSxLQUFLO0FBRTNCLFFBQUksT0FBTyxVQUFVLGdCQUFnQixTQUFTLEVBQUUsQ0FBQztBQUVqRCxRQUFJLENBQUMsTUFBTTtBQUNULFlBQU0sWUFBWSxVQUFVLGFBQWEsS0FBSztBQUM5QyxVQUFJLFdBQVc7QUFDYixlQUFPO0FBQ1AsY0FBTSxLQUFLLGFBQWEsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUFBLE1BQzdDO0FBQUEsSUFDRjtBQUVBLFFBQUksTUFBTTtBQUNSLGdCQUFVLFdBQVcsSUFBSTtBQUFBLElBQzNCO0FBQUEsRUFDRjtBQUFBLEVBRUEsV0FBVztBQUNULFVBQU0sVUFBVSxTQUFTLGNBQWMsT0FBTztBQUM5QyxZQUFRLFlBQVksVUFBVTtBQUM5QixhQUFTLEtBQUssWUFBWSxPQUFPO0FBQUEsRUFDbkM7QUFDRjsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
